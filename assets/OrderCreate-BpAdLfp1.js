import{b as pt,u as ft}from"./vendor-vue-router-o2a2TmKO.js";import{E as ne,c as ge,a as be,b as J,d as yt}from"./vendor-element-plus-nv6hIq5t.js";import{V as kt}from"./VehicleCertTable-DGfU0PJq.js";import{h as ve}from"./http-DGyH82Tn.js";import{u as $e,c as gt,f as bt}from"./orders-f2TW8mPj.js";import{r as E,c as M,Z as Q,o as ht,q as Vt,Y as wt,x as p,z as l,P as a,H as g,ay as U,G as L,J as T,y as u,L as W,O as X,ac as ee,u as r,l as he,M as te,ai as h}from"./vendor-vue-CZOMRj4y.js";import{f as Ut}from"./fieldFormat-kkRAEXYp.js";import{u as xt,p as St}from"./bosUpload-Bf8-Xtq-.js";import{_ as Ct}from"./index-BffKbIYS.js";import"./vendor-lodash-rvV0CIkQ.js";import"./vendor-DWCz07M-.js";import"./vendor-dates-DVKSwKij.js";import"./vendor-axios-C0Zqfgkc.js";import"./vendor-pinia--LqfdQ-h.js";function Ft(x){if(x==null)return[];if(Array.isArray(x))return x;if(typeof x=="object"){const k=x.items;return Array.isArray(k)?k:[]}return[]}function Ve(x,k){const S=Number(k);return Number.isFinite(S)?S:x}function It(x){const k=Number(x);return Number.isFinite(k)?k:null}function Ot(x){const k=x&&typeof x=="object"?x:{},S=k.extra&&typeof k.extra=="object"?k.extra:{},B=String(k.field_name??"").trim();if(!B)return null;const G=It(S.ui_default_list_order),P=S.finance_list_width,q=P==null?void 0:Ve(void 0,P);return{key:B,label:String(k.label??""),type:String(k.type??"text"),sort:Ve(0,k.sort),required:k.required===!0,editable:k.editable!==!1,visible:k.visible!==!1,options:Ft(k.options),show_in_list:S.show_in_list===!0,list_width:Ve(150,S.list_width),show_in_finance_list:S.show_in_finance_list===!0,finance_list_width:q,ui_default_list:S.ui_default_list===!0,ui_default_list_order:G}}function At(){const x=E(!1),k=E([]),S=M(()=>{const V=[],I=Array.isArray(k.value)?k.value:[];for(const A of I){const N=Array.isArray(A?.fields)?A.fields:[];for(const le of N){const se=Ot(le);se&&V.push(se)}}return V.sort((A,N)=>A.sort-N.sort),V});function B(V){return[...V].sort((I,A)=>{const N=I.ui_default_list_order??I.sort??0,le=A.ui_default_list_order??A.sort??0;return N-le})}const G=M(()=>{const V=S.value.filter(I=>I.show_in_list);return V.length?B(V):S.value.slice(0,5)}),P=M(()=>{const V=S.value.filter(A=>A.show_in_finance_list);if(V.length)return B(V);const I=S.value.filter(A=>A.show_in_list);return I.length?B(I).slice(0,3):S.value.slice(0,3)});async function q(V="order"){x.value=!0;try{const I=await ve.get("/field-config/form-config",{params:{module:V}});k.value=Array.isArray(I?.data)?I.data:[]}catch(I){console.error(I),k.value=[]}finally{x.value=!1}}return{groups:k,allFields:S,listFields:G,financeFields:P,loadingConfig:x,loadConfig:q}}const Lt={class:"order-detail"},zt={class:"detail-header"},Et={class:"header-actions"},Mt={class:"upload-mode"},Nt={class:"page-body"},Dt={class:"meta-narrow"},Rt={class:"kv-grid kv-grid-2"},Bt={class:"kv-item"},Pt={class:"kv-value"},Yt={class:"kv-item"},$t={class:"kv-value"},Tt={class:"info-block"},jt={class:"kv-grid kv-grid-2 info-grid"},qt={class:"kv-item"},Gt={class:"kv-value"},Kt={class:"kv-item"},Ht={class:"kv-value"},Wt={class:"kv-grid kv-grid-4 info-grid info-grid-compact"},Zt={class:"kv-item"},Jt={class:"kv-value"},Qt={class:"kv-item"},Xt={class:"kv-value"},el={class:"kv-item"},tl={class:"kv-value"},ll={class:"kv-item"},sl={class:"kv-value"},ol={class:"kv-grid kv-grid-2 info-grid"},nl={class:"kv-item"},il={class:"kv-value"},al={class:"kv-grid kv-grid-5 info-grid info-grid-compact"},dl={class:"kv-item"},rl={class:"kv-value"},ul={class:"kv-item"},cl={class:"kv-value"},ml={class:"kv-item"},vl={class:"kv-value"},_l={class:"kv-item"},pl={class:"kv-value"},fl={class:"kv-item"},yl={class:"kv-value"},kl={class:"kv-grid kv-grid-2 info-grid"},gl={class:"kv-item"},bl={class:"kv-value"},hl={class:"kv-grid kv-grid-5 info-grid info-grid-compact"},Vl={class:"kv-item"},wl={class:"kv-value"},Ul={class:"kv-item"},xl={class:"kv-value"},Sl={class:"kv-item"},Cl={class:"kv-value"},Fl={class:"kv-item"},Il={class:"kv-value"},Ol={class:"kv-item"},Al={class:"kv-value"},Ll={class:"kv-grid kv-grid-2 info-grid"},zl={class:"kv-item"},El={class:"kv-value"},Ml={class:"kv-grid kv-grid-2 info-grid"},Nl={class:"kv-item"},Dl={class:"kv-value"},Rl={class:"section-header"},Bl={class:"two-col"},Pl={class:"left"},Yl={key:0,class:"kv-grid kv-grid-2"},$l={class:"kv-item"},Tl={class:"kv-value"},jl={class:"kv-item"},ql={class:"kv-value"},Gl={class:"kv-item"},Kl={class:"kv-value"},Hl={class:"kv-item"},Wl={class:"kv-value"},Zl={key:1},Jl={class:"right"},Ql={class:"section-header"},Xl={class:"stack"},es={class:"sub-block"},ts={class:"two-col"},ls={class:"left"},ss={key:0,class:"kv-grid kv-grid-2"},os={class:"kv-item"},ns={class:"kv-value"},is={class:"kv-item"},as={class:"kv-value"},ds={key:1,class:"kv-grid kv-grid-2"},rs={class:"kv-label"},us={class:"kv-value"},cs={class:"right"},ms={class:"sub-block"},vs={class:"two-col"},_s={class:"left"},ps={key:0,class:"kv-grid kv-grid-2"},fs={class:"kv-label"},ys={class:"kv-value"},ks={class:"right"},gs={class:"section-header"},bs={class:"stack"},hs={class:"sub-block"},Vs={class:"two-col"},ws={class:"left"},Us={key:0,class:"kv-grid kv-grid-2"},xs={key:0,class:"kv-item"},Ss={class:"kv-value"},Cs={key:1,class:"kv-item"},Fs={class:"kv-value"},Is={key:2,class:"kv-item"},Os={class:"kv-value"},As={key:3,class:"kv-item"},Ls={class:"kv-value"},zs={key:4,class:"kv-item"},Es={class:"kv-value"},Ms={key:5,class:"kv-item"},Ns={class:"kv-value"},Ds={key:6,class:"kv-item"},Rs={class:"kv-value"},Bs={key:1,class:"kv-grid kv-grid-2"},Ps={class:"kv-label"},Ys={class:"kv-value"},$s={class:"right"},Ts={class:"sub-block"},js={class:"two-col"},qs={class:"left"},Gs={key:0,class:"kv-grid kv-grid-2"},Ks={key:0,class:"kv-item"},Hs={class:"kv-value"},Ws={key:1,class:"kv-grid kv-grid-2"},Zs={class:"kv-label"},Js={class:"kv-value"},Qs={class:"right"},Xs={class:"section-header"},eo={class:"section-actions"},to={class:"slot-card"},lo={class:"slot-head"},so={class:"slot-tip"},oo={key:0,class:"preview-wall"},no={key:1,class:"preview-img preview-empty"},io={class:"preview-meta"},ao=["title"],ro={class:"preview-status"},uo={class:"slot-foot"},co={key:0},mo={key:1,class:"muted"},Te="order_import_upload_mode",vo={__name:"OrderCreate",setup(x){const k=pt(),S=ft(),B=E(!1),G=E(!1),P=E(!1),q=E(!1),V=E("smart");function I(){const t=localStorage.getItem(Te);(t==="smart"||t==="direct"||t==="stable")&&(V.value=t)}function A(){try{localStorage.setItem(Te,V.value)}catch{}}I();function N(t){const e=t?.message||t?.response?.data?.detail||t?.response?.data?.message||"";return String(e||"")}function le(t){const e=N(t).toLowerCase();return e.includes("failed to fetch")||e.includes("network error")||e.includes("err_")||e.includes("cors")||e.includes("代理")||e.includes("vpn")||e.includes("hint=浏览器请求可能走了本机代理")||e.includes("127.0.0.1:7890")}let se=!1;async function je(){if(se)return!1;se=!0;try{return await yt.confirm(`上传被当前网络环境拦截（常见于 VPN/代理/公司网关）。

建议切换到【稳定模式上传】继续，无需任何设置。`,"上传失败（网络拦截）",{confirmButtonText:"切换为稳定模式",cancelButtonText:"继续直传重试",type:"warning",center:!0,distinguishCancelAndClose:!0}),V.value="stable",A(),!0}catch{return!1}}function qe(){const t=S.query?.from;if(typeof t=="string"&&t){let e=t;try{e=decodeURIComponent(t)}catch{e=t}if(e.startsWith("/")){k.push(e);return}}if(window.history.length>1){k.back();return}k.push({path:"/orders/all"})}const we=E([]),Ue=E([]),ie=E(!1),ae=E(!1),D=Q({channel_group_id:null,customer_group_id:null}),Ge=M(()=>!!D.customer_group_id&&!!D.channel_group_id&&H.value===0);function xe(t,e){for(const n of e){const i=t?.[n];if(i!=null&&String(i).trim()!=="")return i}return""}function Se(t){const e=xe(t,["channel_code","customer_code","group_code","code","groupCode","group_code_str","groupCodeStr"]),n=xe(t,["channel_name","customer_name","group_name","name","groupName"]),i=t?.id!==null&&t?.id!==void 0?String(t.id):"";return e&&n?`${e} - ${n}`:n?String(n):e?String(e):i||"-"}function Ce(t){const e=t?.data;return Array.isArray(e?.items)?e.items:Array.isArray(e)?e:Array.isArray(e?.data?.items)?e.data.items:Array.isArray(e?.data)?e.data:[]}async function Ke(){ie.value=!0,ae.value=!0;try{const[t,e]=await Promise.all([ve.get("/orders/channel-groups"),ve.get("/orders/customer-groups")]);we.value=Ce(t),Ue.value=Ce(e)}catch(t){console.error(t),ne.error("加载渠道/客户选项失败")}finally{ie.value=!1,ae.value=!1}}const{groups:Fe,allFields:He,loadConfig:We}=At(),Ze=M(()=>{const t=new Map;for(const e of He.value||[])t.set(e.key,e);return t});function F(t){return Ze.value.get(t)||{key:t,label:t,type:"text",options:[]}}function de(t){return t?.key==="id_number"?"公民身份号码":t?.label||t?.key||""}function Ie(t){if(t==null||t==="")return t;const e=String(t);return/^\d{8}$/.test(e)?`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`:t}function Je(t,e){if(t==null||t==="")return"-";const n=e||{type:"text",options:[]},i=n.type==="date"?Ie(t):t,d=Ut(i,n);return d===""?"-":d}const v=Q({}),Qe=M(()=>(Fe.value||[]).find(t=>t.group_key==="driving_license")),Xe=M(()=>(Fe.value||[]).find(t=>t.group_key==="driving_attach"));function Oe(t){return t?(t.fields||[]).map(n=>n.field_name).filter(Boolean).map(n=>F(n)):[]}const et=Object.freeze(["id_name","id_gender","id_ethnicity","id_birth_date","id_address","id_number"]),tt=Object.freeze(["id_issuer","id_validity"]),lt=M(()=>et.map(t=>F(t))),st=M(()=>tt.map(t=>F(t))),Ae=M(()=>Oe(Qe.value)),Le=M(()=>Oe(Xe.value));function K(t,{preferKeys:e=[],labelIncludes:n=[],keyIncludes:i=[]}={}){const d=Array.isArray(t)?t:[];for(const m of e){const y=d.find(c=>c?.key===m);if(y?.key)return y.key}for(const m of i){const y=d.find(c=>String(c?.key||"").toLowerCase().includes(String(m).toLowerCase()));if(y?.key)return y.key}for(const m of n){const y=d.find(c=>String(c?.label||"").includes(String(m)));if(y?.key)return y.key}return null}const ot=M(()=>{const t=Ae.value||[];return{plate:K(t,{preferKeys:["dl_plate_no"],keyIncludes:["plate"],labelIncludes:["号牌"]}),owner:K(t,{preferKeys:["dl_owner"],keyIncludes:["owner"],labelIncludes:["所有人"]}),use_nature:K(t,{preferKeys:["dl_use_nature"],keyIncludes:["use_nature","use"],labelIncludes:["使用性质"]}),brand_model:K(t,{preferKeys:["dl_brand_model"],keyIncludes:["brand","model"],labelIncludes:["品牌型号","品牌","型号"]}),vin:K(t,{preferKeys:["dl_vin","vin"],keyIncludes:["vin"],labelIncludes:["识别","车架"]}),engine:K(t,{preferKeys:["dl_engine_no","engine_no"],keyIncludes:["engine"],labelIncludes:["发动机"]}),register_date:K(t,{preferKeys:["dl_register_date","register_date"],keyIncludes:["register","reg_date"],labelIncludes:["注册日期"]})}});function b(t){return ot.value?.[t]||null}const re=M(()=>{const t=Le.value||[];return K(t,{preferKeys:["dl_approved_passenger_count","approved_passenger_count","dl_passenger_count"],keyIncludes:["passenger","approved"],labelIncludes:["核定载","载人数","载客"]})});function f(t){if(t==null||t==="")return 0;const e=Number(t);return Number.isFinite(e)?e:0}function nt(t){return t==null?"":String(t).trim()}function _e(t){if(!t)return"";const e=String(t).trim();return e?/^\d{8}$/.test(e)?`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`:/^\d{4}-\d{2}-\d{2}/.test(e)?e.slice(0,10):e:""}const o=Q({insurance_expire_date:"",owner_phone:"",commercial_amount:0,compulsory_amount:0,vehicle_tax_amount:0,non_vehicle_amount:0,premium_total:0,channel_commercial_point:0,channel_compulsory_point:0,channel_vehicle_tax_point:0,channel_non_vehicle_point:0,channel_reward:0,channel_total:0,customer_commercial_point:0,customer_compulsory_point:0,customer_vehicle_tax_point:0,customer_non_vehicle_point:0,customer_reward:0,customer_total:0,profit:0});function ze(){const t=Math.max(0,f(o.commercial_amount)),e=Math.max(0,f(o.compulsory_amount)),n=Math.max(0,f(o.vehicle_tax_amount)),i=Math.max(0,f(o.non_vehicle_amount));o.commercial_amount=t,o.compulsory_amount=e,o.vehicle_tax_amount=n,o.non_vehicle_amount=i;const d=t+e+n+i,m=f(o.channel_commercial_point),y=f(o.channel_compulsory_point),c=f(o.channel_vehicle_tax_point),_=f(o.channel_non_vehicle_point),R=f(o.channel_reward),Z=f(o.customer_commercial_point),s=f(o.customer_compulsory_point),$=f(o.customer_vehicle_tax_point),me=f(o.customer_non_vehicle_point),_t=f(o.customer_reward),Pe=t*(m/100)+e*(y/100)+n*(c/100)+i*(_/100)+R,Ye=t*(Z/100)+e*(s/100)+n*($/100)+i*(me/100)+_t;o.premium_total=d,o.channel_total=Pe,o.customer_total=Ye,o.profit=Pe-Ye}ht(()=>[o.commercial_amount,o.compulsory_amount,o.vehicle_tax_amount,o.non_vehicle_amount,o.channel_commercial_point,o.channel_compulsory_point,o.channel_vehicle_tax_point,o.channel_non_vehicle_point,o.channel_reward,o.customer_commercial_point,o.customer_compulsory_point,o.customer_vehicle_tax_point,o.customer_non_vehicle_point,o.customer_reward],()=>ze());function it(){return{insurance_expire_date:o.insurance_expire_date?_e(o.insurance_expire_date):null,owner_phone:o.owner_phone?nt(o.owner_phone):null,commercial_amount:f(o.commercial_amount),compulsory_amount:f(o.compulsory_amount),vehicle_tax_amount:f(o.vehicle_tax_amount),non_vehicle_amount:f(o.non_vehicle_amount),premium_total:f(o.premium_total),channel_commercial_point:f(o.channel_commercial_point),channel_compulsory_point:f(o.channel_compulsory_point),channel_vehicle_tax_point:f(o.channel_vehicle_tax_point),channel_non_vehicle_point:f(o.channel_non_vehicle_point),channel_reward:f(o.channel_reward),channel_total:f(o.channel_total),customer_commercial_point:f(o.customer_commercial_point),customer_compulsory_point:f(o.customer_compulsory_point),customer_vehicle_tax_point:f(o.customer_vehicle_tax_point),customer_non_vehicle_point:f(o.customer_non_vehicle_point),customer_reward:f(o.customer_reward),customer_total:f(o.customer_total),profit:f(o.profit)}}const pe=[{key:"vehicle_cert",label:"合格证",multiple:!1},{key:"idcard_front",label:"身份证正面",multiple:!1},{key:"idcard_back",label:"身份证背面",multiple:!1},{key:"driving_license_main",label:"行驶证主页",multiple:!1},{key:"driving_license_sub",label:"行驶证副页",multiple:!1},{key:"related",label:"相关图片(多张)",multiple:!0}],O=Q(pe.reduce((t,e)=>(t[e.key]=[],t),{})),j=Q({}),z=Q({}),H=E(0),Y=Q({}),fe=E("");let ue=null,ye=0;function at(t){try{return Date.parse(t)}catch{return 0}}async function dt(){const t=Date.now();if(ue&&ye&&t+12e4<ye)return ue;const n=(await ve.get("/orders/bos-sts"))?.data;if(!n?.accessKeyId||!n?.secretAccessKey||!n?.sessionToken)throw new Error("bos-sts response invalid");return ue=n,fe.value=n.bosHost||"",ye=at(n.expiration)||t+600*1e3,ue}function rt(t){return!!pe.find(n=>n.key===t)?.multiple}function ut(t){const e=O[t]||[];return e.length?e[0]:null}function Ee(t){const e=t?.raw;if(e&&!t.url){const n=URL.createObjectURL(e);t.url=n,Y[t.uid]=n}}function ct(t,e){if(!t||!e)return;const n=t.uid,i=n?Y[n]:t.url;if(i){try{URL.revokeObjectURL(i)}catch{}n&&delete Y[n]}const d=URL.createObjectURL(e);t.raw=e,t.url=d,n&&(Y[n]=d)}function ke(t){const e=O[t]||[];for(const n of e){const i=n?.uid;if(!i)continue;j[i]&&delete j[i],z[i]&&delete z[i];const d=Y[i];if(d){try{URL.revokeObjectURL(d)}catch{}delete Y[i]}}O[t]=[]}function Me(t,e){if(!rt(t)){ke(t),Ee(e),O[t]=[e],Re(t,e).catch(i=>{console.error(i),J.error({title:"上传失败",message:N(i)||"unknown error",duration:5e3})});return}const n=Array.isArray(O[t])?[...O[t]]:[];n.find(i=>i.uid===e.uid)||n.push(e),O[t]=n,Ee(e),Re(t,e).catch(i=>{console.error(i),J.error({title:"上传失败",message:N(i)||"unknown error",duration:5e3})})}function Ne(t,e){const n=O[t]||[];O[t]=n.filter(m=>m.uid!==e.uid);const i=e?.uid;i&&j[i]&&delete j[i],i&&z[i]&&delete z[i];const d=Y[i];if(d){try{URL.revokeObjectURL(d)}catch{}delete Y[i]}}async function De(t,e,n){let i=n;try{const d=await St({file:n,slotKey:t});d?.file&&(i=d.file,ct(e,i),d?.note&&J({title:"已预处理",message:d.note,type:"success",duration:1600}))}catch{i=n}return i}async function Re(t,e){const n=e?.raw;if(n&&!j[e.uid]){H.value+=1,z[e.uid]={status:"uploading"};try{if(V.value==="stable"){const m=await De(t,e,n),c=(await $e({slot_key:t,file:m}))?.data;j[e.uid]={slot_key:t,md5:c?.md5,storage_key:c?.storage_key,etag:c?.etag||"",size:c?.size||m.size||0,content_type:c?.content_type||m.type||"application/octet-stream",original_name:c?.original_name||m.name||"file",preview_url:c?.preview_url||""},z[e.uid]={status:"done"},J.success({title:"上传完成",message:`${e.name} 已就绪`,duration:2e3});return}const i=await dt();if(!fe.value)throw new Error("bosHost missing");const d=await xt({bosHost:fe.value,slotKey:t,file:n,sts:i});d?.preprocess_note&&J({title:"已预处理",message:d.preprocess_note,type:"success",duration:1600}),j[e.uid]={slot_key:t,...d,size:d?.size||n.size||0,content_type:d?.content_type||n.type||"application/octet-stream",original_name:d?.original_name||n.name||"file"},z[e.uid]={status:"done"},J.success({title:"上传完成",message:`${e.name} 已就绪`,duration:2e3})}catch(i){if(V.value==="smart"&&le(i)&&await je())try{const m=e?.raw||n,y=await De(t,e,m),_=(await $e({slot_key:t,file:y}))?.data;j[e.uid]={slot_key:t,md5:_?.md5,storage_key:_?.storage_key,etag:_?.etag||"",size:_?.size||y.size||0,content_type:_?.content_type||y.type||"application/octet-stream",original_name:_?.original_name||y.name||"file",preview_url:_?.preview_url||""},z[e.uid]={status:"done"},J.success({title:"上传完成（稳定模式）",message:`${e.name} 已就绪`,duration:2200});return}catch(m){throw z[e.uid]={status:"error",msg:N(m)||"upload failed"},m}throw z[e.uid]={status:"error",msg:N(i)||"upload failed"},i}finally{H.value-=1}}}function ce(t){const e=O[t]||[];let n=0;for(const i of e)j[i.uid]&&(n+=1);return n}function Be(t){return(O[t]||[]).map(n=>n.url).filter(Boolean)}function mt(){const t=[];for(const e of pe){const n=O[e.key]||[];for(const i of n){const d=j[i.uid];d&&t.push(d)}}return t}async function vt(){if(!D.customer_group_id||!D.channel_group_id){ne.warning("客户和渠道为必选项，请先选择后再保存");return}if(H.value>0){ne.warning("还有文件在上传中，请稍后再保存");return}B.value=!0;try{const t={...v},e=it(),n=await gt({module:"order",dynamic_data:t,order_info:e,customer_group_id:D.customer_group_id??void 0,channel_group_id:D.channel_group_id??void 0}),d=(n?.data?.data??n?.data??n)?.order_id;if(!d)throw new Error("draft missing order_id");const m=mt();await bt({order_id:d,images:m,dynamic_data:t,order_info:e,customer_group_id:D.customer_group_id??void 0,channel_group_id:D.channel_group_id??void 0}),ne.success("创建成功"),k.push({path:`/orders/${d}`})}catch(t){console.error(t),ne.error(N(t)||"保存失败")}finally{B.value=!1}}Vt(async()=>{await We("order"),await Ke(),ze()}),wt(()=>{for(const t of Object.keys(Y)){try{URL.revokeObjectURL(Y[t])}catch{}delete Y[t]}});const C=he({name:"FieldValue",props:{modelValue:{type:[String,Number,Date],default:""},field:{type:Object,required:!0},editable:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:e}){const n=U("el-input"),i=U("el-select"),d=U("el-option"),m=U("el-date-picker"),y=c=>e("update:modelValue",c);return()=>{const c=t.field||{type:"text",options:[]},_=t.modelValue??"",R=Je(_,c);if(!t.editable)return h("span",{class:"plain-value",title:R},R);if(c.type==="date"){const Z=Ie(_)??"";return h(m,{modelValue:Z,"onUpdate:modelValue":y,type:"date",clearable:!0,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",class:"fv fv-date"})}if(c.type==="select"){const Z=Array.isArray(c.options)?c.options:[];return h(i,{modelValue:_,"onUpdate:modelValue":y,filterable:!0,clearable:!0,class:"fv fv-select"},()=>Z.map(s=>{const $=s&&typeof s=="object"?s.label:String(s),me=s&&typeof s=="object"?s.value:s;return h(d,{key:String(me),label:$,value:me})}))}return h(n,{modelValue:_,"onUpdate:modelValue":y,clearable:!0,class:"fv fv-input"})}}}),w=he({name:"InfoValue",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},editable:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0}},emits:["update:modelValue"],setup(t,{emit:e}){const n=U("el-input"),i=U("el-date-picker"),d=U("el-input-number"),m=c=>e("update:modelValue",c);function y(c){if(c==null||c==="")return"-";const _=Number(c);return t.type==="money"?Number.isFinite(_)?_.toFixed(2):"-":t.type==="point"?Number.isFinite(_)?String(_):"-":t.type==="date"?_e(c)||"-":String(c)}return()=>{const c=t.modelValue??"";if(!t.editable){const _=y(c);return h("span",{class:"plain-value",title:_},_)}if(t.type==="date"){const _=_e(c);return h(i,{modelValue:_,"onUpdate:modelValue":m,type:"date",clearable:!0,format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD",class:"fv fv-date"})}if(t.type==="money"||t.type==="point"){const _=c===""||c===null||c===void 0?void 0:Number(c);return h(d,{modelValue:Number.isFinite(_)?_:void 0,"onUpdate:modelValue":m,controls:!1,precision:t.type==="money"?2:void 0,step:t.type==="money"?1:.1,min:typeof t.min=="number"?t.min:void 0,max:typeof t.max=="number"?t.max:void 0,class:"fv fv-number"})}return h(n,{modelValue:c,"onUpdate:modelValue":m,clearable:!0,class:"fv fv-input"})}}}),oe=he({name:"SlotUploadCard",props:{slotKey:{type:String,required:!0},label:{type:String,default:""},multiple:{type:Boolean,default:!1}},setup(t){const e=U("el-upload"),n=U("el-image"),i=U("el-button"),d=U("el-tag");return()=>{const m=t.slotKey,y=t.label||m,c=O[m]||[],_=ut(m);return h("div",{class:"slot-card"},[h("div",{class:"slot-head"},[h("div",{class:"slot-name"},y),h("div",{class:"slot-tip"},[h(d,{size:"small",type:"info",effect:"plain"},()=>"单张")])]),h(e,{drag:!0,autoUpload:!1,multiple:!1,showFileList:!1,fileList:c,accept:"image/*",class:"upload-box upload-one",onChange:R=>Me(m,R),onRemove:R=>Ne(m,R)},{default:()=>_?h("div",{class:"one-wrap"},[h(n,{src:_?.url,previewSrcList:Be(m),fit:"contain",class:"one-img"}),h("div",{class:"one-mask"},[h("div",{class:"one-mask-text"},"拖拽或点击替换"),h(i,{size:"small",type:"danger",plain:!0,class:"one-remove",onClick:R=>{R?.stopPropagation?.(),ke(m)}},()=>"移除")])]):h("div",{class:"upload-empty"},[h("div",{class:"empty-center"},[h("div",{class:"empty-title"},"拖拽图片到此处"),h("div",{class:"empty-sub"},"或点击选择文件")])])}),h("div",{class:"slot-foot"},[ce(m)>0?h("span",null,`已就绪：${ce(m)} 张`):h("span",{class:"muted"},"未上传")])])}}});return(t,e)=>{const n=U("el-option"),i=U("el-select"),d=U("el-button"),m=U("el-alert"),y=U("el-card"),c=U("el-icon"),_=U("el-tag"),R=U("el-upload"),Z=U("el-image");return u(),p("div",Lt,[l("div",zt,[e[44]||(e[44]=l("h2",null,"手动创建订单",-1)),l("div",Et,[l("div",Mt,[e[41]||(e[41]=l("span",{class:"upload-mode-label"},"上传模式",-1)),a(i,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=s=>V.value=s),size:"small",style:{width:"150px"},onChange:A},{default:g(()=>[a(n,{label:"智能（推荐）",value:"smart"}),a(n,{label:"直传（更快）",value:"direct"}),a(n,{label:"稳定（兼容VPN）",value:"stable"})]),_:1},8,["modelValue"])]),a(d,{size:"small",onClick:qe},{default:g(()=>[...e[42]||(e[42]=[W("返回",-1)])]),_:1}),a(d,{size:"small",type:"primary",loading:B.value,disabled:H.value>0||!Ge.value,onClick:vt},{default:g(()=>[...e[43]||(e[43]=[W(" 保存 ",-1)])]),_:1},8,["loading","disabled"])])]),l("div",Nt,[H.value>0?(u(),L(m,{key:0,class:"upload-alert",type:"warning",closable:!1,"show-icon":"",title:"正在上传",description:`正在上传 ${H.value} 个文件…（全部上传完成后才能保存）`},null,8,["description"])):T("",!0),a(y,{shadow:"never",class:"section-card"},{header:g(()=>[...e[45]||(e[45]=[l("div",{class:"section-header"},[l("div",{class:"section-title"},"渠道、客户")],-1)])]),default:g(()=>[l("div",Dt,[l("div",Rt,[l("div",Bt,[e[46]||(e[46]=l("div",{class:"kv-label"},"渠道",-1)),l("div",Pt,[a(i,{modelValue:D.channel_group_id,"onUpdate:modelValue":e[1]||(e[1]=s=>D.channel_group_id=s),filterable:"",clearable:"",placeholder:"请选择渠道（必选）",class:"fv fv-select",loading:ie.value,disabled:ie.value},{default:g(()=>[(u(!0),p(X,null,ee(we.value,s=>(u(),L(n,{key:String(s.id),label:Se(s),value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])])]),l("div",Yt,[e[47]||(e[47]=l("div",{class:"kv-label"},"客户",-1)),l("div",$t,[a(i,{modelValue:D.customer_group_id,"onUpdate:modelValue":e[2]||(e[2]=s=>D.customer_group_id=s),filterable:"",clearable:"",placeholder:"请选择客户（必选）",class:"fv fv-select",loading:ae.value,disabled:ae.value},{default:g(()=>[(u(!0),p(X,null,ee(Ue.value,s=>(u(),L(n,{key:String(s.id),label:Se(s),value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])])])])])]),_:1}),a(y,{shadow:"never",class:"section-card"},{header:g(()=>[...e[48]||(e[48]=[l("div",{class:"section-header"},[l("div",{class:"section-title"},"订单信息")],-1)])]),default:g(()=>[l("div",Tt,[l("div",jt,[l("div",qt,[e[49]||(e[49]=l("div",{class:"kv-label"},"保险到期日",-1)),l("div",Gt,[a(r(w),{modelValue:o.insurance_expire_date,"onUpdate:modelValue":e[3]||(e[3]=s=>o.insurance_expire_date=s),type:"date",editable:!0},null,8,["modelValue"])])]),l("div",Kt,[e[50]||(e[50]=l("div",{class:"kv-label"},"车主电话",-1)),l("div",Ht,[a(r(w),{modelValue:o.owner_phone,"onUpdate:modelValue":e[4]||(e[4]=s=>o.owner_phone=s),type:"text",editable:!0},null,8,["modelValue"])])])]),l("div",Wt,[l("div",Zt,[e[51]||(e[51]=l("div",{class:"kv-label"},"商业金额",-1)),l("div",Jt,[a(r(w),{modelValue:o.commercial_amount,"onUpdate:modelValue":e[5]||(e[5]=s=>o.commercial_amount=s),type:"money",editable:!0,min:0},null,8,["modelValue"])])]),l("div",Qt,[e[52]||(e[52]=l("div",{class:"kv-label"},"交强金额",-1)),l("div",Xt,[a(r(w),{modelValue:o.compulsory_amount,"onUpdate:modelValue":e[6]||(e[6]=s=>o.compulsory_amount=s),type:"money",editable:!0,min:0},null,8,["modelValue"])])]),l("div",el,[e[53]||(e[53]=l("div",{class:"kv-label"},"车船税金额",-1)),l("div",tl,[a(r(w),{modelValue:o.vehicle_tax_amount,"onUpdate:modelValue":e[7]||(e[7]=s=>o.vehicle_tax_amount=s),type:"money",editable:!0,min:0},null,8,["modelValue"])])]),l("div",ll,[e[54]||(e[54]=l("div",{class:"kv-label"},"非车金额",-1)),l("div",sl,[a(r(w),{modelValue:o.non_vehicle_amount,"onUpdate:modelValue":e[8]||(e[8]=s=>o.non_vehicle_amount=s),type:"money",editable:!0,min:0},null,8,["modelValue"])])])]),l("div",ol,[l("div",nl,[e[55]||(e[55]=l("div",{class:"kv-label"},"保费金额",-1)),l("div",il,[a(r(w),{modelValue:o.premium_total,"onUpdate:modelValue":e[9]||(e[9]=s=>o.premium_total=s),type:"money",editable:!1},null,8,["modelValue"])])])])]),e[69]||(e[69]=l("div",{class:"split-title"},"渠道",-1)),l("div",al,[l("div",dl,[e[56]||(e[56]=l("div",{class:"kv-label"},"商业点位%",-1)),l("div",rl,[a(r(w),{modelValue:o.channel_commercial_point,"onUpdate:modelValue":e[10]||(e[10]=s=>o.channel_commercial_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",ul,[e[57]||(e[57]=l("div",{class:"kv-label"},"交强点位%",-1)),l("div",cl,[a(r(w),{modelValue:o.channel_compulsory_point,"onUpdate:modelValue":e[11]||(e[11]=s=>o.channel_compulsory_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",ml,[e[58]||(e[58]=l("div",{class:"kv-label"},"车船税点位%",-1)),l("div",vl,[a(r(w),{modelValue:o.channel_vehicle_tax_point,"onUpdate:modelValue":e[12]||(e[12]=s=>o.channel_vehicle_tax_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",_l,[e[59]||(e[59]=l("div",{class:"kv-label"},"非车点位%",-1)),l("div",pl,[a(r(w),{modelValue:o.channel_non_vehicle_point,"onUpdate:modelValue":e[13]||(e[13]=s=>o.channel_non_vehicle_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",fl,[e[60]||(e[60]=l("div",{class:"kv-label"},"出单奖励",-1)),l("div",yl,[a(r(w),{modelValue:o.channel_reward,"onUpdate:modelValue":e[14]||(e[14]=s=>o.channel_reward=s),type:"money",editable:!0},null,8,["modelValue"])])])]),l("div",kl,[l("div",gl,[e[61]||(e[61]=l("div",{class:"kv-label"},"渠道合计",-1)),l("div",bl,[a(r(w),{modelValue:o.channel_total,"onUpdate:modelValue":e[15]||(e[15]=s=>o.channel_total=s),type:"money",editable:!1},null,8,["modelValue"])])])]),e[70]||(e[70]=l("div",{class:"split-title"},"客户",-1)),l("div",hl,[l("div",Vl,[e[62]||(e[62]=l("div",{class:"kv-label"},"商业点位%",-1)),l("div",wl,[a(r(w),{modelValue:o.customer_commercial_point,"onUpdate:modelValue":e[16]||(e[16]=s=>o.customer_commercial_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",Ul,[e[63]||(e[63]=l("div",{class:"kv-label"},"交强点位%",-1)),l("div",xl,[a(r(w),{modelValue:o.customer_compulsory_point,"onUpdate:modelValue":e[17]||(e[17]=s=>o.customer_compulsory_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",Sl,[e[64]||(e[64]=l("div",{class:"kv-label"},"车船税点位%",-1)),l("div",Cl,[a(r(w),{modelValue:o.customer_vehicle_tax_point,"onUpdate:modelValue":e[18]||(e[18]=s=>o.customer_vehicle_tax_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",Fl,[e[65]||(e[65]=l("div",{class:"kv-label"},"非车点位%",-1)),l("div",Il,[a(r(w),{modelValue:o.customer_non_vehicle_point,"onUpdate:modelValue":e[19]||(e[19]=s=>o.customer_non_vehicle_point=s),type:"point",editable:!0},null,8,["modelValue"])])]),l("div",Ol,[e[66]||(e[66]=l("div",{class:"kv-label"},"出单奖励",-1)),l("div",Al,[a(r(w),{modelValue:o.customer_reward,"onUpdate:modelValue":e[20]||(e[20]=s=>o.customer_reward=s),type:"money",editable:!0},null,8,["modelValue"])])])]),l("div",Ll,[l("div",zl,[e[67]||(e[67]=l("div",{class:"kv-label"},"客户合计",-1)),l("div",El,[a(r(w),{modelValue:o.customer_total,"onUpdate:modelValue":e[21]||(e[21]=s=>o.customer_total=s),type:"money",editable:!1},null,8,["modelValue"])])])]),l("div",Ml,[l("div",Nl,[e[68]||(e[68]=l("div",{class:"kv-label"},"利润",-1)),l("div",Dl,[a(r(w),{modelValue:o.profit,"onUpdate:modelValue":e[22]||(e[22]=s=>o.profit=s),type:"money",editable:!1},null,8,["modelValue"])])])])]),_:1}),a(y,{shadow:"never",class:"section-card"},{header:g(()=>[l("div",Rl,[e[71]||(e[71]=l("div",{class:"section-title"},"车辆合格证",-1)),a(d,{class:"icon-btn",circle:"",size:"small",onClick:e[23]||(e[23]=s=>G.value=!G.value)},{default:g(()=>[a(c,null,{default:g(()=>[G.value?(u(),L(r(ge),{key:0})):(u(),L(r(be),{key:1}))]),_:1})]),_:1})])]),default:g(()=>[l("div",Bl,[l("div",Pl,[G.value?(u(),p("div",Zl,[a(kt,{data:v,readonly:!1},null,8,["data"])])):(u(),p("div",Yl,[l("div",$l,[e[72]||(e[72]=l("div",{class:"kv-label"},"车辆型号",-1)),l("div",Tl,[a(r(C),{modelValue:v.vehicle_model,"onUpdate:modelValue":e[24]||(e[24]=s=>v.vehicle_model=s),field:F("vehicle_model"),editable:!0},null,8,["modelValue","field"])])]),l("div",jl,[e[73]||(e[73]=l("div",{class:"kv-label"},"车辆识别代号/车架号",-1)),l("div",ql,[a(r(C),{modelValue:v.vin,"onUpdate:modelValue":e[25]||(e[25]=s=>v.vin=s),field:F("vin"),editable:!0},null,8,["modelValue","field"])])]),l("div",Gl,[e[74]||(e[74]=l("div",{class:"kv-label"},"发动机号",-1)),l("div",Kl,[a(r(C),{modelValue:v.engine_no,"onUpdate:modelValue":e[26]||(e[26]=s=>v.engine_no=s),field:F("engine_no"),editable:!0},null,8,["modelValue","field"])])]),l("div",Hl,[e[75]||(e[75]=l("div",{class:"kv-label"},"额定载客(人)",-1)),l("div",Wl,[a(r(C),{modelValue:v.approved_passenger_count,"onUpdate:modelValue":e[27]||(e[27]=s=>v.approved_passenger_count=s),field:F("approved_passenger_count"),editable:!0},null,8,["modelValue","field"])])])]))]),l("div",Jl,[a(r(oe),{"slot-key":"vehicle_cert",label:"合格证",multiple:!1})])])]),_:1}),a(y,{shadow:"never",class:"section-card"},{header:g(()=>[l("div",Ql,[e[76]||(e[76]=l("div",{class:"section-title"},"身份证正面/身份证背面",-1)),a(d,{class:"icon-btn",circle:"",size:"small",onClick:e[28]||(e[28]=s=>P.value=!P.value)},{default:g(()=>[a(c,null,{default:g(()=>[P.value?(u(),L(r(ge),{key:0})):(u(),L(r(be),{key:1}))]),_:1})]),_:1})])]),default:g(()=>[l("div",Xl,[l("div",es,[e[79]||(e[79]=l("div",{class:"sub-title"},"身份证正面",-1)),l("div",ts,[l("div",ls,[P.value?(u(),p("div",ds,[(u(!0),p(X,null,ee(lt.value,s=>(u(),p("div",{key:s.key,class:"kv-item"},[l("div",rs,te(de(s)),1),l("div",us,[a(r(C),{modelValue:v[s.key],"onUpdate:modelValue":$=>v[s.key]=$,field:s,editable:!0},null,8,["modelValue","onUpdate:modelValue","field"])])]))),128))])):(u(),p("div",ss,[l("div",os,[e[77]||(e[77]=l("div",{class:"kv-label"},"姓名",-1)),l("div",ns,[a(r(C),{modelValue:v.id_name,"onUpdate:modelValue":e[29]||(e[29]=s=>v.id_name=s),field:F("id_name"),editable:!0},null,8,["modelValue","field"])])]),l("div",is,[e[78]||(e[78]=l("div",{class:"kv-label"},"公民身份号码",-1)),l("div",as,[a(r(C),{modelValue:v.id_number,"onUpdate:modelValue":e[30]||(e[30]=s=>v.id_number=s),field:F("id_number"),editable:!0},null,8,["modelValue","field"])])])]))]),l("div",cs,[a(r(oe),{"slot-key":"idcard_front",label:"身份证正面",multiple:!1})])])]),l("div",ms,[e[80]||(e[80]=l("div",{class:"sub-title"},"身份证背面",-1)),l("div",vs,[l("div",_s,[P.value?(u(),p("div",ps,[(u(!0),p(X,null,ee(st.value,s=>(u(),p("div",{key:s.key,class:"kv-item"},[l("div",fs,te(de(s)),1),l("div",ys,[a(r(C),{modelValue:v[s.key],"onUpdate:modelValue":$=>v[s.key]=$,field:s,editable:!0},null,8,["modelValue","onUpdate:modelValue","field"])])]))),128))])):T("",!0)]),l("div",ks,[a(r(oe),{"slot-key":"idcard_back",label:"身份证背面",multiple:!1})])])])])]),_:1}),a(y,{shadow:"never",class:"section-card"},{header:g(()=>[l("div",gs,[e[81]||(e[81]=l("div",{class:"section-title"},"行驶证/行驶证副件",-1)),a(d,{class:"icon-btn",circle:"",size:"small",onClick:e[31]||(e[31]=s=>q.value=!q.value)},{default:g(()=>[a(c,null,{default:g(()=>[q.value?(u(),L(r(ge),{key:0})):(u(),L(r(be),{key:1}))]),_:1})]),_:1})])]),default:g(()=>[l("div",bs,[l("div",hs,[e[89]||(e[89]=l("div",{class:"sub-title"},"行驶证",-1)),l("div",Vs,[l("div",ws,[q.value?(u(),p("div",Bs,[(u(!0),p(X,null,ee(Ae.value,s=>(u(),p("div",{key:s.key,class:"kv-item"},[l("div",Ps,te(de(s)),1),l("div",Ys,[a(r(C),{modelValue:v[s.key],"onUpdate:modelValue":$=>v[s.key]=$,field:s,editable:!0},null,8,["modelValue","onUpdate:modelValue","field"])])]))),128))])):(u(),p("div",Us,[b("plate")?(u(),p("div",xs,[e[82]||(e[82]=l("div",{class:"kv-label"},"号牌号码",-1)),l("div",Ss,[a(r(C),{modelValue:v[b("plate")],"onUpdate:modelValue":e[32]||(e[32]=s=>v[b("plate")]=s),field:F(b("plate")),editable:!0},null,8,["modelValue","field"])])])):T("",!0),b("owner")?(u(),p("div",Cs,[e[83]||(e[83]=l("div",{class:"kv-label"},"所有人",-1)),l("div",Fs,[a(r(C),{modelValue:v[b("owner")],"onUpdate:modelValue":e[33]||(e[33]=s=>v[b("owner")]=s),field:F(b("owner")),editable:!0},null,8,["modelValue","field"])])])):T("",!0),b("use_nature")?(u(),p("div",Is,[e[84]||(e[84]=l("div",{class:"kv-label"},"使用性质",-1)),l("div",Os,[a(r(C),{modelValue:v[b("use_nature")],"onUpdate:modelValue":e[34]||(e[34]=s=>v[b("use_nature")]=s),field:F(b("use_nature")),editable:!0},null,8,["modelValue","field"])])])):T("",!0),b("brand_model")?(u(),p("div",As,[e[85]||(e[85]=l("div",{class:"kv-label"},"品牌型号",-1)),l("div",Ls,[a(r(C),{modelValue:v[b("brand_model")],"onUpdate:modelValue":e[35]||(e[35]=s=>v[b("brand_model")]=s),field:F(b("brand_model")),editable:!0},null,8,["modelValue","field"])])])):T("",!0),b("vin")?(u(),p("div",zs,[e[86]||(e[86]=l("div",{class:"kv-label"},"车辆识别代码",-1)),l("div",Es,[a(r(C),{modelValue:v[b("vin")],"onUpdate:modelValue":e[36]||(e[36]=s=>v[b("vin")]=s),field:F(b("vin")),editable:!0},null,8,["modelValue","field"])])])):T("",!0),b("engine")?(u(),p("div",Ms,[e[87]||(e[87]=l("div",{class:"kv-label"},"发动机号码",-1)),l("div",Ns,[a(r(C),{modelValue:v[b("engine")],"onUpdate:modelValue":e[37]||(e[37]=s=>v[b("engine")]=s),field:F(b("engine")),editable:!0},null,8,["modelValue","field"])])])):T("",!0),b("register_date")?(u(),p("div",Ds,[e[88]||(e[88]=l("div",{class:"kv-label"},"注册日期",-1)),l("div",Rs,[a(r(C),{modelValue:v[b("register_date")],"onUpdate:modelValue":e[38]||(e[38]=s=>v[b("register_date")]=s),field:F(b("register_date")),editable:!0},null,8,["modelValue","field"])])])):T("",!0)]))]),l("div",$s,[a(r(oe),{"slot-key":"driving_license_main",label:"行驶证主页",multiple:!1})])])]),l("div",Ts,[e[91]||(e[91]=l("div",{class:"sub-title"},"行驶证副件",-1)),l("div",js,[l("div",qs,[q.value?(u(),p("div",Ws,[(u(!0),p(X,null,ee(Le.value,s=>(u(),p("div",{key:s.key,class:"kv-item"},[l("div",Zs,te(de(s)),1),l("div",Js,[a(r(C),{modelValue:v[s.key],"onUpdate:modelValue":$=>v[s.key]=$,field:s,editable:!0},null,8,["modelValue","onUpdate:modelValue","field"])])]))),128))])):(u(),p("div",Gs,[re.value?(u(),p("div",Ks,[e[90]||(e[90]=l("div",{class:"kv-label"},"核定载人数",-1)),l("div",Hs,[a(r(C),{modelValue:v[re.value],"onUpdate:modelValue":e[39]||(e[39]=s=>v[re.value]=s),field:F(re.value),editable:!0},null,8,["modelValue","field"])])])):T("",!0)]))]),l("div",Qs,[a(r(oe),{"slot-key":"driving_license_sub",label:"行驶证副页",multiple:!1})])])])])]),_:1}),a(y,{shadow:"never",class:"section-card"},{header:g(()=>[l("div",Xs,[e[93]||(e[93]=l("div",{class:"section-title"},"相关图片(多张)",-1)),l("div",eo,[a(d,{size:"small",onClick:e[40]||(e[40]=s=>ke("related")),disabled:B.value||H.value>0},{default:g(()=>[...e[92]||(e[92]=[W(" 清空图片 ",-1)])]),_:1},8,["disabled"])])])]),default:g(()=>[l("div",to,[l("div",lo,[e[95]||(e[95]=l("div",{class:"slot-name"},"相关图片(多张)",-1)),l("div",so,[a(_,{size:"small",type:"info",effect:"plain"},{default:g(()=>[...e[94]||(e[94]=[W("可多张",-1)])]),_:1})])]),a(R,{drag:"","auto-upload":!1,multiple:!0,limit:20,"file-list":O.related,"on-change":s=>Me("related",s),"on-remove":s=>Ne("related",s),accept:"image/*",class:"upload-box upload-multi"},{default:g(()=>[...e[96]||(e[96]=[l("div",{class:"upload-empty"},[l("div",{class:"empty-center"},[l("div",{class:"empty-title"},"拖拽图片到此处"),l("div",{class:"empty-sub"},"或点击选择文件（可多张）")])],-1)])]),_:1},8,["file-list","on-change","on-remove"]),(O.related||[]).length?(u(),p("div",oo,[(u(!0),p(X,null,ee(O.related,s=>(u(),p("div",{key:s.uid,class:"preview-item"},[s.url?(u(),L(Z,{key:0,src:s.url,"preview-src-list":Be("related"),fit:"cover",class:"preview-img"},null,8,["src","preview-src-list"])):(u(),p("div",no)),l("div",io,[l("div",{class:"preview-name",title:s.name},te(s.name),9,ao),l("div",ro,[z[s.uid]?.status==="uploading"?(u(),L(_,{key:0,size:"small",type:"warning"},{default:g(()=>[...e[97]||(e[97]=[W("上传中",-1)])]),_:1})):z[s.uid]?.status==="done"?(u(),L(_,{key:1,size:"small",type:"success"},{default:g(()=>[...e[98]||(e[98]=[W("已就绪",-1)])]),_:1})):z[s.uid]?.status==="error"?(u(),L(_,{key:2,size:"small",type:"danger"},{default:g(()=>[...e[99]||(e[99]=[W("失败",-1)])]),_:1})):(u(),L(_,{key:3,size:"small",type:"info",effect:"plain"},{default:g(()=>[...e[100]||(e[100]=[W("待上传",-1)])]),_:1}))])])]))),128))])):T("",!0),l("div",uo,[ce("related")>0?(u(),p("span",co,"已就绪："+te(ce("related"))+" 张",1)):(u(),p("span",mo,"未上传"))])])]),_:1})])])}}},Fo=Ct(vo,[["__scopeId","data-v-d4006ef6"]]);export{Fo as default};
