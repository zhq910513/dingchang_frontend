import{c as E,r as O,o as _n,q as pn,x as N,y as m,z as ie,P as a,M as v,H as l,ay as F,O as U,ac as L,ap as G,G as w,J as M,L as f,X as ue,I as vn,aI as bn,u as Xe}from"./vendor-vue-CZOMRj4y.js";import{u as yn,b as hn}from"./vendor-vue-router-o2a2TmKO.js";import{f as et,E as V,d as se}from"./vendor-element-plus-nv6hIq5t.js";import{e as gn,l as wn,b as kn,d as Sn,a as Nn,h as Vn}from"./orders-f2TW8mPj.js";import{h as J}from"./http-DGyH82Tn.js";import{_ as An,u as Cn}from"./index-ql1pe5O8.js";import{R as S}from"./index-DBEvR4Eq.js";const de="Asia/Shanghai";function lt(d){const i=Number(typeof d=="string"?d.trim():d);if(!Number.isFinite(i))throw new Error("finance api: invalid orderId");if(!Number.isInteger(i))throw new Error("finance api: orderId must be an integer");if(i<=0)throw new Error("finance api: invalid orderId");return i}function ne(d){return d instanceof Date&&Number.isFinite(d.getTime())}function pe(d,i=de){const g=ne(d)?d:new Date(d);return ne(g)?new Intl.DateTimeFormat("en-CA",{timeZone:i,year:"numeric",month:"2-digit",day:"2-digit"}).format(g):""}function tt(d){if(d==null)return"";if(ne(d))return pe(d,de);if(typeof d=="string"){const i=d.trim();if(!i)return"";if(/^\d{8}$/.test(i))return`${i.slice(0,4)}-${i.slice(4,6)}-${i.slice(6,8)}`;const g=i.match(/^(\d{4}-\d{2}-\d{2})/);if(g)return g[1];const h=i.match(/^(\d{4})\/(\d{2})\/(\d{2})/);return h?`${h[1]}-${h[2]}-${h[3]}`:""}if(typeof d=="number"&&Number.isFinite(d)){const i=new Date(d);return ne(i)?pe(i,de):""}return""}function nt(d){if(!Array.isArray(d)||d.length!==2)return null;const i=tt(d[0]),g=tt(d[1]);return!i||!g?null:[i,g]}function ve(d){const i={},g=d&&typeof d=="object"?d:{};for(const[h,y]of Object.entries(g))if(y!=null){if(typeof y=="string"){const R=y.trim();if(!R)continue;i[h]=R;continue}if(typeof y=="number"){if(!Number.isFinite(y))continue;i[h]=y;continue}if(ne(y)){i[h]=pe(y,de);continue}if(Array.isArray(y)){const R=y.map(c=>c==null?c:typeof c=="string"?c.trim():typeof c=="number"?Number.isFinite(c)?c:null:ne(c)?pe(c,de):c).filter(c=>c!=null&&!(typeof c=="string"&&c===""));if(!R.length)continue;i[h]=R;continue}i[h]=y}return i}function Oe(d){const i=ve(d);if(Object.prototype.hasOwnProperty.call(i,"created_date")){const h=Object.prototype.hasOwnProperty.call(i,"created_date_start"),y=Object.prototype.hasOwnProperty.call(i,"created_date_end"),R=!h&&!y?nt(i.created_date):null;delete i.created_date,R&&(i.created_date_start=R[0],i.created_date_end=R[1])}if(Object.prototype.hasOwnProperty.call(i,"first_register_date")){const h=Object.prototype.hasOwnProperty.call(i,"first_register_date_start"),y=Object.prototype.hasOwnProperty.call(i,"first_register_date_end"),R=!h&&!y?nt(i.first_register_date):null;delete i.first_register_date,R&&(i.first_register_date_start=R[0],i.first_register_date_end=R[1])}const g=[["created_date_start","created_date_end"],["first_register_date_start","first_register_date_end"]];for(const[h,y]of g){const R=Object.prototype.hasOwnProperty.call(i,h)&&String(i[h]??"").trim()!=="",c=Object.prototype.hasOwnProperty.call(i,y)&&String(i[y]??"").trim()!=="";R!==c&&(delete i[h],delete i[y])}return i}function Fn(d){const i=d&&typeof d=="object"?d:{},g={};return Object.prototype.hasOwnProperty.call(i,"is_paid")&&(i.is_paid===!0||i.is_paid===!1)&&(g.is_paid=i.is_paid),Object.prototype.hasOwnProperty.call(i,"is_rebate")&&(i.is_rebate===!0||i.is_rebate===!1)&&(g.is_rebate=i.is_rebate),g}function Rn(d={}){const i=Oe(d);return J.get("/orders",{params:i})}function On(d={}){const i=Oe(d);return J.get("/finance/orders/summary",{params:i})}function xn(d={}){const i=Oe(d);return J.get("/finance/orders/export",{params:i,responseType:"blob"})}function at(d,i={}){const g=lt(d),h=Fn(i);if(!Object.keys(h).length)throw new Error("finance api: status patch requires is_paid and/or is_rebate boolean");return J.patch(`/finance/orders/${g}/status`,h)}function En(d){const i=lt(d);return J.post(`/finance/orders/${i}/return`)}function Mn(d={}){const i=ve(d);return J.get("/finance/customer-groups",{params:i})}function Pn(d={}){const i=ve(d);return J.get("/finance/channel-groups",{params:i})}function Un(d={}){const i=d&&typeof d=="object"?d:{},g=i.status!==void 0&&i.status!==null?Number(i.status):1,h=Number.isFinite(g)?g:1,y=ve({...i,status:h});return J.get("/finance/salespersons",{params:y})}const Bn={class:"page"},Tn={class:"page-header"},$n={class:"finance-actions"},In={class:"table-scroll"},Dn={key:0,class:"switch-cell"},jn={key:1},zn={key:0,class:"switch-cell"},Yn={key:1},Ln={key:0},Gn={key:1,class:"actions"},Kn={key:2,class:"actions"},Jn={class:"pagination-wrapper"},Zn={__name:"OrderListBase",props:{title:{type:String,default:"订单列表"},mode:{type:String,default:"all"},source:{type:String,default:"orders"}},setup(d){const i=d,g=hn(),h=yn(),y=Cn(),R=E(()=>{const t=Number(y?.user?.id??0);return Number.isFinite(t)?Math.trunc(t):0}),c=E(()=>String(h?.path||"").startsWith("/finance")),rt=E(()=>!c.value),Z=E(()=>String(y.roleName||"").trim().toLowerCase()),be=E(()=>Z.value===S.SALES),ye=E(()=>{const t=Z.value;return t===S.SUPER_ADMIN||t===S.MANAGER||t===S.FINANCE||t===S.MARKET}),X=E(()=>{if(!c.value)return!1;const t=Z.value;return t===S.FINANCE||t===S.SUPER_ADMIN||t===S.MANAGER}),xe=E(()=>{if(!c.value)return!1;const t=Z.value;return t===S.FINANCE||t===S.SUPER_ADMIN||t===S.MANAGER}),ot=E(()=>{if(!c.value)return!1;const t=Z.value;return t===S.MANAGER||t===S.SUPER_ADMIN}),B=O(!1),ae=O(!1),he=O([]),ge=O(0),ee=O(1),we=O(20),ke=O([]),Se=O([]),D=O([]),T=O(!1),te=O(!1),q=O([]),K=O(!1),H=O(null),le=O("");function p(t){return!!t?._is_summary}function it({row:t}){return p(t)?"row-summary":""}function Ee(){return{owner_name:"",id_number:"",vin:"",engine_no:"",plate_no:"",vehicle_model:"",remark:"",customer_group_id:null,channel_group_id:null,salesperson_id:null,team_name:null,created_date:[]}}function Me(){return{created_date:[],channel_group_id:null,customer_group_id:null,salesperson_id:null,market:"",owner_name:"",insurance_expire_date:"",first_register_date:[],is_paid:null,is_rebate:null,team_names:[]}}const s=O(c.value?Me():Ee()),Pe=E({get(){const t=s.value?.team_names;return Array.isArray(t)&&t[0]||null},set(t){const e=String(t??"").trim();s.value.team_names=e?[e]:[]}});function ut(t,e){const o=t?.dynamic_data;return o&&typeof o=="object"?o[e]:void 0}function Q(t){return String(t??"").trim()}function ce(t){return Q(t?.group_name)||(t?.id!=null?String(t.id):"-")}function Ue(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function re(t){const e=Ue(t);return e===null?"-":e.toFixed(2)}function st(t){const e=Ue(t);return e===null?"-":String(e)}function Be(t){if(t==null||t==="")return"-";const e=String(t).trim();if(!e)return"-";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const o=e.match(/^(\d{4}-\d{2}-\d{2})/);if(o&&o[1])return o[1];if(/^\d+$/.test(e)){const r=Number(e);if(Number.isFinite(r)){const u=e.length===10?r*1e3:r,b=new Date(u);if(Number.isFinite(b.getTime())){const k=new Intl.DateTimeFormat("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(b),x=k.find(I=>I.type==="year")?.value||"",A=k.find(I=>I.type==="month")?.value||"",C=k.find(I=>I.type==="day")?.value||"";if(x&&A&&C)return`${x}-${A}-${C}`}}return"-"}return"-"}function Te(t){if(t==null||t==="")return"";const e=String(t).trim();if(!e)return"";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const o=e.match(/^(\d{4}-\d{2}-\d{2})/);if(o&&o[1])return o[1];const r=Be(e);return r==="-"?"":r}function j(t){const e=t?.order_info;return e&&typeof e=="object"?e:null}const dt=E(()=>{const t=new Map,e=Array.isArray(D.value)?D.value:[];for(const o of e){const r=Number(o?.id);!Number.isFinite(r)||r<=0||t.set(r,o)}return t});function ct(t){const e=Number(t?.salesperson_id);return!Number.isFinite(e)||e<=0?null:dt.value.get(e)||null}function ft(t){const e=Array.isArray(t)?t:[],o=[...new Set(e.map(r=>String(r||"").trim()).filter(Boolean))];return o.length?o.join("、"):""}function fe(t){const e=t?.data??t??{};return Array.isArray(e?.items)?e.items:[]}function mt(t){const e=t?.data??t??{},o=Array.isArray(e?.items)?e.items:[],r=[];for(const u of o){const b=String(u?.team_name??"").trim();b&&r.push(b)}return Array.from(new Set(r)).sort((u,b)=>String(u).localeCompare(String(b),"zh-CN"))}async function _t(t={}){return Vn(t)}async function pt(){return c.value?Mn():kn()}async function vt(){return c.value?Pn():Sn()}async function Ne(t){te.value=!0;try{if(c.value){const r=await Un();D.value=fe(r);return}const e=String(t||"").trim(),o=await _t(e?{team_name:e}:{});D.value=fe(o)}catch(e){console.error(e),D.value=[]}finally{te.value=!1}}const $e=E(()=>Array.isArray(D.value)?D.value:[]);function Ie(){const t=[y?.userId,y?.user_id,y?.id,y?.user?.id,y?.user?.user_id,y?.user?.uid];for(const e of t){const o=Number(e);if(Number.isFinite(o)&&o>0)return o}return null}function De(){if(c.value||!be.value)return;const t=Ie();t&&(s.value.salesperson_id=t),!s.value.team_name&&Array.isArray(q.value)&&q.value.length===1&&(s.value.team_name=q.value[0])}async function bt(t){if(c.value)return;const e=s.value?.salesperson_id;if(!be.value)s.value.salesperson_id=null;else{const o=Ie();o&&(s.value.salesperson_id=o)}await Ne(t),!be.value&&e&&(Array.isArray(D.value)?D.value:[]).some(r=>Number(r?.id)===Number(e))&&(s.value.salesperson_id=e)}async function yt(){T.value=!0,K.value=!0;const t=[pt(),vt(),gn()],e=await Promise.allSettled(t),o=e[0];ke.value=o?.status==="fulfilled"?fe(o.value):[],o?.status!=="fulfilled"&&console.error(o?.reason);const r=e[1];Se.value=r?.status==="fulfilled"?fe(r.value):[],r?.status!=="fulfilled"&&console.error(r?.reason);const u=e[2];q.value=u?.status==="fulfilled"?mt(u.value):[],u?.status!=="fulfilled"&&console.error(u?.reason),T.value=!1,K.value=!1,De(),await Ne(s.value?.team_name)}async function ht(){if(!c.value)return;const t=Ze(),e=on(t);if(!(e&&e===le.value&&H.value))try{const o=await On(t),r=o?.data??o??{};H.value=r&&typeof r=="object"?r:null,le.value=e||""}catch(o){console.error(o),H.value=null,le.value=e||""}}async function z(){B.value=!0;try{const t=c.value?await Rn(Re()):await wn(Re()),e=t?.data??t??{};he.value=Array.isArray(e?.items)?e.items:[],ge.value=Number(e?.total??0),c.value&&await ht()}catch(t){console.error(t),V.error(c.value?"加载财务列表失败":"加载订单列表失败")}finally{B.value=!1}}function P(){ee.value=1,H.value=null,le.value="",z()}async function je(){s.value=c.value?Me():Ee(),De(),await Ne(s.value?.team_name),ee.value=1,H.value=null,le.value="",await z()}function gt(t){ee.value=t,z()}function wt(t){we.value=t,ee.value=1,z()}function me(t){const e=h.fullPath;c.value?g.push(`/finance/orders/${t}?from=${encodeURIComponent(e)}&source=finance`):g.push(`/orders/${t}?from=${encodeURIComponent(e)}`)}function kt(t){const e=R.value;if(!e)return!0;const o=Number(t?.salesperson_id??0);return!Number.isFinite(o)||o<=0?!0:Math.trunc(o)===e}function ze(t){if(c.value||!t||p(t)||Ve(t))return!1;const e=Z.value;return e===S.MARKET||e===S.FINANCE?!1:e===S.SALES?kt(t):e===S.SUPER_ADMIN||e===S.MANAGER}function Ye(t){if(c.value||!t||p(t)||!Ve(t))return!1;const e=Z.value;return e===S.SUPER_ADMIN||e===S.MANAGER}async function St(t,e){const o=!!e,r=o?"确认标记完成":"确认退回未完成",u=o?"确认将该订单标记为【已完成】？":"确认将该订单退回【未完成】？";try{await se.confirm(u,r,{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return!1}return!0}async function Le(t,e){if(!t?.id)return;const o=!!e,r=!!t?.is_finished;if(!(r===o||!await St(t,o))){t._saving_finished=!0,t.is_finished=o;try{await Nn(t.id,{is_finished:o}),V.success(o?"已标记完成":"已退回未完成"),await z()}catch(b){console.error(b),t.is_finished=r,V.error("操作失败")}finally{t._saving_finished=!1}}}async function Nt(t,e){if(!(!e||p(e))){if(t==="detail"){me(e.id);return}if(t==="markFinished"){if(!ze(e)){V.error("无权限操作");return}await Le(e,!0);return}if(t==="reopen"){if(!Ye(e)){V.error("无权限操作");return}await Le(e,!1)}}}async function Vt(){try{await se.alert("退回前请先将【回款】和【返点】都调整为“否”。","无法退回",{type:"warning",center:!0,confirmButtonText:"我知道了"})}catch{}}async function At(t){if(!(!c.value||!t?.id)&&!p(t)){if(!X.value){V.error("无权限操作");return}if(Ae(t)||Ce(t)){await Vt();return}try{await se.confirm("确认将该订单退回【未完成】？","确认退回",{confirmButtonText:"确认退回",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}try{await En(t.id),V.success("已退回未完成"),await z()}catch(e){console.error(e),V.error("操作失败")}}}async function Ct(t,e){if(!(!e||p(e))){if(t==="detail"){me(e.id);return}t==="return"&&await At(e)}}async function Ft(t,e){if(!c.value||!t?.id||p(t)||!X.value)return;const o=Ae(t),r=!!e;if(o!==r){try{await se.confirm(`确认将该订单【回款】改为【${r?"是":"否"}】？`,"确认操作",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}t._saving_paid=!0,Ge(t,r);try{await at(t.id,{is_paid:r}),V.success("已更新回款状态")}catch(u){console.error(u),Ge(t,o),V.error("操作失败")}finally{t._saving_paid=!1}}}async function Rt(t,e){if(!c.value||!t?.id||p(t)||!X.value)return;const o=Ce(t),r=!!e;if(o!==r){try{await se.confirm(`确认将该订单【返点】改为【${r?"是":"否"}】？`,"确认操作",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}t._saving_rebate=!0,Ke(t,r);try{await at(t.id,{is_rebate:r}),V.success("已更新返点状态")}catch(u){console.error(u),Ke(t,o),V.error("操作失败")}finally{t._saving_rebate=!1}}}function Ot(){const t=new Intl.DateTimeFormat("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(new Date),e=t.find(u=>u.type==="year")?.value||"0000",o=t.find(u=>u.type==="month")?.value||"00",r=t.find(u=>u.type==="day")?.value||"00";return`${e}-${o}-${r}`}function xt(t){const e=String(t||"");if(!e)return"";const o=e.match(/filename\*\s*=\s*([^;]+)/i);if(o&&o[1]){const u=o[1].trim(),b=u.indexOf("''");if(b>=0){const k=u.slice(b+2).trim();try{return decodeURIComponent(k)}catch{return k}}return u.replace(/^["']|["']$/g,"")}const r=e.match(/filename\s*=\s*([^;]+)/i);return r&&r[1]?r[1].trim().replace(/^["']|["']$/g,""):""}function Et(t,e){const o=URL.createObjectURL(t),r=document.createElement("a");r.href=o,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>{try{URL.revokeObjectURL(o)}catch{}},1200)}async function Mt(){if(c.value){if(!xe.value){V.error("无权限下载");return}if(!ae.value){ae.value=!0;try{const t=Ze(),e=await xn(t),o=Number(e?.status||0),r=e?.headers||{},u=String(r["content-type"]||r["Content-Type"]||"").toLowerCase();if(o>=400){try{const A=await new Response(e.data).text();let C="";try{const I=JSON.parse(A);C=String(I?.detail||I?.message||A||"导出失败")}catch{C=A||"导出失败"}V.error(C)}catch{V.error("导出失败")}return}if(u.includes("application/json")){try{const A=await new Response(e.data).text();V.error(A||"导出失败")}catch{V.error("导出失败")}return}const b=r["content-disposition"]||r["Content-Disposition"]||"",k=xt(b)||`财务管理_订单_${Ot()}.xls`,x=e.data instanceof Blob?e.data:new Blob([e.data],{type:u||"application/octet-stream"});Et(x,k),V.success("已下载符合筛选条件数据")}catch(t){console.error(t),V.error("下载失败")}finally{ae.value=!1}}}}const Pt={commercial_amount:"commercial_amount",compulsory_amount:"compulsory_amount",vehicle_tax_amount:"vehicle_tax_amount",noncar_amount:"non_vehicle_amount"},Ut={channel_commercial_point:"channel_commercial_point",channel_commercial_supplement_point:"channel_commercial_supplement_point",channel_compulsory_point:"channel_compulsory_point",channel_vehicle_tax_point:"channel_vehicle_tax_point",channel_noncar_point:"channel_non_vehicle_point",customer_commercial_point:"customer_commercial_point",customer_commercial_supplement_point:"customer_commercial_supplement_point",customer_compulsory_point:"customer_compulsory_point",customer_vehicle_tax_point:"customer_vehicle_tax_point",customer_noncar_point:"customer_non_vehicle_point"};function Bt(t){return t?.created_at||null}function Ve(t){return!!t?.is_finished}function Tt(t){return String(t?.channel_group_name||"").trim()||"-"}function $t(t){return String(t?.customer_group_name||"").trim()||"-"}function It(t){const e=t?.customer_group_market;return String(e??"").trim()||"-"}function Dt(t){const e=String(t?.salesperson_name??"").trim();if(e)return e;const o=ct(t);return String(o?.real_name||o?.username||"-")}function W(t,e=[]){for(const o of e){const r=ut(t,o),u=String(r??"").trim();if(u)return u}return""}function jt(t){return W(t,["id_name","dl_owner","owner_name"])||"-"}function zt(t){return W(t,["dl_plate_no","plate_no"])||"-"}function Yt(t){const e=j(t)?.insurance_expire_date;return Te(e)||"-"}function Lt(t){return W(t,["dl_vin","vin"])||"-"}function Gt(t){return W(t,["dl_engine_no","engine_no"])||"-"}function Kt(t){return W(t,["dl_brand_model","dl_vehicle_model","vehicle_model","brand_model"])||"-"}function Jt(t){const e=W(t,["dl_register_date","first_register_date","register_date","dl_first_register_date"]);return Te(e)||"-"}function Zt(t){return W(t,["id_number","dl_id_number"])||"-"}function qt(t){const e=j(t)?.owner_phone;return String(e??"").trim()||"-"}function Ht(t){return String(j(t)?.remark??"").trim()||"-"}function Qt(t){return String(t?.manager_name??"").trim()||"-"}function Wt(t){const e=ft(t?.team_names);return e||String(t?.team_name??"").trim()||"-"}function Ae(t){return!!t?.is_paid}function Ce(t){return!!t?.is_rebate}function Ge(t,e){!t||typeof t!="object"||(t.is_paid=!!e)}function Ke(t,e){!t||typeof t!="object"||(t.is_rebate=!!e)}function Xt(t,e){const o=j(t),r=Pt[e]||e;return o?o[r]:null}function en(t,e){const o=j(t),r=Ut[e]||e;return o?o[r]:null}function _e(t,e){return re(Xt(t,e))}function $(t,e){return st(en(t,e))}function tn(t,e){const o=j(t);return o?o[e]??null:null}function Je(t,e){return re(tn(t,e))}function nn(t){return re(j(t)?.channel_total??null)}function an(t){return re(j(t)?.customer_total??null)}function ln(t){return re(j(t)?.profit??null)}function rn(t){if(!Array.isArray(t))return null;const e=Q(t[0]),o=Q(t[1]);return!e&&!o?null:{start:e||"",end:o||""}}function Fe(t,e,o){const r=rn(o);if(!r)return;const u={start:Q(r.start),end:Q(r.end)};u.start&&!u.end&&(u.end=u.start),u.end&&!u.start&&(u.start=u.end),!(!u.start||!u.end)&&(t[`${e}_start`]=u.start,t[`${e}_end`]=u.end)}function Re(){const t={page:ee.value,page_size:we.value},e=s.value||{};if(c.value){const o=Array.isArray(e.team_names)?e.team_names.map(b=>String(b||"").trim()).filter(Boolean):[];o.length&&(t.team_names=o),Fe(t,"created_date",e.created_date),e.channel_group_id&&(t.channel_group_id=e.channel_group_id),e.customer_group_id&&(t.customer_group_id=e.customer_group_id),e.salesperson_id&&(t.salesperson_id=e.salesperson_id);const r=Q(e.market);r&&(t.market=r);const u=Q(e.owner_name);return u&&(t.owner_name=u),e.insurance_expire_date&&(t.insurance_expire_date=e.insurance_expire_date),Fe(t,"first_register_date",e.first_register_date),(e.is_paid===!0||e.is_paid===!1)&&(t.is_paid=e.is_paid),(e.is_rebate===!0||e.is_rebate===!1)&&(t.is_rebate=e.is_rebate),t}return e.team_name&&(t.team_name=String(e.team_name).trim()),i.mode==="finished"&&(t.is_finished=!0),i.mode==="unfinished"&&(t.is_finished=!1),e.owner_name&&(t.owner_name=e.owner_name),e.id_number&&(t.id_number=e.id_number),e.vin&&(t.vin=e.vin),e.engine_no&&(t.engine_no=e.engine_no),e.plate_no&&(t.plate_no=e.plate_no),e.vehicle_model&&(t.vehicle_model=e.vehicle_model),e.remark&&(t.remark=e.remark),e.customer_group_id&&(t.customer_group_id=e.customer_group_id),e.channel_group_id&&(t.channel_group_id=e.channel_group_id),e.salesperson_id&&(t.salesperson_id=e.salesperson_id),Fe(t,"created_date",e.created_date),t}function Ze(){const t={...Re()};return delete t.page,delete t.page_size,t}function on(t){const e=new Set,o=r=>r===null||typeof r!="object"?r:e.has(r)?null:(e.add(r),Array.isArray(r)?r.map(o):Object.keys(r).sort().reduce((u,b)=>(u[b]=o(r[b]),u),{}));try{return JSON.stringify(o(t))}catch{return""}}function un(t){const e=o=>{const r=Number(o);return Number.isFinite(r)?r:0};return{id:-1,_is_summary:!0,created_at:"汇总",is_finished:!0,is_paid:!1,is_rebate:!1,order_info:{commercial_amount:e(t?.commercial_amount),compulsory_amount:e(t?.compulsory_amount),vehicle_tax_amount:e(t?.vehicle_tax_amount),non_vehicle_amount:e(t?.noncar_amount),channel_reward:e(t?.channel_reward),customer_reward:e(t?.customer_reward),channel_total:e(t?.receivable),customer_total:e(t?.payable),profit:e(t?.profit)}}}const sn=E(()=>{const t=Array.isArray(he.value)?[...he.value]:[];return c.value&&H.value&&t.push(un(H.value)),t});return _n(()=>c.value?null:s.value?.team_name??null,async(t,e)=>{c.value||t!==e&&await bt(t)}),pn(async()=>{await yt(),await z()}),(t,e)=>{const o=F("el-date-picker"),r=F("el-form-item"),u=F("el-col"),b=F("el-option"),k=F("el-select"),x=F("el-row"),A=F("el-input"),C=F("el-button"),I=F("el-form"),dn=F("el-card"),_=F("el-table-column"),qe=F("el-switch"),He=F("el-icon"),oe=F("el-dropdown-item"),Qe=F("el-dropdown-menu"),We=F("el-dropdown"),cn=F("el-table"),fn=F("el-pagination"),mn=bn("loading");return m(),N("div",Bn,[ie("div",Tn,[ie("h2",null,v(d.title),1)]),a(dn,{shadow:"never",class:"toolbar-card","body-style":{padding:"10px 12px"}},{default:l(()=>[a(I,{model:s.value,class:"filters-form","label-width":"88px"},{default:l(()=>[c.value?(m(),N(U,{key:0},[a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"日期"},{default:l(()=>[a(o,{modelValue:s.value.created_date,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value.created_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"渠道"},{default:l(()=>[a(k,{modelValue:s.value.channel_group_id,"onUpdate:modelValue":e[1]||(e[1]=n=>s.value.channel_group_id=n),clearable:"",filterable:"",placeholder:"选择渠道",style:{width:"100%"},loading:T.value,disabled:T.value},{default:l(()=>[(m(!0),N(U,null,L(Se.value,n=>(m(),w(b,{key:String(n.id),label:ce(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"客户"},{default:l(()=>[a(k,{modelValue:s.value.customer_group_id,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value.customer_group_id=n),clearable:"",filterable:"",placeholder:"选择客户",style:{width:"100%"},loading:T.value,disabled:T.value},{default:l(()=>[(m(!0),N(U,null,L(ke.value,n=>(m(),w(b,{key:String(n.id),label:ce(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"业务员"},{default:l(()=>[a(k,{modelValue:s.value.salesperson_id,"onUpdate:modelValue":e[3]||(e[3]=n=>s.value.salesperson_id=n),clearable:"",filterable:"",placeholder:"选择业务员",style:{width:"100%"},loading:te.value,disabled:te.value},{default:l(()=>[(m(!0),N(U,null,L($e.value,n=>(m(),w(b,{key:String(n.id),label:n.real_name||n.username,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"市场"},{default:l(()=>[a(A,{modelValue:s.value.market,"onUpdate:modelValue":e[4]||(e[4]=n=>s.value.market=n),clearable:"",placeholder:"市场（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"团队"},{default:l(()=>[ot.value?(m(),w(k,{key:0,modelValue:s.value.team_names,"onUpdate:modelValue":e[5]||(e[5]=n=>s.value.team_names=n),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",clearable:"",filterable:"",placeholder:"选择团队（可多选）",style:{width:"100%"},loading:K.value,disabled:K.value||!ye.value},{default:l(()=>[(m(!0),N(U,null,L(q.value,n=>(m(),w(b,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])):(m(),w(k,{key:1,modelValue:Pe.value,"onUpdate:modelValue":e[6]||(e[6]=n=>Pe.value=n),clearable:"",filterable:"",placeholder:"选择团队",style:{width:"100%"},loading:K.value,disabled:K.value||!ye.value},{default:l(()=>[(m(!0),N(U,null,L(q.value,n=>(m(),w(b,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"]))]),_:1})]),_:1}),a(u,{span:12})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"车主"},{default:l(()=>[a(A,{modelValue:s.value.owner_name,"onUpdate:modelValue":e[7]||(e[7]=n=>s.value.owner_name=n),clearable:"",placeholder:"车主（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"保险到期日"},{default:l(()=>[a(o,{modelValue:s.value.insurance_expire_date,"onUpdate:modelValue":e[8]||(e[8]=n=>s.value.insurance_expire_date=n),type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"初登日期"},{default:l(()=>[a(o,{modelValue:s.value.first_register_date,"onUpdate:modelValue":e[9]||(e[9]=n=>s.value.first_register_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"是否回款"},{default:l(()=>[a(k,{modelValue:s.value.is_paid,"onUpdate:modelValue":e[10]||(e[10]=n=>s.value.is_paid=n),clearable:"",placeholder:"全部",style:{width:"100%"}},{default:l(()=>[a(b,{label:"是",value:!0}),a(b,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"是否返点"},{default:l(()=>[a(k,{modelValue:s.value.is_rebate,"onUpdate:modelValue":e[11]||(e[11]=n=>s.value.is_rebate=n),clearable:"",placeholder:"全部",style:{width:"100%"}},{default:l(()=>[a(b,{label:"是",value:!0}),a(b,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(u,{span:18,class:"finance-actions-col"},{default:l(()=>[ie("div",$n,[a(C,{"native-type":"button",type:"primary",loading:B.value,onClick:P},{default:l(()=>[...e[26]||(e[26]=[f("搜索",-1)])]),_:1},8,["loading"]),a(C,{"native-type":"button",loading:B.value,onClick:je},{default:l(()=>[...e[27]||(e[27]=[f("重置",-1)])]),_:1},8,["loading"]),a(C,{"native-type":"button",loading:B.value,onClick:z},{default:l(()=>[...e[28]||(e[28]=[f("刷新",-1)])]),_:1},8,["loading"]),xe.value?(m(),w(C,{key:0,"native-type":"button",disabled:B.value||ae.value||(Number(ge.value)||0)<=0,loading:ae.value,onClick:ue(Mt,["stop","prevent"])},{default:l(()=>[...e[29]||(e[29]=[f(" 下载 ",-1)])]),_:1},8,["disabled","loading"])):M("",!0)])]),_:1})]),_:1})],64)):(m(),N(U,{key:1},[a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"日期"},{default:l(()=>[a(o,{modelValue:s.value.created_date,"onUpdate:modelValue":e[12]||(e[12]=n=>s.value.created_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"渠道"},{default:l(()=>[a(k,{modelValue:s.value.channel_group_id,"onUpdate:modelValue":e[13]||(e[13]=n=>s.value.channel_group_id=n),clearable:"",filterable:"",placeholder:"选择渠道",style:{width:"100%"},loading:T.value,disabled:T.value},{default:l(()=>[(m(!0),N(U,null,L(Se.value,n=>(m(),w(b,{key:String(n.id),label:ce(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"客户"},{default:l(()=>[a(k,{modelValue:s.value.customer_group_id,"onUpdate:modelValue":e[14]||(e[14]=n=>s.value.customer_group_id=n),clearable:"",filterable:"",placeholder:"选择客户",style:{width:"100%"},loading:T.value,disabled:T.value},{default:l(()=>[(m(!0),N(U,null,L(ke.value,n=>(m(),w(b,{key:String(n.id),label:ce(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"业务员"},{default:l(()=>[a(k,{modelValue:s.value.salesperson_id,"onUpdate:modelValue":e[15]||(e[15]=n=>s.value.salesperson_id=n),clearable:"",filterable:"",placeholder:"选择业务员",style:{width:"100%"},loading:te.value,disabled:te.value},{default:l(()=>[(m(!0),N(U,null,L($e.value,n=>(m(),w(b,{key:String(n.id),label:n.real_name||n.username,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"团队"},{default:l(()=>[a(k,{modelValue:s.value.team_name,"onUpdate:modelValue":e[16]||(e[16]=n=>s.value.team_name=n),clearable:"",filterable:"",placeholder:"选择团队",style:{width:"100%"},loading:K.value,disabled:K.value||!ye.value},{default:l(()=>[(m(!0),N(U,null,L(q.value,n=>(m(),w(b,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(u,{span:18})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"车主"},{default:l(()=>[a(A,{modelValue:s.value.owner_name,"onUpdate:modelValue":e[17]||(e[17]=n=>s.value.owner_name=n),clearable:"",placeholder:"车主（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"身份证号"},{default:l(()=>[a(A,{modelValue:s.value.id_number,"onUpdate:modelValue":e[18]||(e[18]=n=>s.value.id_number=n),clearable:"",placeholder:"身份证号（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"车牌"},{default:l(()=>[a(A,{modelValue:s.value.plate_no,"onUpdate:modelValue":e[19]||(e[19]=n=>s.value.plate_no=n),clearable:"",placeholder:"车牌（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"发动机号"},{default:l(()=>[a(A,{modelValue:s.value.engine_no,"onUpdate:modelValue":e[20]||(e[20]=n=>s.value.engine_no=n),clearable:"",placeholder:"发动机号（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(u,{span:6},{default:l(()=>[a(r,{label:"车架号"},{default:l(()=>[a(A,{modelValue:s.value.vin,"onUpdate:modelValue":e[21]||(e[21]=n=>s.value.vin=n),clearable:"",placeholder:"车架号（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"车型"},{default:l(()=>[a(A,{modelValue:s.value.vehicle_model,"onUpdate:modelValue":e[22]||(e[22]=n=>s.value.vehicle_model=n),clearable:"",placeholder:"车型（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6},{default:l(()=>[a(r,{label:"订单备注"},{default:l(()=>[a(A,{modelValue:s.value.remark,"onUpdate:modelValue":e[23]||(e[23]=n=>s.value.remark=n),clearable:"",placeholder:"订单备注（模糊）",onKeyup:G(P,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(u,{span:6,class:"toolbar-actions"},{default:l(()=>[a(C,{"native-type":"button",type:"primary",loading:B.value,onClick:P},{default:l(()=>[...e[30]||(e[30]=[f("搜索",-1)])]),_:1},8,["loading"]),a(C,{"native-type":"button",loading:B.value,onClick:je},{default:l(()=>[...e[31]||(e[31]=[f("重置",-1)])]),_:1},8,["loading"]),a(C,{"native-type":"button",loading:B.value,onClick:z},{default:l(()=>[...e[32]||(e[32]=[f("刷新",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],64))]),_:1},8,["model"])]),_:1}),ie("div",In,[vn((m(),w(cn,{data:sn.value,border:"",stripe:"",class:"main-table","row-class-name":it},{default:l(()=>[a(_,{label:"日期","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"汇总":Be(Bt(n))),1)]),_:1}),rt.value?(m(),w(_,{key:0,label:"完成状态","min-width":"92",align:"center","header-align":"center","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Ve(n)?"是":"否"),1)]),_:1})):M("",!0),a(_,{label:"渠道","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Tt(n)),1)]),_:1}),a(_,{label:"客户","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$t(n)),1)]),_:1}),a(_,{label:"市场","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":It(n)),1)]),_:1}),c.value?(m(),w(_,{key:1,label:"业务员","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Dt(n)),1)]),_:1})):M("",!0),a(_,{label:"车主","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":jt(n)),1)]),_:1}),a(_,{label:"车牌","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":zt(n)),1)]),_:1}),a(_,{label:"保险到期日","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Yt(n)),1)]),_:1}),a(_,{label:"车架号","min-width":"160","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Lt(n)),1)]),_:1}),a(_,{label:"发动机号","min-width":"150","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Gt(n)),1)]),_:1}),a(_,{label:"车型","min-width":"160","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Kt(n)),1)]),_:1}),a(_,{label:"初登日期","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Jt(n)),1)]),_:1}),a(_,{label:"身份证号","min-width":"170","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Zt(n)),1)]),_:1}),a(_,{label:"电话","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":qt(n)),1)]),_:1}),a(_,{label:"商业金额","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(_e(n,"commercial_amount")),1)]),_:1}),a(_,{label:"交强金额","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(_e(n,"compulsory_amount")),1)]),_:1}),a(_,{label:"车船税金额","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(_e(n,"vehicle_tax_amount")),1)]),_:1}),a(_,{label:"非车金额","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(_e(n,"noncar_amount")),1)]),_:1}),a(_,{label:"渠道商业点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"channel_commercial_point")),1)]),_:1}),c.value?M("",!0):(m(),w(_,{key:2,label:"渠道商业后补点位","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"channel_commercial_supplement_point")),1)]),_:1})),a(_,{label:"渠道交强点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"channel_compulsory_point")),1)]),_:1}),a(_,{label:"渠道车船税点位","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"channel_vehicle_tax_point")),1)]),_:1}),a(_,{label:"渠道非车点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"channel_noncar_point")),1)]),_:1}),c.value?(m(),w(_,{key:3,label:"渠道奖励","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(Je(n,"channel_reward")),1)]),_:1})):M("",!0),a(_,{label:"客户商业点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"customer_commercial_point")),1)]),_:1}),c.value?M("",!0):(m(),w(_,{key:4,label:"客户商业后补点位","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"customer_commercial_supplement_point")),1)]),_:1})),a(_,{label:"客户交强点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"customer_compulsory_point")),1)]),_:1}),a(_,{label:"客户车船税点位","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"customer_vehicle_tax_point")),1)]),_:1}),a(_,{label:"客户非车点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":$(n,"customer_noncar_point")),1)]),_:1}),c.value?(m(),w(_,{key:5,label:"客户奖励","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(Je(n,"customer_reward")),1)]),_:1})):M("",!0),a(_,{label:"应收","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(nn(n)),1)]),_:1}),a(_,{label:"应付","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(an(n)),1)]),_:1}),a(_,{label:"利润","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(ln(n)),1)]),_:1}),a(_,{label:"所属经理","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Qt(n)),1)]),_:1}),a(_,{label:"所属团队","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Wt(n)),1)]),_:1}),a(_,{label:"订单备注","min-width":"180","show-overflow-tooltip":""},{default:l(({row:n})=>[f(v(p(n)?"":Ht(n)),1)]),_:1}),c.value?(m(),w(_,{key:6,label:"是否回款",width:"108",fixed:"right",align:"center","header-align":"center","class-name":"col-switch"},{default:l(({row:n})=>[p(n)?(m(),N("span",jn)):(m(),N("div",Dn,[a(qe,{size:"medium","inline-prompt":"","inactive-text":"否","active-text":"是","model-value":Ae(n),loading:!!n?._saving_paid,disabled:!X.value,onChange:Y=>Ft(n,Y)},null,8,["model-value","loading","disabled","onChange"])]))]),_:1})):M("",!0),c.value?(m(),w(_,{key:7,label:"是否返点",width:"108",fixed:"right",align:"center","header-align":"center","class-name":"col-switch"},{default:l(({row:n})=>[p(n)?(m(),N("span",Yn)):(m(),N("div",zn,[a(qe,{size:"medium","inline-prompt":"","inactive-text":"否","active-text":"是","model-value":Ce(n),loading:!!n?._saving_rebate,disabled:!X.value,onChange:Y=>Rt(n,Y)},null,8,["model-value","loading","disabled","onChange"])]))]),_:1})):M("",!0),a(_,{label:"操作",width:c.value?110:130,fixed:"right",align:"center","header-align":"center","class-name":"col-actions"},{default:l(({row:n})=>[p(n)?(m(),N("span",Ln)):c.value?(m(),N("div",Gn,[a(C,{"native-type":"button",size:"small",link:"",onClick:ue(Y=>me(n.id),["stop"])},{default:l(()=>[...e[33]||(e[33]=[f("详情",-1)])]),_:1},8,["onClick"]),a(We,{trigger:"click",teleported:!0,placement:"bottom-end","popper-class":"order-actions-popper",onCommand:Y=>Ct(Y,n)},{dropdown:l(()=>[a(Qe,null,{default:l(()=>[a(oe,{command:"detail"},{default:l(()=>[...e[34]||(e[34]=[f("详情",-1)])]),_:1}),X.value?(m(),w(oe,{key:0,command:"return",divided:""},{default:l(()=>[...e[35]||(e[35]=[f("退回未完成",-1)])]),_:1})):M("",!0)]),_:1})]),default:l(()=>[a(C,{"native-type":"button",size:"small",circle:"",onClick:e[24]||(e[24]=ue(()=>{},["stop"]))},{default:l(()=>[a(He,null,{default:l(()=>[a(Xe(et))]),_:1})]),_:1})]),_:1},8,["onCommand"])])):(m(),N("div",Kn,[a(C,{"native-type":"button",size:"small",link:"",onClick:ue(Y=>me(n.id),["stop"])},{default:l(()=>[...e[36]||(e[36]=[f("详情",-1)])]),_:1},8,["onClick"]),a(We,{trigger:"click",teleported:!0,placement:"bottom-end","popper-class":"order-actions-popper",onCommand:Y=>Nt(Y,n)},{dropdown:l(()=>[a(Qe,null,{default:l(()=>[a(oe,{command:"detail"},{default:l(()=>[...e[37]||(e[37]=[f("详情",-1)])]),_:1}),ze(n)?(m(),w(oe,{key:0,command:"markFinished",divided:""},{default:l(()=>[...e[38]||(e[38]=[f("标记完成",-1)])]),_:1})):M("",!0),Ye(n)?(m(),w(oe,{key:1,command:"reopen",divided:""},{default:l(()=>[...e[39]||(e[39]=[f("退回未完成",-1)])]),_:1})):M("",!0)]),_:2},1024)]),default:l(()=>[a(C,{"native-type":"button",size:"small",circle:"",onClick:e[25]||(e[25]=ue(()=>{},["stop"]))},{default:l(()=>[a(He,null,{default:l(()=>[a(Xe(et))]),_:1})]),_:1})]),_:2},1032,["onCommand"])]))]),_:1},8,["width"])]),_:1},8,["data"])),[[mn,B.value]])]),ie("div",Jn,[a(fn,{background:"",layout:"total, prev, pager, next, sizes",total:ge.value,"current-page":ee.value,"page-size":we.value,"page-sizes":[10,20,50,100],onCurrentChange:gt,onSizeChange:wt},null,8,["total","current-page","page-size"])])])}}},na=An(Zn,[["__scopeId","data-v-99073257"]]);export{na as O};
