const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-BZdDNIAs.js","assets/vendor-vue-fFWwKrgY.js","assets/vendor-vue-router-CVyACjsp.js","assets/auth-9daRAOLC.js","assets/http-CBIyYC5i.js","assets/vendor-axios-C0Zqfgkc.js","assets/vendor-element-plus-CtVxZ4Oy.js","assets/vendor-lodash-rvV0CIkQ.js","assets/vendor-DWCz07M-.js","assets/vendor-dates-DVKSwKij.js","assets/vendor-element-plus-BaI2aKL6.css","assets/vendor-pinia-CMXa-Za0.js","assets/Login-BVJtPgR6.css","assets/Dashboard-inIUdxZ3.js","assets/Dashboard-DJctdrg9.css","assets/OrderList-Dja2dYTD.js","assets/OrderListBase-BG2Et8ji.js","assets/orders-C0J9gWfa.js","assets/finance-DEkAaesZ.js","assets/OrderListBase-DUvt62vG.css","assets/OrderCreate-CgpsBUJX.js","assets/bosUpload-BYXZNDyG.js","assets/bosUpload-DiM6VJpX.css","assets/fieldFormat-dj427FSC.js","assets/OrderCreate-Bb9gnTjF.css","assets/OrderDetail-DGB3LGwC.js","assets/OrderDetail-KI4Dn5AV.css","assets/OrderFinished-DlaYz9rn.js","assets/OrderUnfinished-Dsknwb9W.js","assets/OrderImport-H7JY5N75.js","assets/OrderImport-C0TjsDsN.css","assets/UserList-C98lv2g8.js","assets/UserList-Bd01ySUu.css","assets/FinanceList-9wnhDXRe.js","assets/CustomerList-DIwIYgps.js","assets/customerChannel-0OTur5MX.js","assets/CustomerList-BjJTfyXQ.css","assets/ChannelList-BslK0k1A.js","assets/ChannelList-BIbWOE1Z.css"])))=>i.map(i=>d[i]);
import{G as b,ay as D,y as C,aQ as M}from"./vendor-vue-fFWwKrgY.js";import{c as V,a as W}from"./vendor-vue-router-CVyACjsp.js";import{d as k,c as w}from"./vendor-pinia-CMXa-Za0.js";import{i as U,z as K}from"./vendor-element-plus-CtVxZ4Oy.js";import"./vendor-lodash-rvV0CIkQ.js";import"./vendor-DWCz07M-.js";import"./vendor-dates-DVKSwKij.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}})();const j=(e,t)=>{const o=e.__vccOpts||e;for(const[n,r]of t)o[n]=r;return o},F={};function q(e,t){const o=D("router-view");return C(),b(o)}const B=j(F,[["render",q]]),G="modulepreload",x=function(e){return"/"+e},O={},i=function(t,o,n){let r=Promise.resolve();if(o&&o.length>0){let N=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=N(o.map(c=>{if(c=x(c),c in O)return;O[c]=!0;const f=c.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const u=document.createElement("link");if(u.rel=f?"stylesheet":G,f||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),f)return new Promise((P,T)=>{u.addEventListener("load",P),u.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},p="sessionToken",_="roleName",h="userInfo";function y(e){const t=sessionStorage.getItem(e);return typeof t=="string"?t:""}function v(e){return Object.prototype.toString.call(e)==="[object Object]"}function z(){try{const e=sessionStorage.getItem(h);if(!e)return null;const t=JSON.parse(e);return v(t)?t:null}catch{return null}}function I(e){return e==null?"":String(e).trim()}const A=k("session",{state:()=>({sessionToken:y(p),roleName:y(_),user:z()}),getters:{isLoggedIn:e=>!!e.sessionToken,displayName:e=>e.user?.full_name||e.user?.real_name||e.user?.username||"",roleLabel:e=>e.user?.role_label||e.roleName||""},actions:{setToken(e){const t=I(e);this.sessionToken=t,t?sessionStorage.setItem(p,t):sessionStorage.removeItem(p)},setRoleName(e){const t=I(e);this.roleName=t,t?sessionStorage.setItem(_,t):sessionStorage.removeItem(_)},setUser(e){const t=v(e)?e:null;this.user=t;try{t?sessionStorage.setItem(h,JSON.stringify(t)):sessionStorage.removeItem(h)}catch{}},clearSession(){this.sessionToken="",this.roleName="",this.user=null,sessionStorage.removeItem(p),sessionStorage.removeItem(_),sessionStorage.removeItem(h)}}}),m={SUPER_ADMIN:"super_admin",MANAGER:"manager",SALES:"sales",FINANCE:"finance",MARKET:"market"},_e=["赣州团队","南昌团队","九江团队"];function R(e){return String(e??"").trim().toLowerCase()}function g(e){const t=R(e);return t===m.MARKET?"/channels":t===m.FINANCE?"/finance":"/orders/all"}function H(){try{const e=A();if(e?.isLoggedIn)return g(e.roleName)}catch{}return"/orders/all"}function Y(e,t){const o=R(e),n=String(t||"");if(n==="/"||n==="")return!0;if(n.startsWith("/users"))return o===m.SUPER_ADMIN||o===m.MANAGER;if(o===m.FINANCE&&n.startsWith("/orders")||o===m.SALES&&n.startsWith("/finance"))return!1;if(o===m.MARKET){if(n.startsWith("/orders/create")||n.startsWith("/orders/import"))return!1;if(n.startsWith("/orders")||n.startsWith("/finance")||n.startsWith("/customers")||n.startsWith("/channels"))return!0;if(n.startsWith("/"))return!1}return!0}const $=()=>i(()=>import("./Login-BZdDNIAs.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),J=()=>i(()=>import("./Dashboard-inIUdxZ3.js"),__vite__mapDeps([13,2,1,3,4,5,6,7,8,9,10,11,14])),Q=()=>i(()=>import("./OrderList-Dja2dYTD.js"),__vite__mapDeps([15,16,1,2,6,7,8,9,10,4,5,17,18,19,11])),X=()=>i(()=>import("./OrderCreate-CgpsBUJX.js"),__vite__mapDeps([20,2,1,6,7,8,9,10,21,22,4,5,17,23,11,24])),L=()=>i(()=>import("./OrderDetail-DGB3LGwC.js"),__vite__mapDeps([25,2,1,6,7,8,9,10,21,22,4,5,17,18,23,11,26])),Z=()=>i(()=>import("./OrderFinished-DlaYz9rn.js"),__vite__mapDeps([27,16,1,2,6,7,8,9,10,4,5,17,18,19,11])),ee=()=>i(()=>import("./OrderUnfinished-Dsknwb9W.js"),__vite__mapDeps([28,16,1,2,6,7,8,9,10,4,5,17,18,19,11])),te=()=>i(()=>import("./OrderImport-H7JY5N75.js"),__vite__mapDeps([29,2,1,6,7,8,9,10,4,5,17,21,22,11,30])),re=()=>i(()=>import("./UserList-C98lv2g8.js"),__vite__mapDeps([31,4,5,6,1,7,8,9,10,2,11,32])),ne=()=>i(()=>import("./FinanceList-9wnhDXRe.js"),__vite__mapDeps([33,16,1,2,6,7,8,9,10,4,5,17,18,19,11])),oe=()=>i(()=>import("./CustomerList-DIwIYgps.js"),__vite__mapDeps([34,1,6,7,8,9,10,35,4,5,2,11,36])),se=()=>i(()=>import("./ChannelList-BslK0k1A.js"),__vite__mapDeps([37,1,6,7,8,9,10,35,4,5,2,11,38])),ie=[{path:"/login",name:"login",component:$},{path:"/",name:"dashboard",component:J,redirect:()=>H(),children:[{path:"orders",redirect:"/orders/all"},{path:"orders/import",name:"orders-import",component:te},{path:"orders/all",name:"orders-all",component:Q},{path:"orders/finished",name:"orders-finished",component:Z},{path:"orders/unfinished",name:"orders-unfinished",component:ee},{path:"orders/create",name:"orders-create",component:X},{path:"orders/:id",name:"orders-detail",component:L},{path:"users",name:"users",component:re},{path:"finance",name:"finance",component:ne,meta:{financeReadOnly:!0}},{path:"finance/orders/:id",name:"finance-order-detail",component:L,meta:{financeReadOnly:!0}},{path:"customers",name:"customers",component:oe},{path:"channels",name:"channels",component:se}]},{path:"/:pathMatch(.*)*",redirect:"/"}],S=V({history:W("/"),routes:ie});S.beforeEach(e=>{let t;try{t=A()}catch{t=null}const o=e.path==="/login",n=!!t?.isLoggedIn;if(!o&&!n)return{path:"/login",query:{redirect:e.fullPath},replace:!0};if(o&&n)return{path:g(t.roleName),replace:!0};if(n){const r=t?.roleName;if(!Y(r,e.path))return{path:g(r),query:{noauth:"1",from:e.fullPath},replace:!0}}return!0});const E=M(B),ae=w();E.use(ae);E.use(S);E.use(U,{locale:K});S.isReady().then(()=>{E.mount("#app")});export{m as R,_e as T,j as _,A as u};
