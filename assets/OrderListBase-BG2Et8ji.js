import{c as C,r as N,o as cn,q as dn,x as k,y as d,z as te,P as a,M as f,H as l,ay as V,O as B,ac as P,ap as z,G as v,J as F,L as c,X as ne,I as _n,aI as mn,u as tt}from"./vendor-vue-fFWwKrgY.js";import{u as fn,b as pn}from"./vendor-vue-router-CVyACjsp.js";import{f as nt,E as S,d as ae}from"./vendor-element-plus-CtVxZ4Oy.js";import{h as at}from"./http-CBIyYC5i.js";import{l as vn,d as hn,e as bn,b as yn}from"./orders-C0J9gWfa.js";import{l as gn,a as wn,b as kn,c as Sn,d as Vn,r as Nn,e as xn,u as lt}from"./finance-DEkAaesZ.js";import{_ as An,u as Cn,R as w}from"./index-6ncFfAxE.js";const Rn={class:"page"},Fn={class:"page-header"},Mn={class:"finance-actions"},Un={class:"table-scroll"},Bn={key:0,class:"switch-cell"},En={key:1},In={key:0,class:"switch-cell"},On={key:1},Tn={key:0},Dn={key:1,class:"actions"},$n={key:2,class:"actions"},Pn={class:"pagination-wrapper"},zn={__name:"OrderListBase",props:{title:{type:String,default:"订单列表"},mode:{type:String,default:"all"},source:{type:String,default:"orders"}},setup(Ue){const Be=Ue,Ee=pn(),Ie=fn(),L=Cn(),ot=C(()=>{const t=Number(L?.user?.id??0);return Number.isFinite(t)?Math.trunc(t):0}),s=C(()=>String(Ie?.path||"").startsWith("/finance")),rt=C(()=>!s.value),G=C(()=>String(L.roleName||"").trim().toLowerCase()),pe=C(()=>G.value===w.SALES),ve=C(()=>{const t=G.value;return t===w.SUPER_ADMIN||t===w.MANAGER||t===w.FINANCE||t===w.MARKET}),J=C(()=>{if(!s.value)return!1;const t=G.value;return t===w.FINANCE||t===w.SUPER_ADMIN||t===w.MANAGER}),Oe=C(()=>{if(!s.value)return!1;const t=G.value;return t===w.FINANCE||t===w.SUPER_ADMIN||t===w.MANAGER}),it=C(()=>{if(!s.value)return!1;const t=G.value;return t===w.MANAGER||t===w.SUPER_ADMIN}),E=N(!1),Q=N(!1),he=N([]),be=N(0),Z=N(1),ye=N(20),ge=N([]),we=N([]),T=N([]),I=N(!1),H=N(!1),j=N([]),W=N(!1),K=N(null),ee=N("");function m(t){return!!t?._is_summary}function ut({row:t}){return m(t)?"row-summary":""}function Te(){return{owner_name:"",id_number:"",vin:"",engine_no:"",plate_no:"",vehicle_model:"",remark:"",customer_group_id:null,channel_group_id:null,salesperson_id:null,team_name:null,created_date:[]}}function De(){return{created_date:[],channel_group_id:null,customer_group_id:null,salesperson_id:null,market:"",owner_name:"",insurance_expire_date:"",first_register_date:[],is_paid:null,is_rebate:null,team_names:[]}}const u=N(s.value?De():Te()),$e=C({get(){const t=u.value?.team_names;return Array.isArray(t)?t[0]||null:typeof t=="string"&&t.trim()||null},set(t){const e=String(t??"").trim();u.value.team_names=e?[e]:[]}});function Pe(t,e){const r=t?.dynamic_data;return r&&typeof r=="object"?r[e]:void 0}function X(t,e=[]){const r=t?.dynamic_data;if(!(!r||typeof r!="object"))for(const o of e){const i=r[o];if(i!=null&&String(i).trim()!=="")return i}}function Y(t){return String(t??"").trim()}function le(t){const e=Y(t?.channel_code||t?.customer_code||t?.group_code||t?.code||""),r=Y(t?.channel_name||t?.customer_name||t?.group_name||t?.name||""),o=t?.id!=null?String(t.id):"";return e&&r?`${e} - ${r}`:r||e||o||"-"}function b(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function A(t){const e=b(t);return e===null?"-":e.toFixed(2)}function st(t){return b(t)===null?"-":String(t)}function ze(t){if(t==null||t==="")return"-";const e=String(t).trim();if(!e)return"-";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const r=e.match(/^(\d{4}-\d{2}-\d{2})/);if(r&&r[1])return r[1];if(/^\d+$/.test(e)){const o=Number(e);if(Number.isFinite(o)){const i=e.length===10?o*1e3:o,p=new Date(i);if(Number.isFinite(p.getTime())){const h=new Intl.DateTimeFormat("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(p),x=h.find(R=>R.type==="year")?.value||"",y=h.find(R=>R.type==="month")?.value||"",g=h.find(R=>R.type==="day")?.value||"";if(x&&y&&g)return`${x}-${y}-${g}`}}return"-"}return"-"}function Le(t){if(t==null||t==="")return"";const e=String(t).trim();if(!e)return"";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const r=e.match(/^(\d{4}-\d{2}-\d{2})/);if(r&&r[1])return r[1];const o=ze(e);return o==="-"?"":o}function M(t){const e=t?.order_info;return e&&typeof e=="object"?e:null}const ct=C(()=>{const t=new Map,e=Array.isArray(T.value)?T.value:[];for(const r of e){const o=Number(r?.id);!Number.isFinite(o)||o<=0||t.set(o,r)}return t});function ke(t){const e=Number(t?.salesperson_id);return!Number.isFinite(e)||e<=0?null:ct.value.get(e)||null}function Ye(t){const e=Array.isArray(t)?t:t?[t]:[],r=[...new Set(e.map(o=>String(o||"").trim()).filter(Boolean))];return r.length?r.join("、"):""}function oe(t){const e=t?.data??t??{};return Array.isArray(e?.items)?e.items:[]}function dt(t){const e=t?.data??t??{},r=Array.isArray(e?.items)?e.items:[],o=[];for(const i of r){const p=String(i?.team_name??"").trim();p&&o.push(p)}return Array.from(new Set(o)).sort((i,p)=>String(i).localeCompare(String(p),"zh-CN"))}async function _t(){return at.get("/orders/teams")}async function mt(t={}){return at.get("/orders/salespersons",{params:t})}async function ft(){return s.value?wn():hn()}async function pt(){return s.value?kn():bn()}async function Se(t){H.value=!0;try{if(s.value){const o=await Sn();T.value=oe(o);return}const e=String(t||"").trim(),r=await mt(e?{team_name:e}:{});T.value=oe(r)}catch(e){console.error(e),T.value=[]}finally{H.value=!1}}const Ge=C(()=>Array.isArray(T.value)?T.value:[]);function je(){const t=[L?.userId,L?.user_id,L?.id,L?.user?.id,L?.user?.user_id,L?.user?.uid];for(const e of t){const r=Number(e);if(Number.isFinite(r)&&r>0)return r}return null}function Ke(){if(s.value||!pe.value)return;const t=je();t&&(u.value.salesperson_id=t),!u.value.team_name&&Array.isArray(j.value)&&j.value.length===1&&(u.value.team_name=j.value[0])}cn(()=>u.value?.team_name,async t=>{if(s.value)return;const e=u.value?.salesperson_id;if(!pe.value)u.value.salesperson_id=null;else{const r=je();r&&(u.value.salesperson_id=r)}await Se(t),!pe.value&&e&&(Array.isArray(T.value)?T.value:[]).some(o=>Number(o?.id)===Number(e))&&(u.value.salesperson_id=e)});async function vt(){I.value=!0;const t=[ft(),pt(),_t()],e=await Promise.allSettled(t),r=e[0];ge.value=r?.status==="fulfilled"?oe(r.value):[],r?.status!=="fulfilled"&&console.error(r?.reason);const o=e[1];we.value=o?.status==="fulfilled"?oe(o.value):[],o?.status!=="fulfilled"&&console.error(o?.reason);const i=e[2];j.value=i?.status==="fulfilled"?dt(i.value):[],i?.status!=="fulfilled"&&console.error(i?.reason),I.value=!1,Ke(),await Se(u.value?.team_name)}async function ht(){if(!s.value)return;const t=et(),e=on(t);if(!(e&&e===ee.value&&K.value))try{const r=await Vn(t),o=r?.data??r??{};K.value=o&&typeof o=="object"?o:null,ee.value=e||""}catch(r){console.error(r),K.value=null,ee.value=e||""}}async function D(){E.value=!0;try{const t=s.value?await gn(Fe()):await vn(Fe()),e=t?.data??t??{};he.value=Array.isArray(e?.items)?e.items:[],be.value=Number(e?.total??0),s.value&&await ht()}catch(t){console.error(t),S.error(s.value?"加载财务列表失败":"加载订单列表失败")}finally{E.value=!1}}function U(){Z.value=1,K.value=null,ee.value="",D()}function qe(){u.value=s.value?De():Te(),Ke(),Z.value=1,K.value=null,ee.value="",D(),Se(u.value?.team_name)}function bt(t){Z.value=t,D()}function yt(t){ye.value=t,Z.value=1,D()}function re(t){const e=Ie.fullPath;s.value?Ee.push(`/finance/orders/${t}?from=${encodeURIComponent(e)}&source=finance`):Ee.push(`/orders/${t}?from=${encodeURIComponent(e)}`)}function gt(t){const e=ot.value;if(!e)return!0;const r=Number(t?.salesperson_id??0);return!Number.isFinite(r)||r<=0?!0:Math.trunc(r)===e}function Je(t){if(s.value||!t||m(t)||Ve(t))return!1;const e=G.value;return e===w.MARKET||e===w.FINANCE?!1:e===w.SALES?gt(t):e===w.SUPER_ADMIN||e===w.MANAGER}function Ze(t){if(s.value||!t||m(t)||!Ve(t))return!1;const e=G.value;return e===w.SUPER_ADMIN||e===w.MANAGER}async function wt(t,e){const r=!!e,o=r?"确认标记完成":"确认退回未完成",i=r?"确认将该订单标记为【已完成】？":"确认将该订单退回【未完成】？";try{await ae.confirm(i,o,{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return!1}return!0}async function He(t,e){if(!t?.id)return;const r=!!e,o=!!t?.is_finished;if(!(o===r||!await wt(t,r))){t._saving_finished=!0,t.is_finished=r;try{await yn(t.id,{is_finished:r}),S.success(r?"已标记完成":"已退回未完成"),await D()}catch(p){console.error(p),t.is_finished=o,S.error("操作失败")}finally{t._saving_finished=!1}}}async function kt(t,e){if(!(!e||m(e))){if(t==="detail"){re(e.id);return}if(t==="markFinished"){if(!Je(e)){S.error("无权限操作");return}await He(e,!0);return}if(t==="reopen"){if(!Ze(e)){S.error("无权限操作");return}await He(e,!1)}}}async function St(){try{await ae.alert("退回前请先将【回款】和【返点】都调整为“否”。","无法退回",{type:"warning",center:!0,confirmButtonText:"我知道了"})}catch{}}async function Vt(t){if(!(!s.value||!t?.id)&&!m(t)){if(!J.value){S.error("无权限操作");return}if(Ne(t)||xe(t)){await St();return}try{await ae.confirm("确认将该订单退回【未完成】？","确认退回",{confirmButtonText:"确认退回",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}try{await Nn(t.id),S.success("已退回未完成"),await D()}catch(e){console.error(e),S.error("操作失败")}}}async function Nt(t,e){if(!(!e||m(e))){if(t==="detail"){re(e.id);return}t==="return"&&await Vt(e)}}async function xt(t,e){if(!s.value||!t?.id||m(t)||!J.value)return;const r=Ne(t),o=!!e;if(r!==o){try{await ae.confirm(`确认将该订单【回款】改为【${o?"是":"否"}】？`,"确认操作",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}t._saving_paid=!0,We(t,o);try{await lt(t.id,{is_paid:o}),S.success("已更新回款状态")}catch(i){console.error(i),We(t,r),S.error("操作失败")}finally{t._saving_paid=!1}}}async function At(t,e){if(!s.value||!t?.id||m(t)||!J.value)return;const r=xe(t),o=!!e;if(r!==o){try{await ae.confirm(`确认将该订单【返点】改为【${o?"是":"否"}】？`,"确认操作",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}t._saving_rebate=!0,Xe(t,o);try{await lt(t.id,{is_rebate:o}),S.success("已更新返点状态")}catch(i){console.error(i),Xe(t,r),S.error("操作失败")}finally{t._saving_rebate=!1}}}function Ct(){const t=new Intl.DateTimeFormat("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(new Date),e=t.find(i=>i.type==="year")?.value||"0000",r=t.find(i=>i.type==="month")?.value||"00",o=t.find(i=>i.type==="day")?.value||"00";return`${e}-${r}-${o}`}function Rt(t){const e=String(t||"");if(!e)return"";const r=e.match(/filename\*\s*=\s*([^;]+)/i);if(r&&r[1]){const i=r[1].trim(),p=i.indexOf("''");if(p>=0){const h=i.slice(p+2).trim();try{return decodeURIComponent(h)}catch{return h}}return i.replace(/^["']|["']$/g,"")}const o=e.match(/filename\s*=\s*([^;]+)/i);return o&&o[1]?o[1].trim().replace(/^["']|["']$/g,""):""}function Ft(t,e){const r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>{try{URL.revokeObjectURL(r)}catch{}},1200)}async function Mt(){if(s.value){if(!Oe.value){S.error("无权限下载");return}if(!Q.value){Q.value=!0;try{const t=et(),e=await xn(t),r=Number(e?.status||0),o=e?.headers||{},i=String(o["content-type"]||o["Content-Type"]||"").toLowerCase();if(r>=400){try{const y=await new Response(e.data).text();let g="";try{const R=JSON.parse(y);g=String(R?.detail||R?.message||y||"导出失败")}catch{g=y||"导出失败"}S.error(g)}catch{S.error("导出失败")}return}if(i.includes("application/json")){try{const y=await new Response(e.data).text();S.error(y||"导出失败")}catch{S.error("导出失败")}return}const p=o["content-disposition"]||o["Content-Disposition"]||"",h=Rt(p)||`财务管理_订单_${Ct()}.xls`,x=e.data instanceof Blob?e.data:new Blob([e.data],{type:i||"application/octet-stream"});Ft(x,h),S.success("已下载符合筛选条件数据")}catch(t){console.error(t),S.error("下载失败")}finally{Q.value=!1}}}}const Ut={commercial_amount:"col_14_commercial_amount",compulsory_amount:"col_15_compulsory_amount",vehicle_tax_amount:"col_16_tax_amount",noncar_amount:"col_17_noncar_amount",receivable:"col_26_receivable",payable:"col_27_payable",profit:"col_28_profit"},Bt={channel_commercial_point:"col_18_ch_commercial_point",channel_compulsory_point:"col_19_ch_compulsory_point",channel_vehicle_tax_point:"col_20_ch_tax_point",channel_noncar_point:"col_21_ch_noncar_point",customer_commercial_point:"col_22_cu_commercial_point",customer_compulsory_point:"col_23_cu_compulsory_point",customer_vehicle_tax_point:"col_24_cu_tax_point",customer_noncar_point:"col_25_cu_noncar_point"},Et={commercial_amount:"commercial_amount",compulsory_amount:"compulsory_amount",vehicle_tax_amount:"vehicle_tax_amount",noncar_amount:"non_vehicle_amount"},It={channel_commercial_point:"channel_commercial_point",channel_commercial_supplement_point:"channel_commercial_supplement_point",channel_compulsory_point:"channel_compulsory_point",channel_vehicle_tax_point:"channel_vehicle_tax_point",channel_noncar_point:"channel_non_vehicle_point",customer_commercial_point:"customer_commercial_point",customer_commercial_supplement_point:"customer_commercial_supplement_point",customer_compulsory_point:"customer_compulsory_point",customer_vehicle_tax_point:"customer_vehicle_tax_point",customer_noncar_point:"customer_non_vehicle_point"};function Ot(t){return s.value?t?.col_01_date||t?.created_at||null:t?.created_at||t?.updated_at||null}function Ve(t){return!!t?.is_finished}function Tt(t){return String(s.value?t?.col_02_channel||"":t?.channel_group_name||"").trim()||"-"}function Dt(t){return String(s.value?t?.col_03_customer||"":t?.customer_group_name||"").trim()||"-"}function $t(t){const e=s.value?t?.col_04_market:t?.customer_group_market;return String(e??"").trim()||"-"}function Pt(t){const e=String(t?.salesperson_name??"").trim();if(e)return e;const r=ke(t);return r?String(r.real_name||r.username||"-"):"-"}function zt(t){const e=s.value?t?.col_05_owner:X(t,["id_name","dl_owner","owner_name"]);return String(e??"").trim()||"-"}function Lt(t){const e=s.value?t?.col_06_plate_no:X(t,["plate_no","dl_plate_no"]);return String(e??"").trim()||"-"}function Yt(t){const e=s.value?t?.col_07_insurance_expire_date:M(t)?.insurance_expire_date;return Le(e)||"-"}function Gt(t){const e=s.value?t?.col_08_vin:X(t,["vin","dl_vin"]);return String(e??"").trim()||"-"}function jt(t){const e=s.value?t?.col_09_engine_no:X(t,["engine_no","dl_engine_no"]);return String(e??"").trim()||"-"}function Kt(t){const e=s.value?t?.col_10_vehicle_model:X(t,["vehicle_model","dl_brand_model","brand_model"]);return String(e??"").trim()||"-"}function qt(t){const e=s.value?t?.col_11_first_register_date:X(t,["first_register_date","dl_first_register_date"]);return Le(e)||"-"}function Jt(t){const e=s.value?t?.col_12_id_number:Pe(t,"id_number");return String(e??"").trim()||"-"}function Zt(t){const e=s.value?t?.col_13_owner_phone:M(t)?.owner_phone;return String(e??"").trim()||"-"}function Ht(t){const e=String(t?.remark??"").trim();if(e)return e;const r=M(t),o=String(r?.remark??"").trim();return o||String(Pe(t,"remark")??"").trim()||"-"}function Wt(t){const e=String(t?.manager_name??"").trim();if(e)return e;const r=ke(t);return String(r?.manager_name??"").trim()||"-"}function Xt(t){const e=Ye(t?.team_names);if(e)return e;const r=String(t?.team_name??"").trim();if(r)return r;const o=ke(t),i=Ye(o?.team_names);return i||String(o?.team_name??"").trim()||"-"}function Ne(t){return s.value?!!t?.col_29_is_paid:!!t?.is_paid}function xe(t){return s.value?!!t?.col_30_is_rebate:!!t?.is_rebate}function We(t,e){!t||typeof t!="object"||(s.value&&(t.col_29_is_paid=!!e),t.is_paid=!!e)}function Xe(t,e){!t||typeof t!="object"||(s.value&&(t.col_30_is_rebate=!!e),t.is_rebate=!!e)}function ie(t,e){if(s.value)return t?.[Ut[e]||e];const r=M(t),o=Et[e]||e;return r?r[o]:null}function Qt(t,e){if(s.value)return t?.[Bt[e]||e];const r=M(t),o=It[e]||e;return r?r[o]:null}function ue(t,e){return A(ie(t,e))}function O(t,e){return st(Qt(t,e))}function en(t,e){const r=String(e||"").trim();if(!r)return null;if(s.value)return r==="channel_reward"?t?.col_31_channel_reward??null:r==="customer_reward"?t?.col_32_customer_reward??null:null;const o=M(t);return o?o?.[r]??null:null}function Qe(t,e){return A(en(t,e))}function Ae(t){if(s.value)return!1;const e=M(t);if(!e)return!1;const r=b(e.channel_commercial_supplement_point)||0,o=b(e.customer_commercial_supplement_point)||0;return Math.abs(r)>1e-9||Math.abs(o)>1e-9}function Ce(t){const e=M(t)||{},r=b(e.commercial_amount)||0,o=b(e.compulsory_amount)||0,i=b(e.vehicle_tax_amount)||0,p=b(e.non_vehicle_amount)||0,h=b(e.channel_commercial_point)||0,x=b(e.channel_commercial_supplement_point)||0,y=b(e.channel_compulsory_point)||0,g=b(e.channel_vehicle_tax_point)||0,R=b(e.channel_non_vehicle_point)||0,Me=b(e.channel_reward)||0,_=b(e.customer_commercial_point)||0,se=b(e.customer_commercial_supplement_point)||0,ce=b(e.customer_compulsory_point)||0,q=b(e.customer_vehicle_tax_point)||0,de=b(e.customer_non_vehicle_point)||0,_e=b(e.customer_reward)||0,me=r*(h/100)+r*(x/100)+o*(y/100)+i*(g/100)+p*(R/100)+Me,fe=r*(_/100)+r*(se/100)+o*(ce/100)+i*(q/100)+p*(de/100)+_e;return{channel_total:me,customer_total:fe,profit:me-fe}}function tn(t){if(s.value)return A(ie(t,"receivable"));const e=M(t);return e?Ae(t)?A(Ce(t).channel_total):A(e.channel_total):A(0)}function nn(t){if(s.value)return A(ie(t,"payable"));const e=M(t);return e?Ae(t)?A(Ce(t).customer_total):A(e.customer_total):A(0)}function an(t){if(s.value)return A(ie(t,"profit"));const e=M(t);return e?Ae(t)?A(Ce(t).profit):A(e.profit):A(0)}function ln(t){if(!Array.isArray(t))return null;const e=Y(t[0]),r=Y(t[1]);return!e&&!r?null:{start:e||"",end:r||""}}function Re(t,e,r){const o=ln(r);if(!o)return;const i={start:Y(o.start),end:Y(o.end)};i.start&&!i.end&&(i.end=i.start),i.end&&!i.start&&(i.start=i.end),!(!i.start||!i.end)&&(t[`${e}_start`]=i.start,t[`${e}_end`]=i.end)}function Fe(){const t={page:Z.value,page_size:ye.value},e=u.value||{};if(s.value){const r=Array.isArray(e.team_names)?e.team_names.map(p=>String(p||"").trim()).filter(Boolean):[];r.length&&(t.team_names=r),Re(t,"created_date",e.created_date),e.channel_group_id&&(t.channel_group_id=e.channel_group_id),e.customer_group_id&&(t.customer_group_id=e.customer_group_id),e.salesperson_id&&(t.salesperson_id=e.salesperson_id);const o=Y(e.market);o&&(t.market=o);const i=Y(e.owner_name);return i&&(t.owner_name=i),e.insurance_expire_date&&(t.insurance_expire_date=e.insurance_expire_date),Re(t,"first_register_date",e.first_register_date),(e.is_paid===!0||e.is_paid===!1)&&(t.is_paid=e.is_paid),(e.is_rebate===!0||e.is_rebate===!1)&&(t.is_rebate=e.is_rebate),t}return e.team_name&&(t.team_name=String(e.team_name).trim()),Be.mode==="finished"&&(t.is_finished=!0),Be.mode==="unfinished"&&(t.is_finished=!1),e.owner_name&&(t.owner_name=e.owner_name),e.id_number&&(t.id_number=e.id_number),e.vin&&(t.vin=e.vin),e.engine_no&&(t.engine_no=e.engine_no),e.plate_no&&(t.plate_no=e.plate_no),e.vehicle_model&&(t.vehicle_model=e.vehicle_model),e.remark&&(t.remark=e.remark),e.customer_group_id&&(t.customer_group_id=e.customer_group_id),e.channel_group_id&&(t.channel_group_id=e.channel_group_id),e.salesperson_id&&(t.salesperson_id=e.salesperson_id),Re(t,"created_date",e.created_date),t}function et(){const t={...Fe()};return delete t.page,delete t.page_size,t}function on(t){const e=new Set,r=o=>o===null||typeof o!="object"?o:e.has(o)?null:(e.add(o),Array.isArray(o)?o.map(r):Object.keys(o).sort().reduce((i,p)=>(i[p]=r(o[p]),i),{}));try{return JSON.stringify(r(t))}catch{return""}}function rn(t){const e=r=>{const o=Number(r);return Number.isFinite(o)?o:0};return{id:-1,_is_summary:!0,col_01_date:"汇总",col_14_commercial_amount:e(t?.commercial_amount),col_15_compulsory_amount:e(t?.compulsory_amount),col_16_tax_amount:e(t?.vehicle_tax_amount),col_17_noncar_amount:e(t?.noncar_amount),col_31_channel_reward:e(t?.col_31_channel_reward??t?.channel_reward??0),col_32_customer_reward:e(t?.col_32_customer_reward??t?.customer_reward??0),col_26_receivable:e(t?.receivable),col_27_payable:e(t?.payable),col_28_profit:e(t?.profit)}}const un=C(()=>{const t=Array.isArray(he.value)?[...he.value]:[];return s.value&&K.value&&t.push(rn(K.value)),t});return dn(async()=>{await vt(),await D()}),(t,e)=>{const r=V("el-date-picker"),o=V("el-form-item"),i=V("el-col"),p=V("el-option"),h=V("el-select"),x=V("el-row"),y=V("el-input"),g=V("el-button"),R=V("el-form"),Me=V("el-card"),_=V("el-table-column"),se=V("el-switch"),ce=V("el-icon"),q=V("el-dropdown-item"),de=V("el-dropdown-menu"),_e=V("el-dropdown"),me=V("el-table"),fe=V("el-pagination"),sn=mn("loading");return d(),k("div",Rn,[te("div",Fn,[te("h2",null,f(Ue.title),1)]),a(Me,{shadow:"never",class:"toolbar-card","body-style":{padding:"10px 12px"}},{default:l(()=>[a(R,{model:u.value,class:"filters-form","label-width":"88px"},{default:l(()=>[s.value?(d(),k(B,{key:0},[a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"日期"},{default:l(()=>[a(r,{modelValue:u.value.created_date,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value.created_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"渠道"},{default:l(()=>[a(h,{modelValue:u.value.channel_group_id,"onUpdate:modelValue":e[1]||(e[1]=n=>u.value.channel_group_id=n),clearable:"",filterable:"",placeholder:"选择渠道",style:{width:"100%"},loading:I.value,disabled:I.value},{default:l(()=>[(d(!0),k(B,null,P(we.value,n=>(d(),v(p,{key:String(n.id),label:le(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"客户"},{default:l(()=>[a(h,{modelValue:u.value.customer_group_id,"onUpdate:modelValue":e[2]||(e[2]=n=>u.value.customer_group_id=n),clearable:"",filterable:"",placeholder:"选择客户",style:{width:"100%"},loading:I.value,disabled:I.value},{default:l(()=>[(d(!0),k(B,null,P(ge.value,n=>(d(),v(p,{key:String(n.id),label:le(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"业务员"},{default:l(()=>[a(h,{modelValue:u.value.salesperson_id,"onUpdate:modelValue":e[3]||(e[3]=n=>u.value.salesperson_id=n),clearable:"",filterable:"",placeholder:"选择业务员",style:{width:"100%"},loading:H.value,disabled:H.value},{default:l(()=>[(d(!0),k(B,null,P(Ge.value,n=>(d(),v(p,{key:String(n.id),label:n.real_name||n.username,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"市场"},{default:l(()=>[a(y,{modelValue:u.value.market,"onUpdate:modelValue":e[4]||(e[4]=n=>u.value.market=n),clearable:"",placeholder:"市场（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"团队"},{default:l(()=>[it.value?(d(),v(h,{key:0,modelValue:u.value.team_names,"onUpdate:modelValue":e[5]||(e[5]=n=>u.value.team_names=n),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",clearable:"",filterable:"",placeholder:"选择团队（可多选）",style:{width:"100%"},loading:W.value,disabled:W.value||!ve.value},{default:l(()=>[(d(!0),k(B,null,P(j.value,n=>(d(),v(p,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])):(d(),v(h,{key:1,modelValue:$e.value,"onUpdate:modelValue":e[6]||(e[6]=n=>$e.value=n),clearable:"",filterable:"",placeholder:"选择团队",style:{width:"100%"},loading:W.value,disabled:W.value||!ve.value},{default:l(()=>[(d(!0),k(B,null,P(j.value,n=>(d(),v(p,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"]))]),_:1})]),_:1}),a(i,{span:12})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"车主"},{default:l(()=>[a(y,{modelValue:u.value.owner_name,"onUpdate:modelValue":e[7]||(e[7]=n=>u.value.owner_name=n),clearable:"",placeholder:"车主（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"保险到期日"},{default:l(()=>[a(r,{modelValue:u.value.insurance_expire_date,"onUpdate:modelValue":e[8]||(e[8]=n=>u.value.insurance_expire_date=n),type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"初登日期"},{default:l(()=>[a(r,{modelValue:u.value.first_register_date,"onUpdate:modelValue":e[9]||(e[9]=n=>u.value.first_register_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"是否回款"},{default:l(()=>[a(h,{modelValue:u.value.is_paid,"onUpdate:modelValue":e[10]||(e[10]=n=>u.value.is_paid=n),clearable:"",placeholder:"全部",style:{width:"100%"}},{default:l(()=>[a(p,{label:"是",value:!0}),a(p,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"是否返点"},{default:l(()=>[a(h,{modelValue:u.value.is_rebate,"onUpdate:modelValue":e[11]||(e[11]=n=>u.value.is_rebate=n),clearable:"",placeholder:"全部",style:{width:"100%"}},{default:l(()=>[a(p,{label:"是",value:!0}),a(p,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(i,{span:18,class:"finance-actions-col"},{default:l(()=>[te("div",Mn,[a(g,{"native-type":"button",type:"primary",loading:E.value,onClick:U},{default:l(()=>[...e[26]||(e[26]=[c("搜索",-1)])]),_:1},8,["loading"]),a(g,{"native-type":"button",loading:E.value,onClick:qe},{default:l(()=>[...e[27]||(e[27]=[c("重置",-1)])]),_:1},8,["loading"]),a(g,{"native-type":"button",loading:E.value,onClick:D},{default:l(()=>[...e[28]||(e[28]=[c("刷新",-1)])]),_:1},8,["loading"]),Oe.value?(d(),v(g,{key:0,"native-type":"button",disabled:E.value||Q.value||(Number(be.value)||0)<=0,loading:Q.value,onClick:ne(Mt,["stop","prevent"])},{default:l(()=>[...e[29]||(e[29]=[c(" 下载 ",-1)])]),_:1},8,["disabled","loading"])):F("",!0)])]),_:1})]),_:1})],64)):(d(),k(B,{key:1},[a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"日期"},{default:l(()=>[a(r,{modelValue:u.value.created_date,"onUpdate:modelValue":e[12]||(e[12]=n=>u.value.created_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"渠道"},{default:l(()=>[a(h,{modelValue:u.value.channel_group_id,"onUpdate:modelValue":e[13]||(e[13]=n=>u.value.channel_group_id=n),clearable:"",filterable:"",placeholder:"选择渠道",style:{width:"100%"},loading:I.value,disabled:I.value},{default:l(()=>[(d(!0),k(B,null,P(we.value,n=>(d(),v(p,{key:String(n.id),label:le(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"客户"},{default:l(()=>[a(h,{modelValue:u.value.customer_group_id,"onUpdate:modelValue":e[14]||(e[14]=n=>u.value.customer_group_id=n),clearable:"",filterable:"",placeholder:"选择客户",style:{width:"100%"},loading:I.value,disabled:I.value},{default:l(()=>[(d(!0),k(B,null,P(ge.value,n=>(d(),v(p,{key:String(n.id),label:le(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"业务员"},{default:l(()=>[a(h,{modelValue:u.value.salesperson_id,"onUpdate:modelValue":e[15]||(e[15]=n=>u.value.salesperson_id=n),clearable:"",filterable:"",placeholder:"选择业务员",style:{width:"100%"},loading:H.value,disabled:H.value},{default:l(()=>[(d(!0),k(B,null,P(Ge.value,n=>(d(),v(p,{key:String(n.id),label:n.real_name||n.username,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"团队"},{default:l(()=>[a(h,{modelValue:u.value.team_name,"onUpdate:modelValue":e[16]||(e[16]=n=>u.value.team_name=n),clearable:"",filterable:"",placeholder:"选择团队",style:{width:"100%"},loading:W.value,disabled:W.value||!ve.value},{default:l(()=>[(d(!0),k(B,null,P(j.value,n=>(d(),v(p,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:18})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"车主"},{default:l(()=>[a(y,{modelValue:u.value.owner_name,"onUpdate:modelValue":e[17]||(e[17]=n=>u.value.owner_name=n),clearable:"",placeholder:"车主（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"身份证号"},{default:l(()=>[a(y,{modelValue:u.value.id_number,"onUpdate:modelValue":e[18]||(e[18]=n=>u.value.id_number=n),clearable:"",placeholder:"身份证号（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"车牌"},{default:l(()=>[a(y,{modelValue:u.value.plate_no,"onUpdate:modelValue":e[19]||(e[19]=n=>u.value.plate_no=n),clearable:"",placeholder:"车牌（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"发动机号"},{default:l(()=>[a(y,{modelValue:u.value.engine_no,"onUpdate:modelValue":e[20]||(e[20]=n=>u.value.engine_no=n),clearable:"",placeholder:"发动机号（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{gutter:12},{default:l(()=>[a(i,{span:6},{default:l(()=>[a(o,{label:"车架号"},{default:l(()=>[a(y,{modelValue:u.value.vin,"onUpdate:modelValue":e[21]||(e[21]=n=>u.value.vin=n),clearable:"",placeholder:"车架号（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"车型"},{default:l(()=>[a(y,{modelValue:u.value.vehicle_model,"onUpdate:modelValue":e[22]||(e[22]=n=>u.value.vehicle_model=n),clearable:"",placeholder:"车型（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:l(()=>[a(o,{label:"订单备注"},{default:l(()=>[a(y,{modelValue:u.value.remark,"onUpdate:modelValue":e[23]||(e[23]=n=>u.value.remark=n),clearable:"",placeholder:"订单备注（模糊）",onKeyup:z(U,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6,class:"toolbar-actions"},{default:l(()=>[a(g,{"native-type":"button",type:"primary",loading:E.value,onClick:U},{default:l(()=>[...e[30]||(e[30]=[c("搜索",-1)])]),_:1},8,["loading"]),a(g,{"native-type":"button",loading:E.value,onClick:qe},{default:l(()=>[...e[31]||(e[31]=[c("重置",-1)])]),_:1},8,["loading"]),a(g,{"native-type":"button",loading:E.value,onClick:D},{default:l(()=>[...e[32]||(e[32]=[c("刷新",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],64))]),_:1},8,["model"])]),_:1}),te("div",Un,[_n((d(),v(me,{data:un.value,border:"",stripe:"",class:"main-table","row-class-name":ut},{default:l(()=>[a(_,{label:"日期","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"汇总":ze(Ot(n))),1)]),_:1}),rt.value?(d(),v(_,{key:0,label:"完成状态","min-width":"92",align:"center","header-align":"center","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Ve(n)?"是":"否"),1)]),_:1})):F("",!0),a(_,{label:"渠道","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Tt(n)),1)]),_:1}),a(_,{label:"客户","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Dt(n)),1)]),_:1}),a(_,{label:"市场","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":$t(n)),1)]),_:1}),s.value?(d(),v(_,{key:1,label:"业务员","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Pt(n)),1)]),_:1})):F("",!0),a(_,{label:"车主","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":zt(n)),1)]),_:1}),a(_,{label:"车牌","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Lt(n)),1)]),_:1}),a(_,{label:"保险到期日","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Yt(n)),1)]),_:1}),a(_,{label:"车架号","min-width":"160","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Gt(n)),1)]),_:1}),a(_,{label:"发动机号","min-width":"150","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":jt(n)),1)]),_:1}),a(_,{label:"车型","min-width":"160","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Kt(n)),1)]),_:1}),a(_,{label:"初登日期","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":qt(n)),1)]),_:1}),a(_,{label:"身份证号","min-width":"170","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Jt(n)),1)]),_:1}),a(_,{label:"电话","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Zt(n)),1)]),_:1}),a(_,{label:"商业金额","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(ue(n,"commercial_amount")),1)]),_:1}),a(_,{label:"交强金额","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(ue(n,"compulsory_amount")),1)]),_:1}),a(_,{label:"车船税金额","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(ue(n,"vehicle_tax_amount")),1)]),_:1}),a(_,{label:"非车金额","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(ue(n,"noncar_amount")),1)]),_:1}),a(_,{label:"渠道商业点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"channel_commercial_point")),1)]),_:1}),s.value?F("",!0):(d(),v(_,{key:2,label:"渠道商业后补点位","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"channel_commercial_supplement_point")),1)]),_:1})),a(_,{label:"渠道交强点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"channel_compulsory_point")),1)]),_:1}),a(_,{label:"渠道车船税点位","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"channel_vehicle_tax_point")),1)]),_:1}),a(_,{label:"渠道非车点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"channel_noncar_point")),1)]),_:1}),s.value?(d(),v(_,{key:3,label:"渠道奖励","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(Qe(n,"channel_reward")),1)]),_:1})):F("",!0),a(_,{label:"客户商业点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"customer_commercial_point")),1)]),_:1}),s.value?F("",!0):(d(),v(_,{key:4,label:"客户商业后补点位","min-width":"140","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"customer_commercial_supplement_point")),1)]),_:1})),a(_,{label:"客户交强点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"customer_compulsory_point")),1)]),_:1}),a(_,{label:"客户车船税点位","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"customer_vehicle_tax_point")),1)]),_:1}),a(_,{label:"客户非车点位","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":O(n,"customer_noncar_point")),1)]),_:1}),s.value?(d(),v(_,{key:5,label:"客户奖励","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(Qe(n,"customer_reward")),1)]),_:1})):F("",!0),a(_,{label:"应收","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(tn(n)),1)]),_:1}),a(_,{label:"应付","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(nn(n)),1)]),_:1}),a(_,{label:"利润","min-width":"110","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(an(n)),1)]),_:1}),a(_,{label:"所属经理","min-width":"130","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Wt(n)),1)]),_:1}),a(_,{label:"所属团队","min-width":"120","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Xt(n)),1)]),_:1}),a(_,{label:"订单备注","min-width":"180","show-overflow-tooltip":""},{default:l(({row:n})=>[c(f(m(n)?"":Ht(n)),1)]),_:1}),s.value?(d(),v(_,{key:6,label:"是否回款",width:"108",fixed:"right",align:"center","header-align":"center","class-name":"col-switch"},{default:l(({row:n})=>[m(n)?(d(),k("span",En)):(d(),k("div",Bn,[a(se,{size:"medium","inline-prompt":"","inactive-text":"否","active-text":"是","model-value":Ne(n),loading:!!n?._saving_paid,disabled:!J.value,onChange:$=>xt(n,$)},null,8,["model-value","loading","disabled","onChange"])]))]),_:1})):F("",!0),s.value?(d(),v(_,{key:7,label:"是否返点",width:"108",fixed:"right",align:"center","header-align":"center","class-name":"col-switch"},{default:l(({row:n})=>[m(n)?(d(),k("span",On)):(d(),k("div",In,[a(se,{size:"medium","inline-prompt":"","inactive-text":"否","active-text":"是","model-value":xe(n),loading:!!n?._saving_rebate,disabled:!J.value,onChange:$=>At(n,$)},null,8,["model-value","loading","disabled","onChange"])]))]),_:1})):F("",!0),a(_,{label:"操作",width:s.value?110:130,fixed:"right",align:"center","header-align":"center","class-name":"col-actions"},{default:l(({row:n})=>[m(n)?(d(),k("span",Tn)):s.value?(d(),k("div",Dn,[a(g,{"native-type":"button",size:"small",link:"",onClick:ne($=>re(n.id),["stop"])},{default:l(()=>[...e[33]||(e[33]=[c("详情",-1)])]),_:1},8,["onClick"]),a(_e,{trigger:"click",teleported:!0,placement:"bottom-end","popper-class":"order-actions-popper",onCommand:$=>Nt($,n)},{dropdown:l(()=>[a(de,null,{default:l(()=>[a(q,{command:"detail"},{default:l(()=>[...e[34]||(e[34]=[c("详情",-1)])]),_:1}),J.value?(d(),v(q,{key:0,command:"return",divided:""},{default:l(()=>[...e[35]||(e[35]=[c("退回未完成",-1)])]),_:1})):F("",!0)]),_:1})]),default:l(()=>[a(g,{"native-type":"button",size:"small",circle:"",onClick:e[24]||(e[24]=ne(()=>{},["stop"]))},{default:l(()=>[a(ce,null,{default:l(()=>[a(tt(nt))]),_:1})]),_:1})]),_:1},8,["onCommand"])])):(d(),k("div",$n,[a(g,{"native-type":"button",size:"small",link:"",onClick:ne($=>re(n.id),["stop"])},{default:l(()=>[...e[36]||(e[36]=[c("详情",-1)])]),_:1},8,["onClick"]),a(_e,{trigger:"click",teleported:!0,placement:"bottom-end","popper-class":"order-actions-popper",onCommand:$=>kt($,n)},{dropdown:l(()=>[a(de,null,{default:l(()=>[a(q,{command:"detail"},{default:l(()=>[...e[37]||(e[37]=[c("详情",-1)])]),_:1}),Je(n)?(d(),v(q,{key:0,command:"markFinished",divided:""},{default:l(()=>[...e[38]||(e[38]=[c("标记完成",-1)])]),_:1})):F("",!0),Ze(n)?(d(),v(q,{key:1,command:"reopen",divided:""},{default:l(()=>[...e[39]||(e[39]=[c("退回未完成",-1)])]),_:1})):F("",!0)]),_:2},1024)]),default:l(()=>[a(g,{"native-type":"button",size:"small",circle:"",onClick:e[25]||(e[25]=ne(()=>{},["stop"]))},{default:l(()=>[a(ce,null,{default:l(()=>[a(tt(nt))]),_:1})]),_:1})]),_:2},1032,["onCommand"])]))]),_:1},8,["width"])]),_:1},8,["data"])),[[sn,E.value]])]),te("div",Pn,[a(fe,{background:"",layout:"total, prev, pager, next, sizes",total:be.value,"current-page":Z.value,"page-size":ye.value,"page-sizes":[10,20,50,100],onCurrentChange:bt,onSizeChange:yt},null,8,["total","current-page","page-size"])])])}}},Zn=An(zn,[["__scopeId","data-v-4ee9b799"]]);export{Zn as O};
