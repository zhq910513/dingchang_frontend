import{h as a}from"./http-CBIyYC5i.js";const u="Asia/Shanghai";function p(e){const t=Number(typeof e=="string"?e.trim():e);if(!Number.isFinite(t))throw new Error("finance api: invalid orderId");if(!Number.isInteger(t))throw new Error("finance api: orderId must be an integer");if(t<=0)throw new Error("finance api: invalid orderId");return t}function c(e){return e instanceof Date&&Number.isFinite(e.getTime())}function d(e,t=u){const r=c(e)?e:new Date(e);return c(r)?new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).format(r):""}function m(e){if(e==null)return"";if(c(e))return d(e,u);if(typeof e=="string"){const r=e.trim();if(!r)return"";if(/^\d{8}$/.test(r))return`${r.slice(0,4)}-${r.slice(4,6)}-${r.slice(6,8)}`;const n=r.match(/^(\d{4}-\d{2}-\d{2})/);if(n)return n[1];const i=r.match(/^(\d{4})\/(\d{2})\/(\d{2})/);return i?`${i[1]}-${i[2]}-${i[3]}`:r}return String(e).trim()||""}function _(e){if(!Array.isArray(e)||e.length!==2)return null;const t=m(e[0]),r=m(e[1]);return!t||!r?null:[t,r]}function f(e){const t={},r=e&&typeof e=="object"?e:{};for(const[n,i]of Object.entries(r))if(i!=null){if(typeof i=="string"){const o=i.trim();if(!o)continue;t[n]=o;continue}if(typeof i=="number"){if(!Number.isFinite(i))continue;t[n]=i;continue}if(c(i)){t[n]=d(i,u);continue}if(Array.isArray(i)){const o=i.map(s=>s==null?s:typeof s=="string"?s.trim():typeof s=="number"?Number.isFinite(s)?s:null:c(s)?d(s,u):s).filter(s=>s!=null&&!(typeof s=="string"&&s===""));if(!o.length)continue;t[n]=o;continue}t[n]=i}return t}function l(e){const t=f(e);if(Object.prototype.hasOwnProperty.call(t,"created_date")){const n=_(t.created_date);delete t.created_date,n&&(t.created_date_start=n[0],t.created_date_end=n[1])}if(Object.prototype.hasOwnProperty.call(t,"first_register_date")){const n=_(t.first_register_date);delete t.first_register_date,n&&(t.first_register_date_start=n[0],t.first_register_date_end=n[1])}const r=[["created_date_start","created_date_end"],["first_register_date_start","first_register_date_end"]];for(const[n,i]of r){const o=Object.prototype.hasOwnProperty.call(t,n)&&String(t[n]??"").trim()!=="",s=Object.prototype.hasOwnProperty.call(t,i)&&String(t[i]??"").trim()!=="";o!==s&&(delete t[n],delete t[i])}return t}function g(e){const t=e&&typeof e=="object"?e:{},r={};return Object.prototype.hasOwnProperty.call(t,"is_paid")&&(t.is_paid===!0||t.is_paid===!1)&&(r.is_paid=t.is_paid),Object.prototype.hasOwnProperty.call(t,"is_rebate")&&(t.is_rebate===!0||t.is_rebate===!1)&&(r.is_rebate=t.is_rebate),r}function y(e={}){const t=l(e);return a.get("/finance/orders",{params:t})}function h(e={}){const t=l(e);return a.get("/finance/orders/summary",{params:t})}function O(e={}){const t=l(e);return a.get("/finance/orders/export",{params:t,responseType:"blob"})}function w(e){const t=p(e);return a.get(`/finance/orders/${t}`)}function F(e,t={}){const r=p(e),n=g(t);if(!Object.keys(n).length)throw new Error("finance api: status patch requires is_paid and/or is_rebate boolean");return a.patch(`/finance/orders/${r}/status`,n)}function j(e){const t=p(e);return a.post(`/finance/orders/${t}/return`)}function P(e={}){const t=f(e);return a.get("/finance/customer-groups",{params:t})}function $(e={}){const t=f(e);return a.get("/finance/channel-groups",{params:t})}function S(e={}){const t=f(e);return a.get("/finance/salespersons",{params:t})}export{P as a,$ as b,S as c,h as d,O as e,w as g,y as l,j as r,F as u};
