import{h as c}from"./http-BzQs6Ld7.js";const f="Asia/Shanghai";function d(e){const t=Number(typeof e=="string"?e.trim():e);if(!Number.isFinite(t))throw new Error("finance api: invalid orderId");if(!Number.isInteger(t))throw new Error("finance api: orderId must be an integer");if(t<=0)throw new Error("finance api: invalid orderId");return t}function o(e){return e instanceof Date&&Number.isFinite(e.getTime())}function u(e,t=f){const r=o(e)?e:new Date(e);return o(r)?new Intl.DateTimeFormat("en-CA",{timeZone:t,year:"numeric",month:"2-digit",day:"2-digit"}).format(r):""}function l(e){if(e==null)return"";if(o(e))return u(e,f);if(typeof e=="string"){const r=e.trim();if(!r)return"";if(/^\d{8}$/.test(r))return`${r.slice(0,4)}-${r.slice(4,6)}-${r.slice(6,8)}`;const n=r.match(/^(\d{4}-\d{2}-\d{2})/);if(n)return n[1];const i=r.match(/^(\d{4})\/(\d{2})\/(\d{2})/);return i?`${i[1]}-${i[2]}-${i[3]}`:r}return String(e).trim()||""}function p(e){if(!Array.isArray(e)||e.length!==2)return null;const t=l(e[0]),r=l(e[1]);return!t||!r?null:[t,r]}function _(e){const t={},r=e&&typeof e=="object"?e:{};for(const[n,i]of Object.entries(r))if(i!=null){if(typeof i=="string"){const s=i.trim();if(!s)continue;t[n]=s;continue}if(typeof i=="number"){if(!Number.isFinite(i))continue;t[n]=i;continue}if(o(i)){t[n]=u(i,f);continue}if(Array.isArray(i)){const s=i.map(a=>a==null?a:typeof a=="string"?a.trim():typeof a=="number"?Number.isFinite(a)?a:null:o(a)?u(a,f):a).filter(a=>a!=null&&!(typeof a=="string"&&a===""));if(!s.length)continue;t[n]=s;continue}t[n]=i}return t}function m(e){const t=_(e);if(Object.prototype.hasOwnProperty.call(t,"created_date")){const n=p(t.created_date);delete t.created_date,n&&(t.created_date_start=n[0],t.created_date_end=n[1])}if(Object.prototype.hasOwnProperty.call(t,"first_register_date")){const n=p(t.first_register_date);delete t.first_register_date,n&&(t.first_register_date_start=n[0],t.first_register_date_end=n[1])}const r=[["created_date_start","created_date_end"],["first_register_date_start","first_register_date_end"]];for(const[n,i]of r){const s=Object.prototype.hasOwnProperty.call(t,n)&&String(t[n]??"").trim()!=="",a=Object.prototype.hasOwnProperty.call(t,i)&&String(t[i]??"").trim()!=="";s!==a&&(delete t[n],delete t[i])}return t}function y(e){const t=e&&typeof e=="object"?e:{},r={};return Object.prototype.hasOwnProperty.call(t,"is_paid")&&(t.is_paid===!0||t.is_paid===!1)&&(r.is_paid=t.is_paid),Object.prototype.hasOwnProperty.call(t,"is_rebate")&&(t.is_rebate===!0||t.is_rebate===!1)&&(r.is_rebate=t.is_rebate),r}function b(e={}){const t=m(e);return c.get("/finance/orders",{params:t})}function h(e={}){const t=m(e);return c.get("/finance/orders/summary",{params:t})}function O(e){const t=d(e);return c.get(`/finance/orders/${t}`)}function w(e,t={}){const r=d(e),n=y(t);if(!Object.keys(n).length)throw new Error("finance api: status patch requires is_paid and/or is_rebate boolean");return c.patch(`/finance/orders/${r}/status`,n)}function F(e){const t=d(e);return c.post(`/finance/orders/${t}/return`)}export{h as a,O as g,b as l,F as r,w as u};
