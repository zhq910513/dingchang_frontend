const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-5GHdhJdf.js","assets/vendor-vue-fFWwKrgY.js","assets/vendor-vue-router-CVyACjsp.js","assets/auth-BqM3s_5E.js","assets/http-DGyH82Tn.js","assets/vendor-axios-C0Zqfgkc.js","assets/vendor-element-plus-CtVxZ4Oy.js","assets/vendor-lodash-rvV0CIkQ.js","assets/vendor-DWCz07M-.js","assets/vendor-dates-DVKSwKij.js","assets/vendor-element-plus-BaI2aKL6.css","assets/vendor-pinia-CMXa-Za0.js","assets/Login-DaUOrb_n.css","assets/Dashboard-6RSaSC-U.js","assets/Dashboard-3mWyFGPQ.css","assets/OrderList-KmLEvIYy.js","assets/OrderListBase-ErcDRqQl.js","assets/orders-DVGDUW2c.js","assets/finance-D7CYzIUW.js","assets/OrderListBase-C6gVU5fD.css","assets/OrderCreate-f6X3Qr_o.js","assets/VehicleCertTable-CH8ovAHD.js","assets/VehicleCertTable-DXj5KQtE.css","assets/fieldFormat-B0eaWt9f.js","assets/bosUpload-Bf8-Xtq-.js","assets/OrderCreate-C-18VuL4.css","assets/OrderDetail-BWinrtps.js","assets/OrderDetail-D4vGsqZe.css","assets/OrderFinished-CXXmp-3T.js","assets/OrderUnfinished-DuOIwGOB.js","assets/OrderImport-BZ4gquHB.js","assets/OrderImport-DlhwT9-M.css","assets/UserList-Ikqgv26A.js","assets/UserList-Bd01ySUu.css","assets/FinanceList-Dlg32kvz.js","assets/CustomerList-DelIPKmY.js","assets/customerChannel-6fIO32tk.js","assets/CustomerList-U3PVFKhe.css","assets/ChannelList-Bsd5qmpC.js","assets/ChannelList-CNaLYgHa.css","assets/AiAssistantWorkbench-VuDPiiPH.js","assets/AiAssistantWorkbench-3lE1mEpR.css"])))=>i.map(i=>d[i]);
import{G as D,ay as w,y as M,aQ as W}from"./vendor-vue-fFWwKrgY.js";import{c as U,a as V}from"./vendor-vue-router-CVyACjsp.js";import{d as k,c as C}from"./vendor-pinia-CMXa-Za0.js";import{i as F,z as K}from"./vendor-element-plus-CtVxZ4Oy.js";import"./vendor-lodash-rvV0CIkQ.js";import"./vendor-DWCz07M-.js";import"./vendor-dates-DVKSwKij.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const j=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r},q={};function B(t,e){const r=w("router-view");return M(),D(r)}const z=j(q,[["render",B]]),G="modulepreload",x=function(t){return"/"+t},O={},a=function(e,r,n){let o=Promise.resolve();if(r&&r.length>0){let S=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");o=S(r.map(l=>{if(l=x(l),l in O)return;O[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":G,d||(m.as="script"),m.crossOrigin="",m.href=l,u&&m.setAttribute("nonce",u),document.head.appendChild(m),d)return new Promise((b,T)=>{m.addEventListener("load",b),m.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})},E="sessionToken",p="roleName",g="userInfo";function _(){try{return typeof window<"u"?window.sessionStorage:null}catch{return null}}function v(t){const e=_();if(!e)return"";const r=e.getItem(t);return typeof r=="string"?r:""}function H(t){return Object.prototype.toString.call(t)==="[object Object]"}function i(t){return t==null?"":String(t).trim()}function N(t){if(!H(t))return null;const e={...t};if("id"in e){const r=Number(e.id);e.id=Number.isFinite(r)?Math.trunc(r):e.id}return"username"in e&&(e.username=i(e.username)),"real_name"in e&&(e.real_name=i(e.real_name)),"full_name"in e&&(e.full_name=i(e.full_name)),"role_name"in e&&(e.role_name=i(e.role_name)),"role_label"in e&&(e.role_label=i(e.role_label)),e}function Y(){const t=_();if(!t)return null;try{const e=t.getItem(g);if(!e)return null;const r=JSON.parse(e);return N(r)}catch{return null}}const R=k("session",{state:()=>({sessionToken:v(E),roleName:v(p),user:Y()}),getters:{isLoggedIn:t=>!!i(t.sessionToken),displayName:t=>i(t.user?.full_name)||i(t.user?.real_name)||i(t.user?.username),roleLabel:t=>i(t.user?.role_label)||i(t.roleName)},actions:{setToken(t){const e=_(),r=i(t);this.sessionToken=r,e&&(r?e.setItem(E,r):e.removeItem(E))},setRoleName(t){const e=_(),r=i(t);this.roleName=r,e&&(r?e.setItem(p,r):e.removeItem(p))},setUser(t){const e=_(),r=N(t);this.user=r;const n=i(r?.role_name);if(n&&(this.roleName=n),!!e)try{r?e.setItem(g,JSON.stringify(r)):e.removeItem(g),n?e.setItem(p,n):this.roleName||e.removeItem(p)}catch{}},clearSession(){const t=_();this.sessionToken="",this.roleName="",this.user=null,t&&(t.removeItem(E),t.removeItem(p),t.removeItem(g))}}}),f={SUPER_ADMIN:"super_admin",MANAGER:"manager",SALES:"sales",FINANCE:"finance",MARKET:"market"},ge=["赣州团队","南昌团队","九江团队"];function P(t){return String(t??"").trim().toLowerCase()}function y(t){const e=P(t);return e===f.MARKET?"/channels":e===f.FINANCE?"/finance":"/orders/all"}function $(){try{const t=R();if(t?.isLoggedIn)return y(t.roleName)}catch{}return"/orders/all"}function J(t,e){const r=P(t),n=String(e||"");if(n==="/"||n==="")return!0;if(n.startsWith("/ai-assistant"))return r===f.SUPER_ADMIN;if(n.startsWith("/users"))return r===f.SUPER_ADMIN||r===f.MANAGER;if(r===f.FINANCE&&n.startsWith("/orders")||r===f.SALES&&n.startsWith("/finance"))return!1;if(r===f.MARKET){if(n.startsWith("/orders/create")||n.startsWith("/orders/import"))return!1;if(n.startsWith("/orders")||n.startsWith("/finance")||n.startsWith("/customers")||n.startsWith("/channels"))return!0;if(n.startsWith("/"))return!1}return!0}const Q=()=>a(()=>import("./Login-5GHdhJdf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])),X=()=>a(()=>import("./Dashboard-6RSaSC-U.js"),__vite__mapDeps([13,2,1,3,4,5,6,7,8,9,10,11,14])),Z=()=>a(()=>import("./OrderList-KmLEvIYy.js"),__vite__mapDeps([15,16,1,2,6,7,8,9,10,17,4,5,18,19,11])),ee=()=>a(()=>import("./OrderCreate-f6X3Qr_o.js"),__vite__mapDeps([20,2,1,6,7,8,9,10,21,22,4,5,17,23,24,11,25])),L=()=>a(()=>import("./OrderDetail-BWinrtps.js"),__vite__mapDeps([26,2,1,6,7,8,9,10,21,22,4,5,17,18,23,24,11,27])),te=()=>a(()=>import("./OrderFinished-CXXmp-3T.js"),__vite__mapDeps([28,16,1,2,6,7,8,9,10,17,4,5,18,19,11])),re=()=>a(()=>import("./OrderUnfinished-DuOIwGOB.js"),__vite__mapDeps([29,16,1,2,6,7,8,9,10,17,4,5,18,19,11])),ne=()=>a(()=>import("./OrderImport-BZ4gquHB.js"),__vite__mapDeps([30,2,1,6,7,8,9,10,4,5,17,21,22,24,11,31])),oe=()=>a(()=>import("./UserList-Ikqgv26A.js"),__vite__mapDeps([32,4,5,6,1,7,8,9,10,2,11,33])),se=()=>a(()=>import("./FinanceList-Dlg32kvz.js"),__vite__mapDeps([34,16,1,2,6,7,8,9,10,17,4,5,18,19,11])),ie=()=>a(()=>import("./CustomerList-DelIPKmY.js"),__vite__mapDeps([35,1,6,7,8,9,10,36,4,5,2,11,37])),ae=()=>a(()=>import("./ChannelList-Bsd5qmpC.js"),__vite__mapDeps([38,1,6,7,8,9,10,36,4,5,2,11,39])),ce=()=>a(()=>import("./AiAssistantWorkbench-VuDPiiPH.js"),__vite__mapDeps([40,1,4,5,6,7,8,9,10,17,24,2,11,41])),le=[{path:"/login",name:"login",component:Q},{path:"/",name:"dashboard",component:X,redirect:()=>$(),children:[{path:"orders",redirect:"/orders/all"},{path:"orders/import",name:"orders-import",component:ne},{path:"orders/all",name:"orders-all",component:Z},{path:"orders/finished",name:"orders-finished",component:te},{path:"orders/unfinished",name:"orders-unfinished",component:re},{path:"orders/create",name:"orders-create",component:ee},{path:"orders/:id",name:"orders-detail",component:L},{path:"ai-assistant",name:"ai-assistant",component:ce},{path:"users",name:"users",component:oe},{path:"finance",name:"finance",component:se,meta:{financeReadOnly:!0}},{path:"finance/orders/:id",name:"finance-order-detail",component:L,meta:{financeReadOnly:!0}},{path:"customers",name:"customers",component:ie},{path:"channels",name:"channels",component:ae}]},{path:"/:pathMatch(.*)*",redirect:"/"}],A=U({history:V("/"),routes:le});A.beforeEach(t=>{let e;try{e=R()}catch{e=null}const r=t.path==="/login",n=!!e?.isLoggedIn;if(!r&&!n)return{path:"/login",query:{redirect:t.fullPath},replace:!0};if(r&&n)return{path:y(e.roleName),replace:!0};if(n){const o=e?.roleName;if(!J(o,t.path))return{path:y(o),query:{noauth:"1",from:t.fullPath},replace:!0}}return!0});const I=W(z),ue=C();I.use(ue);I.use(A);I.use(F,{locale:K});A.isReady().then(()=>{I.mount("#app")});export{f as R,ge as T,j as _,R as u};
