import{h as o}from"./http-BzQs6Ld7.js";const d="Asia/Shanghai";function _(r){const e=Number(typeof r=="string"?r.trim():r);if(!Number.isFinite(e))throw new Error("finance api: invalid orderId");if(!Number.isInteger(e))throw new Error("finance api: orderId must be an integer");if(e<=0)throw new Error("finance api: invalid orderId");return e}function f(r){return r instanceof Date&&Number.isFinite(r.getTime())}function l(r,e=d){const i=f(r)?r:new Date(r);return f(i)?new Intl.DateTimeFormat("en-CA",{timeZone:e,year:"numeric",month:"2-digit",day:"2-digit"}).format(i):""}function s(r){if(r==null)return"";if(f(r))return l(r,d);if(typeof r=="string"){const e=r.trim();if(!e)return"";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const i=e.match(/^(\d{4}-\d{2}-\d{2})/);if(i)return i[1];const t=e.match(/^(\d{4})\/(\d{2})\/(\d{2})$/);return t?`${t[1]}-${t[2]}-${t[3]}`:""}return""}function g(r){if(!Array.isArray(r)||r.length!==2)return null;const e=s(r[0]),i=s(r[1]);return!e||!i?null:[e,i]}function b(r){const e={},i=r&&typeof r=="object"?r:{};for(const[t,n]of Object.entries(i))if(n!=null){if(typeof n=="string"){const c=n.trim();if(!c)continue;e[t]=c;continue}if(typeof n=="number"){if(!Number.isFinite(n))continue;e[t]=n;continue}if(typeof n=="boolean"){e[t]=n;continue}if(f(n)){e[t]=l(n,d);continue}if(Array.isArray(n)){const c=n.map(a=>{if(a==null)return null;if(typeof a=="string"){const u=a.trim();return u||null}return typeof a=="number"?Number.isFinite(a)?a:null:typeof a=="boolean"?a:f(a)?l(a,d):a}).filter(a=>a!=null);if(!c.length)continue;e[t]=c;continue}e[t]=n}return e}function y(r){if(r==null)return"";if(Array.isArray(r)){const e=r.map(t=>t==null?"":String(t).trim()).filter(Boolean),i=Array.from(new Set(e));return i.length?i.join(","):""}if(typeof r=="string"){const e=r.trim();if(!e)return"";const i=e.split(",").map(n=>String(n||"").trim()).filter(Boolean),t=Array.from(new Set(i));return t.length?t.join(","):""}return""}function p(r){const e=b(r);if(!Object.prototype.hasOwnProperty.call(e,"team_names")&&Object.prototype.hasOwnProperty.call(e,"team_name")){const t=y(e.team_name);t&&(e.team_names=t),delete e.team_name}if(Object.prototype.hasOwnProperty.call(e,"team_names")){const t=y(e.team_names);t?e.team_names=t:delete e.team_names}if(Object.prototype.hasOwnProperty.call(e,"created_date")){const t=g(e.created_date);if(t)delete e.created_date,e.created_date_start=t[0],e.created_date_end=t[1];else if(Array.isArray(e.created_date))delete e.created_date;else if(typeof e.created_date=="string"){const n=s(e.created_date);n?e.created_date=n:delete e.created_date}else f(e.created_date)&&(e.created_date=l(e.created_date,d))}if(Object.prototype.hasOwnProperty.call(e,"first_register_date")){const t=g(e.first_register_date);if(t)delete e.first_register_date,e.first_register_date_start=t[0],e.first_register_date_end=t[1];else if(Array.isArray(e.first_register_date))delete e.first_register_date;else if(typeof e.first_register_date=="string"){const n=s(e.first_register_date);n?e.first_register_date=n:delete e.first_register_date}else f(e.first_register_date)&&(e.first_register_date=l(e.first_register_date,d))}const i=[["created_date_start","created_date_end"],["first_register_date_start","first_register_date_end"]];for(const[t,n]of i){const c=Object.prototype.hasOwnProperty.call(e,t)&&String(e[t]??"").trim()!=="",a=Object.prototype.hasOwnProperty.call(e,n)&&String(e[n]??"").trim()!=="";if(c!==a)delete e[t],delete e[n];else if(c&&a){const u=s(e[t]),m=s(e[n]);!u||!m?(delete e[t],delete e[n]):(e[t]=u,e[n]=m)}}if(Object.prototype.hasOwnProperty.call(e,"created_date")&&typeof e.created_date=="string"){const t=s(e.created_date);t?e.created_date=t:delete e.created_date}if(Object.prototype.hasOwnProperty.call(e,"first_register_date")&&typeof e.first_register_date=="string"){const t=s(e.first_register_date);t?e.first_register_date=t:delete e.first_register_date}if(Object.prototype.hasOwnProperty.call(e,"insurance_expire_date")&&typeof e.insurance_expire_date=="string"){const t=s(e.insurance_expire_date);t?e.insurance_expire_date=t:delete e.insurance_expire_date}return e}function h(r){const e=r&&typeof r=="object"?r:{},i={};return Object.prototype.hasOwnProperty.call(e,"is_paid")&&(e.is_paid===!0||e.is_paid===!1)&&(i.is_paid=e.is_paid),Object.prototype.hasOwnProperty.call(e,"is_rebate")&&(e.is_rebate===!0||e.is_rebate===!1)&&(i.is_rebate=e.is_rebate),i}function w(r={}){const e=p(r);return o.get("/finance/orders",{params:e})}function j(r={}){const e=p(r);return delete e.page,delete e.page_size,o.get("/finance/orders/summary",{params:e})}function P(r={}){const e=p(r);return delete e.page,delete e.page_size,delete e.ids,delete e.id,o.get("/finance/orders/export",{params:e,responseType:"blob"})}function A(r){const e=_(r);return o.get(`/finance/orders/${e}`)}function F(r,e={}){const i=_(r),t=h(e);if(!Object.keys(t).length)throw new Error("finance api: status patch requires is_paid and/or is_rebate boolean");return o.patch(`/finance/orders/${i}/status`,t)}function S(r){const e=_(r);return o.post(`/finance/orders/${e}/return`)}function $(){return o.get("/finance/customer-groups")}function z(){return o.get("/finance/channel-groups")}function N(){return o.get("/finance/salespersons")}export{$ as a,z as b,N as c,j as d,P as e,A as g,w as l,S as r,F as u};
