import{h as u}from"./http-DGyH82Tn.js";const m=/^1[3-9]\d{9}$/,p=/^(0\d{2,3}-?)?\d{7,8}(-\d{1,6})?$/,d=/^(400|800)\d{7}$/;function r(e){return String(e??"").trim()}function l(e){return String(e??"").replace(/\s+/g,"").replace(/[^0-9-]/g,"")}function _(e){return String(e??"").trim().toLowerCase()==="tel"?"tel":"mobile"}function k(e){const t=_(e?.type),n=l(e?.value);if(!n)return{ok:!1,msg:"联系方式不能为空"};if(t==="mobile"){const c=n.replace(/-/g,"");return m.test(c)?{ok:!0,type:"mobile",value:c}:{ok:!1,msg:"手机号格式不正确（需 11 位大陆手机号）"}}const o=n.replace(/-/g,"");return d.test(o)?{ok:!0,type:"tel",value:o}:p.test(n)?{ok:!0,type:"tel",value:n}:{ok:!1,msg:"座机格式不正确（示例：010-88888888 / 0571-8888888 / 010-88888888-123 / 400xxxxxxx）"}}function f(e){const t=Array.isArray(e)?e:[],n=[],o=new Set;for(const c of t){const s=k(c);if(!s.ok)return{ok:!1,msg:s.msg};const a=`${s.type}:${s.value}`;o.has(a)||(o.add(a),n.push({type:s.type,value:s.value}))}return{ok:!0,contacts:n}}function h(e){const t=r(e);if(!t)return{ok:!0,contacts:[]};const o=t.split(/[\n\r,，;；]+/g).map(c=>r(c)).filter(Boolean).map(c=>{const s=l(c),a=s.replace(/-/g,"");return{type:m.test(a)?"mobile":"tel",value:s}});return f(o)}function i(e){return Array.isArray(e)?f(e):typeof e=="string"?h(e):e==null?{ok:!0,contacts:[]}:{ok:!1,msg:"contacts 格式不正确"}}function g(e){const t=e&&typeof e=="object"?{...e}:{};return delete t.team_name,delete t.teamName,delete t.team_names,delete t.teamNames,delete t.team_id,delete t.teamId,delete t.team_ids,delete t.teamIds,t}function x(e={}){return u.get("/channel-groups",{params:g(e)})}function v(e={}){return u.get("/customer-groups",{params:g(e)})}function $(e={}){const t=i(e.contacts);return t.ok?u.post("/channel-groups",{channel_code:r(e.channel_code),channel_name:r(e.channel_name),region:r(e.region),contacts:t.contacts}):Promise.reject(new Error(t.msg||"联系方式不合法"))}function w(e={}){const t=i(e.contacts);if(!t.ok)return Promise.reject(new Error(t.msg||"联系方式不合法"));const n=r(e.market);return u.post("/customer-groups",{customer_code:r(e.customer_code),customer_name:r(e.customer_name),market:n||null,region:r(e.region),contacts:t.contacts})}function G(e,t={}){const n=i(t.contacts);return n.ok?u.put(`/channel-groups/${e}`,{channel_code:r(t.channel_code),channel_name:r(t.channel_name),region:r(t.region),contacts:n.contacts}):Promise.reject(new Error(n.msg||"联系方式不合法"))}function S(e,t={}){const n=i(t.contacts);if(!n.ok)return Promise.reject(new Error(n.msg||"联系方式不合法"));const o=r(t.market);return u.put(`/customer-groups/${e}`,{customer_code:r(t.customer_code),customer_name:r(t.customer_name),market:o||null,region:r(t.region),contacts:n.contacts})}function b(e){return u.delete(`/channel-groups/${e}`)}function z(e){return u.delete(`/customer-groups/${e}`)}export{x as a,G as b,w as c,z as d,$ as e,b as f,v as l,S as u};
