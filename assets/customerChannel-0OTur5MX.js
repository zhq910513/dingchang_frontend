import{h as c}from"./http-CBIyYC5i.js";const i=/^1[3-9]\d{9}$/,f=/^(0\d{2,3}-?)?\d{7,8}(-\d{1,6})?$/,p=/^(400|800)\d{7}$/;function m(e){return String(e??"").replace(/\s+/g,"").replace(/[^0-9\-]/g,"")}function d(e){return String(e??"").trim().toLowerCase()==="tel"?"tel":"mobile"}function _(e){const t=d(e?.type),n=m(e?.value??"");if(!n)return{ok:!1,msg:"联系方式不能为空"};if(t==="mobile"){const s=n.replace(/-/g,"");return i.test(s)?{ok:!0,value:s,type:"mobile"}:{ok:!1,msg:"手机号格式不正确（需 11 位大陆手机号）"}}const r=n.replace(/-/g,"");return p.test(r)?{ok:!0,value:r,type:"tel"}:f.test(n)?{ok:!0,value:n,type:"tel"}:{ok:!1,msg:"座机格式不正确（示例：010-88888888 / 0571-8888888 / 010-88888888-123 / 400xxxxxxx）"}}function l(e){const t=Array.isArray(e)?e:[],n=[],r=new Set;for(const s of t){const o=_(s);if(!o.ok)return{ok:!1,msg:o.msg};const u=`${o.type}:${o.value}`;r.has(u)||(r.add(u),n.push({type:o.type,value:o.value}))}return{ok:!0,contacts:n}}function k(e){const t=String(e||"").trim();if(!t)return{ok:!0,contacts:[]};const r=t.split(/[\n\r,，;；]+/g).map(s=>String(s||"").trim()).filter(Boolean).map(s=>{const o=m(s),u=o.replace(/-/g,"");return{type:i.test(u)?"mobile":"tel",value:o}});return l(r)}function a(e){return Array.isArray(e)?l(e):typeof e=="string"?k(e):{ok:!0,contacts:[]}}function g(e){const t=e&&typeof e=="object"?{...e}:{};return delete t.team_name,delete t.teamName,delete t.team_names,delete t.teamNames,delete t.team_id,delete t.teamId,delete t.team_ids,delete t.teamIds,t}function E(e={}){return c.get("/channel-groups",{params:g(e)})}function S(e={}){return c.get("/customer-groups",{params:g(e)})}function v(e={}){const t=a(e.contacts);return t.ok?c.post("/channel-groups",{channel_code:e.channel_code,channel_name:e.channel_name,region:e.region,contacts:t.contacts}):Promise.reject(new Error(t.msg||"联系方式不合法"))}function x(e={}){const t=String(e.market??"").trim(),n=a(e.contacts);return n.ok?c.post("/customer-groups",{customer_code:e.customer_code,customer_name:e.customer_name,market:t||null,region:e.region,contacts:n.contacts}):Promise.reject(new Error(n.msg||"联系方式不合法"))}function $(e,t={}){const n=a(t.contacts);return n.ok?c.put(`/channel-groups/${e}`,{channel_code:t.channel_code,channel_name:t.channel_name,region:t.region,contacts:n.contacts}):Promise.reject(new Error(n.msg||"联系方式不合法"))}function w(e,t={}){const n=String(t.market??"").trim(),r=a(t.contacts);return r.ok?c.put(`/customer-groups/${e}`,{customer_code:t.customer_code,customer_name:t.customer_name,market:n||null,region:t.region,contacts:r.contacts}):Promise.reject(new Error(r.msg||"联系方式不合法"))}function G(e){return c.delete(`/channel-groups/${e}`)}function b(e){return c.delete(`/customer-groups/${e}`)}export{E as a,$ as b,x as c,b as d,v as e,G as f,S as l,w as u};
