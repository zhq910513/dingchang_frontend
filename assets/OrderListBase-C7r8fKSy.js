import{c as U,r as k,o as mn,q as fn,x as g,y as f,z as ae,P as a,M as m,H as o,ay as S,O as T,ac as J,ap as Y,J as F,L as d,X as le,I as pn,aI as vn,G as N,u as nt}from"./vendor-vue-fFWwKrgY.js";import{u as hn,b as bn}from"./vendor-vue-router-CVyACjsp.js";import{f as at,E as y,d as oe}from"./vendor-element-plus-CtVxZ4Oy.js";import{h as ee}from"./http-BzQs6Ld7.js";import{l as gn,d as yn,e as wn,b as kn}from"./orders-_KolJW8S.js";import{l as Sn,a as Nn,r as xn,u as lt}from"./finance-cnjpOCyK.js";import{_ as Vn,u as Cn,R as x}from"./index-D7mGc0SC.js";const An={class:"page"},Rn={class:"page-header"},Fn={class:"finance-actions"},Mn={key:0,class:"selected-hint"},Bn={class:"table-scroll"},Un={key:0,class:"switch-cell"},En={key:1},In={key:0,class:"switch-cell"},On={key:1},Pn={key:0},Tn={key:1,class:"actions"},$n={key:2,class:"actions"},Dn={class:"pagination-wrapper"},Ln={__name:"OrderListBase",props:{title:{type:String,default:"订单列表"},mode:{type:String,default:"all"},source:{type:String,default:"orders"}},setup(Ie){const Oe=Ie,Pe=bn(),Te=hn(),j=Cn(),ot=U(()=>{const t=Number(j?.user?.id??0);return Number.isFinite(t)?Math.trunc(t):0}),c=U(()=>String(Te?.path||"").startsWith("/finance")),rt=U(()=>!c.value),Z=U(()=>String(j.roleName||"").trim().toLowerCase()),be=U(()=>Z.value===x.SALES),$e=U(()=>{const t=Z.value;return t===x.SUPER_ADMIN||t===x.MANAGER||t===x.FINANCE||t===x.MARKET}),H=U(()=>{if(!c.value)return!1;const t=Z.value;return t===x.FINANCE||t===x.SUPER_ADMIN||t===x.MANAGER}),ge=U(()=>{if(!c.value)return!1;const t=Z.value;return t===x.FINANCE||t===x.SUPER_ADMIN||t===x.MANAGER}),E=k(!1),te=k(!1),ye=k([]),we=k(0),W=k(1),ke=k(20),Se=k([]),Ne=k([]),$=k([]),I=k(!1),re=k(!1),X=k([]),ie=k(!1),De=k(null),Q=k([]),K=k(null),ne=k("");function _(t){return!!t?._is_summary}function it(t){return!_(t)}function ut({row:t}){return _(t)?"row-summary":""}function st(t){const e=Array.isArray(t)?t:[];Q.value=e.filter(l=>!_(l))}function ct(){Q.value=[];try{De.value?.clearSelection?.()}catch{}}function Le(){return{owner_name:"",id_number:"",vin:"",engine_no:"",plate_no:"",vehicle_model:"",remark:"",customer_group_id:null,channel_group_id:null,salesperson_id:null,team_name:null,created_date:[]}}function ze(){return{created_date:[],channel_group_id:null,customer_group_id:null,market:"",owner_name:"",insurance_expire_date:"",first_register_date:[],is_paid:null,is_rebate:null,team_name:null}}const u=k(c.value?ze():Le());function R(t,e){const l=t?.dynamic_data;return l&&typeof l=="object"?l[e]:void 0}function G(t){return String(t??"").trim()}function ue(t){const e=G(t?.channel_code||t?.customer_code||t?.group_code||t?.code||""),l=G(t?.channel_name||t?.customer_name||t?.group_name||t?.name||""),r=t?.id!=null?String(t.id):"";return e&&l?`${e} - ${l}`:l||e||r||"-"}function b(t){if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function A(t){const e=b(t);return e===null?"-":e.toFixed(2)}function dt(t){return b(t)===null?"-":String(t)}function Ye(t){if(t==null||t==="")return"-";const e=String(t).trim();if(!e)return"-";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const l=e.match(/^(\d{4}-\d{2}-\d{2})/);if(l&&l[1])return l[1];if(/^\d+$/.test(e)){const r=Number(e);if(Number.isFinite(r)){const i=e.length===10?r*1e3:r,p=new Date(i);if(Number.isFinite(p.getTime())){const h=new Intl.DateTimeFormat("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(p),V=h.find(B=>B.type==="year")?.value||"",C=h.find(B=>B.type==="month")?.value||"",w=h.find(B=>B.type==="day")?.value||"";if(V&&C&&w)return`${V}-${C}-${w}`}}return"-"}return"-"}function je(t){if(t==null||t==="")return"";const e=String(t).trim();if(!e)return"";if(/^\d{8}$/.test(e))return`${e.slice(0,4)}-${e.slice(4,6)}-${e.slice(6,8)}`;const l=e.match(/^(\d{4}-\d{2}-\d{2})/);if(l&&l[1])return l[1];const r=Ye(e);return r==="-"?"":r}function O(t){const e=t?.order_info;return e&&typeof e=="object"?e:null}const _t=U(()=>{const t=new Map,e=Array.isArray($.value)?$.value:[];for(const l of e){const r=Number(l?.id);!Number.isFinite(r)||r<=0||t.set(r,l)}return t});function xe(t){const e=Number(t?.salesperson_id);return!Number.isFinite(e)||e<=0?null:_t.value.get(e)||null}function Ge(t){const e=Array.isArray(t)?t:t?[t]:[],l=[...new Set(e.map(r=>String(r||"").trim()).filter(Boolean))];return l.length?l.join("、"):""}function se(t){const e=t?.data??t??{};return Array.isArray(e?.items)?e.items:[]}function mt(t){const e=t?.data??t??{},l=Array.isArray(e?.items)?e.items:[],r=[];for(const i of l){const p=String(i?.team_name??"").trim();p&&r.push(p)}return Array.from(new Set(r)).sort((i,p)=>String(i).localeCompare(String(p),"zh-CN"))}async function ft(){return ee.get("/orders/teams")}async function pt(t={}){return ee.get("/orders/salespersons",{params:t})}async function vt(t={}){return ee.get("/finance/salespersons",{params:t})}async function ht(){return c.value?ee.get("/finance/customer-groups"):yn()}async function bt(){return c.value?ee.get("/finance/channel-groups"):wn()}async function Ve(t){re.value=!0;try{if(c.value){const r=await vt({status:1});$.value=se(r);return}const e=String(t||"").trim(),l=await pt(e?{team_name:e}:{});$.value=se(l)}catch(e){console.error(e),$.value=[]}finally{re.value=!1}}const gt=U(()=>Array.isArray($.value)?$.value:[]);function Ke(){const t=[j?.userId,j?.user_id,j?.id,j?.user?.id,j?.user?.user_id,j?.user?.uid];for(const e of t){const l=Number(e);if(Number.isFinite(l)&&l>0)return l}return null}function qe(){if(c.value||!be.value)return;const t=Ke();t&&(u.value.salesperson_id=t),!u.value.team_name&&Array.isArray(X.value)&&X.value.length===1&&(u.value.team_name=X.value[0])}mn(()=>u.value?.team_name,async t=>{if(c.value)return;const e=u.value?.salesperson_id;if(!be.value)u.value.salesperson_id=null;else{const l=Ke();l&&(u.value.salesperson_id=l)}await Ve(t),!be.value&&e&&(Array.isArray($.value)?$.value:[]).some(r=>Number(r?.id)===Number(e))&&(u.value.salesperson_id=e)});async function yt(){I.value=!0;const t=[ht(),bt(),ft()],e=await Promise.allSettled(t),l=e[0];Se.value=l?.status==="fulfilled"?se(l.value):[],l?.status!=="fulfilled"&&console.error(l?.reason);const r=e[1];Ne.value=r?.status==="fulfilled"?se(r.value):[],r?.status!=="fulfilled"&&console.error(r?.reason);const i=e[2];X.value=i?.status==="fulfilled"?mt(i.value):[],i?.status!=="fulfilled"&&console.error(i?.reason),I.value=!1,qe(),await Ve(u.value?.team_name)}async function wt(){if(!c.value)return;const t=tt(),e=sn(t);if(!(e&&e===ne.value&&K.value))try{const l=await Nn(t),r=l?.data??l??{};K.value=r&&typeof r=="object"?r:null,ne.value=e||""}catch(l){console.error(l),K.value=null,ne.value=e||""}}async function D(){E.value=!0;try{const t=c.value?await Sn(Ee()):await gn(Ee()),e=t?.data??t??{};ye.value=Array.isArray(e?.items)?e.items:[],we.value=Number(e?.total??0),ct(),c.value&&await wt()}catch(t){console.error(t),y.error(c.value?"加载财务列表失败":"加载订单列表失败")}finally{E.value=!1}}function M(){W.value=1,K.value=null,ne.value="",D()}function Je(){u.value=c.value?ze():Le(),qe(),W.value=1,K.value=null,ne.value="",D(),Ve(u.value?.team_name)}function kt(t){W.value=t,D()}function St(t){ke.value=t,W.value=1,D()}function ce(t){const e=Te.fullPath;c.value?Pe.push(`/finance/orders/${t}?from=${encodeURIComponent(e)}&source=finance`):Pe.push(`/orders/${t}?from=${encodeURIComponent(e)}`)}function Nt(t){const e=ot.value;if(!e)return!0;const l=Number(t?.salesperson_id??0);return!Number.isFinite(l)||l<=0?!0:Math.trunc(l)===e}function Ze(t){if(c.value||!t||_(t)||Ae(t))return!1;const e=Z.value;return e===x.MARKET||e===x.FINANCE?!1:e===x.SALES?Nt(t):e===x.SUPER_ADMIN||e===x.MANAGER}function He(t){if(c.value||!t||_(t)||!Ae(t))return!1;const e=Z.value;return e===x.SUPER_ADMIN||e===x.MANAGER}async function xt(t,e){const l=!!e,r=l?"确认标记完成":"确认退回未完成",i=l?"确认将该订单标记为【已完成】？":"确认将该订单退回【未完成】？";try{await oe.confirm(i,r,{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return!1}return!0}async function We(t,e){if(!t?.id)return;const l=!!e,r=!!t?.is_finished;if(!(r===l||!await xt(t,l))){t._saving_finished=!0,t.is_finished=l;try{await kn(t.id,{is_finished:l}),y.success(l?"已标记完成":"已退回未完成"),await D()}catch(p){console.error(p),t.is_finished=r,y.error("操作失败")}finally{t._saving_finished=!1}}}async function Vt(t,e){if(!(!e||_(e))){if(t==="detail"){ce(e.id);return}if(t==="markFinished"){if(!Ze(e)){y.error("无权限操作");return}await We(e,!0);return}if(t==="reopen"){if(!He(e)){y.error("无权限操作");return}await We(e,!1)}}}async function Ct(){try{await oe.alert("退回前请先将【回款】和【返点】都调整为“否”。","无法退回",{type:"warning",center:!0,confirmButtonText:"我知道了"})}catch{}}async function At(t){if(!(!c.value||!t?.id)&&!_(t)){if(!H.value){y.error("无权限操作");return}if(Re(t)||Fe(t)){await Ct();return}try{await oe.confirm("确认将该订单退回【未完成】？","确认退回",{confirmButtonText:"确认退回",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}try{await xn(t.id),y.success("已退回未完成"),await D()}catch(e){console.error(e),y.error("操作失败")}}}async function Rt(t,e){if(!(!e||_(e))){if(t==="detail"){ce(e.id);return}t==="return"&&await At(e)}}async function Ft(t,e){if(!c.value||!t?.id||_(t)||!H.value)return;const l=Re(t),r=!!e;if(l!==r){try{await oe.confirm(`确认将该订单【回款】改为【${r?"是":"否"}】？`,"确认操作",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}t._saving_paid=!0,Xe(t,r);try{await lt(t.id,{is_paid:r}),y.success("已更新回款状态")}catch(i){console.error(i),Xe(t,l),y.error("操作失败")}finally{t._saving_paid=!1}}}async function Mt(t,e){if(!c.value||!t?.id||_(t)||!H.value)return;const l=Fe(t),r=!!e;if(l!==r){try{await oe.confirm(`确认将该订单【返点】改为【${r?"是":"否"}】？`,"确认操作",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning",center:!0})}catch{return}t._saving_rebate=!0,Qe(t,r);try{await lt(t.id,{is_rebate:r}),y.success("已更新返点状态")}catch(i){console.error(i),Qe(t,l),y.error("操作失败")}finally{t._saving_rebate=!1}}}function Bt(){const t=new Intl.DateTimeFormat("zh-CN",{timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit"}).formatToParts(new Date),e=t.find(i=>i.type==="year")?.value||"0000",l=t.find(i=>i.type==="month")?.value||"00",r=t.find(i=>i.type==="day")?.value||"00";return`${e}-${l}-${r}`}function Ut(t){const e=String(t||"");if(!e)return"";const l=e.match(/filename\*\s*=\s*([^;]+)/i);if(l&&l[1]){const i=l[1].trim(),p=i.indexOf("''");if(p>=0){const h=i.slice(p+2).trim();try{return decodeURIComponent(h)}catch{return h}}return i.replace(/^["']|["']$/g,"")}const r=e.match(/filename\s*=\s*([^;]+)/i);return r&&r[1]?r[1].trim().replace(/^["']|["']$/g,""):""}function Et(t,e){const l=URL.createObjectURL(t),r=document.createElement("a");r.href=l,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>{try{URL.revokeObjectURL(l)}catch{}},1200)}function Ce(t,e,l){if(!e||l==null)return;const r=String(l).trim();r&&t.append(e,r)}async function It(){if(c.value){if(!ge.value){y.error("无权限下载");return}if(!te.value){te.value=!0;try{const t=tt(),e=(Array.isArray(Q.value)?Q.value:[]).filter(v=>!_(v)).map(v=>Number(v?.id)).filter(v=>Number.isFinite(v)&&v>0),l=new URLSearchParams;if(e.length)for(const v of e)l.append("ids",String(v));for(const[v,s]of Object.entries(t||{})){if(v==="owner_name"){s!=null&&String(s).trim()&&Ce(l,"owner",s);continue}if(!(v==="page"||v==="page_size")){if(s===!0||s===!1){l.append(v,s?"true":"false");continue}if(Array.isArray(s)){for(const L of s)Ce(l,v,L);continue}Ce(l,v,s)}}const r=`/finance/orders/export?${l.toString()}`,i=await ee.get(r,{responseType:"blob",validateStatus:v=>v>=200&&v<500}),p=Number(i?.status||0),h=i?.headers||{},V=String(h["content-type"]||h["Content-Type"]||"").toLowerCase();if(p>=400){try{const v=await new Response(i.data).text();let s="";try{const L=JSON.parse(v);s=String(L?.detail||L?.message||v||"导出失败")}catch{s=v||"导出失败"}y.error(s)}catch{y.error("导出失败")}return}if(V.includes("application/json")){try{const v=await new Response(i.data).text();y.error(v||"导出失败")}catch{y.error("导出失败")}return}const C=h["content-disposition"]||h["Content-Disposition"]||"",w=Ut(C)||`财务管理_订单_${Bt()}.xls`,B=i.data instanceof Blob?i.data:new Blob([i.data],{type:V||"application/octet-stream"});Et(B,w),y.success(e.length?"已下载勾选数据":"已下载全部符合条件数据")}catch(t){console.error(t),y.error("下载失败")}finally{te.value=!1}}}}const Ot={commercial_amount:"col_14_commercial_amount",compulsory_amount:"col_15_compulsory_amount",vehicle_tax_amount:"col_16_tax_amount",noncar_amount:"col_17_noncar_amount",receivable:"col_26_receivable",payable:"col_27_payable",profit:"col_28_profit"},Pt={channel_commercial_point:"col_18_ch_commercial_point",channel_compulsory_point:"col_19_ch_compulsory_point",channel_vehicle_tax_point:"col_20_ch_tax_point",channel_noncar_point:"col_21_ch_noncar_point",customer_commercial_point:"col_22_cu_commercial_point",customer_compulsory_point:"col_23_cu_compulsory_point",customer_vehicle_tax_point:"col_24_cu_tax_point",customer_noncar_point:"col_25_cu_noncar_point"},Tt={commercial_amount:"commercial_amount",compulsory_amount:"compulsory_amount",vehicle_tax_amount:"vehicle_tax_amount",noncar_amount:"non_vehicle_amount"},$t={channel_commercial_point:"channel_commercial_point",channel_commercial_supplement_point:"channel_commercial_supplement_point",channel_compulsory_point:"channel_compulsory_point",channel_vehicle_tax_point:"channel_vehicle_tax_point",channel_noncar_point:"channel_non_vehicle_point",customer_commercial_point:"customer_commercial_point",customer_commercial_supplement_point:"customer_commercial_supplement_point",customer_compulsory_point:"customer_compulsory_point",customer_vehicle_tax_point:"customer_vehicle_tax_point",customer_noncar_point:"customer_non_vehicle_point"};function Dt(t){return c.value?t?.col_01_date||t?.created_at||t?.updated_at||null:t?.created_at||t?.updated_at||null}function Ae(t){return!!t?.is_finished}function Lt(t){return String(c.value?t?.col_02_channel||"":t?.channel_group_name||"").trim()||"-"}function zt(t){return String(c.value?t?.col_03_customer||"":t?.customer_group_name||"").trim()||"-"}function Yt(t){const e=c.value?t?.col_04_market:t?.customer_group_market;return String(e??"").trim()||"-"}function jt(t){const e=String(t?.salesperson_name??"").trim();if(e)return e;const l=xe(t);return l?String(l.real_name||l.username||"-"):"-"}function Gt(t){const e=c.value?t?.col_05_owner:R(t,"id_name");return String(e??"").trim()||"-"}function Kt(t){const e=c.value?t?.col_06_plate_no:R(t,"dl_plate_no")||R(t,"plate_no");return String(e??"").trim()||"-"}function qt(t){const e=c.value?t?.col_07_insurance_expire_date:O(t)?.insurance_expire_date;return je(e)||"-"}function Jt(t){const e=c.value?t?.col_08_vin:R(t,"vin")||R(t,"dl_vin");return String(e??"").trim()||"-"}function Zt(t){const e=c.value?t?.col_09_engine_no:R(t,"engine_no")||R(t,"dl_engine_no");return String(e??"").trim()||"-"}function Ht(t){const e=c.value?t?.col_10_vehicle_model:R(t,"vehicle_model")||R(t,"dl_vehicle_model");return String(e??"").trim()||"-"}function Wt(t){const e=c.value?t?.col_11_first_register_date:R(t,"dl_register_date")||R(t,"register_date")||R(t,"first_register_date");return je(e)||"-"}function Xt(t){const e=c.value?t?.col_12_id_number:R(t,"id_number");return String(e??"").trim()||"-"}function Qt(t){const e=c.value?t?.col_13_owner_phone:O(t)?.owner_phone;return String(e??"").trim()||"-"}function en(t){const e=String(t?.manager_name??"").trim();if(e)return e;const l=xe(t);return String(l?.manager_name??l?.parent_name??"").trim()||"-"}function tn(t){const e=Ge(t?.team_names);if(e)return e;const l=String(t?.team_name??"").trim();if(l)return l;const r=xe(t),i=Ge(r?.team_names);return i||String(r?.team_name??"").trim()||"-"}function Re(t){return c.value?!!t?.col_29_is_paid:!!t?.is_paid}function Fe(t){return c.value?!!t?.col_30_is_rebate:!!t?.is_rebate}function Xe(t,e){!t||typeof t!="object"||(c.value&&(t.col_29_is_paid=!!e),t.is_paid=!!e)}function Qe(t,e){!t||typeof t!="object"||(c.value&&(t.col_30_is_rebate=!!e),t.is_rebate=!!e)}function de(t,e){if(c.value)return t?.[Ot[e]||e];const l=O(t),r=Tt[e]||e;return l?l[r]:null}function nn(t,e){if(c.value)return t?.[Pt[e]||e];const l=O(t),r=$t[e]||e;return l?l[r]:null}function _e(t,e){return A(de(t,e))}function P(t,e){return dt(nn(t,e))}function an(t,e){const l=String(e||"").trim();if(!l)return null;if(c.value)return l==="channel_reward"?t?.col_31_channel_reward??t?.channel_reward??t?.channel_bonus??null:l==="customer_reward"?t?.col_32_customer_reward??t?.customer_reward??t?.customer_bonus??null:t?.[l]??null;const r=O(t);return r?r?.[l]??null:null}function et(t,e){return A(an(t,e))}function Me(t){if(c.value)return!1;const e=O(t);if(!e)return!1;const l=b(e.channel_commercial_supplement_point)||0,r=b(e.customer_commercial_supplement_point)||0;return Math.abs(l)>1e-9||Math.abs(r)>1e-9}function Be(t){const e=O(t)||{},l=b(e.commercial_amount)||0,r=b(e.compulsory_amount)||0,i=b(e.vehicle_tax_amount)||0,p=b(e.non_vehicle_amount)||0,h=b(e.channel_commercial_point)||0,V=b(e.channel_commercial_supplement_point)||0,C=b(e.channel_compulsory_point)||0,w=b(e.channel_vehicle_tax_point)||0,B=b(e.channel_non_vehicle_point)||0,v=b(e.channel_reward)||0,s=b(e.customer_commercial_point)||0,L=b(e.customer_commercial_supplement_point)||0,me=b(e.customer_compulsory_point)||0,q=b(e.customer_vehicle_tax_point)||0,fe=b(e.customer_non_vehicle_point)||0,pe=b(e.customer_reward)||0,ve=l*(h/100)+l*(V/100)+r*(C/100)+i*(w/100)+p*(B/100)+v,he=l*(s/100)+l*(L/100)+r*(me/100)+i*(q/100)+p*(fe/100)+pe;return{channel_total:ve,customer_total:he,profit:ve-he}}function ln(t){if(c.value)return A(de(t,"receivable"));const e=O(t);return e?Me(t)?A(Be(t).channel_total):A(e.channel_total):A(0)}function on(t){if(c.value)return A(de(t,"payable"));const e=O(t);return e?Me(t)?A(Be(t).customer_total):A(e.customer_total):A(0)}function rn(t){if(c.value)return A(de(t,"profit"));const e=O(t);return e?Me(t)?A(Be(t).profit):A(e.profit):A(0)}function un(t){if(!Array.isArray(t))return null;const e=G(t[0]),l=G(t[1]);return!e&&!l?null:{start:e||"",end:l||""}}function Ue(t,e,l){const r=un(l);if(!r)return;const i={start:G(r.start),end:G(r.end)};i.start&&!i.end&&(i.end=i.start),i.end&&!i.start&&(i.start=i.end),!(!i.start||!i.end)&&(t[`${e}_start`]=i.start,t[`${e}_end`]=i.end)}function Ee(){const t={page:W.value,page_size:ke.value},e=u.value||{};if(e.team_name&&(t.team_name=String(e.team_name).trim()),c.value){Ue(t,"created_date",e.created_date),e.channel_group_id&&(t.channel_group_id=e.channel_group_id),e.customer_group_id&&(t.customer_group_id=e.customer_group_id);const l=G(e.market);l&&(t.market=l);const r=G(e.owner_name);return r&&(t.owner_name=r),e.insurance_expire_date&&(t.insurance_expire_date=e.insurance_expire_date),Ue(t,"first_register_date",e.first_register_date),(e.is_paid===!0||e.is_paid===!1)&&(t.is_paid=e.is_paid),(e.is_rebate===!0||e.is_rebate===!1)&&(t.is_rebate=e.is_rebate),t}return Oe.mode==="finished"&&(t.is_finished=!0),Oe.mode==="unfinished"&&(t.is_finished=!1),e.owner_name&&(t.owner_name=e.owner_name),e.id_number&&(t.id_number=e.id_number),e.vin&&(t.vin=e.vin),e.engine_no&&(t.engine_no=e.engine_no),e.plate_no&&(t.plate_no=e.plate_no),e.vehicle_model&&(t.vehicle_model=e.vehicle_model),e.remark&&(t.remark=e.remark),e.customer_group_id&&(t.customer_group_id=e.customer_group_id),e.channel_group_id&&(t.channel_group_id=e.channel_group_id),e.salesperson_id&&(t.salesperson_id=e.salesperson_id),Ue(t,"created_date",e.created_date),t}function tt(){const t={...Ee()};return delete t.page,delete t.page_size,t}function sn(t){const e=new Set,l=r=>r===null||typeof r!="object"?r:e.has(r)?null:(e.add(r),Array.isArray(r)?r.map(l):Object.keys(r).sort().reduce((i,p)=>(i[p]=l(r[p]),i),{}));try{return JSON.stringify(l(t))}catch{return""}}function cn(t){const e=i=>{const p=Number(i);return Number.isFinite(p)?p:0},l=e(t?.channel_reward??t?.channel_bonus??0),r=e(t?.customer_reward??t?.customer_bonus??0);return{id:-1,_is_summary:!0,col_01_date:"汇总",col_14_commercial_amount:e(t?.commercial_amount),col_15_compulsory_amount:e(t?.compulsory_amount),col_16_tax_amount:e(t?.vehicle_tax_amount),col_17_noncar_amount:e(t?.noncar_amount),col_31_channel_reward:l,col_32_customer_reward:r,channel_reward:l,customer_reward:r,col_26_receivable:e(t?.payable),col_27_payable:e(t?.receivable),col_28_profit:e(t?.profit)}}const dn=U(()=>{const t=Array.isArray(ye.value)?[...ye.value]:[];return c.value&&K.value&&t.push(cn(K.value)),t});return fn(async()=>{await yt(),await D()}),(t,e)=>{const l=S("el-date-picker"),r=S("el-form-item"),i=S("el-col"),p=S("el-option"),h=S("el-select"),V=S("el-input"),C=S("el-row"),w=S("el-button"),B=S("el-form"),v=S("el-card"),s=S("el-table-column"),L=S("el-switch"),me=S("el-icon"),q=S("el-dropdown-item"),fe=S("el-dropdown-menu"),pe=S("el-dropdown"),ve=S("el-table"),he=S("el-pagination"),_n=vn("loading");return f(),g("div",An,[ae("div",Rn,[ae("h2",null,m(Ie.title),1)]),a(v,{shadow:"never",class:"toolbar-card","body-style":{padding:"10px 12px"}},{default:o(()=>[a(B,{model:u.value,class:"filters-form","label-width":"88px"},{default:o(()=>[c.value?(f(),g(T,{key:0},[a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"日期"},{default:o(()=>[a(l,{modelValue:u.value.created_date,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value.created_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"渠道"},{default:o(()=>[a(h,{modelValue:u.value.channel_group_id,"onUpdate:modelValue":e[1]||(e[1]=n=>u.value.channel_group_id=n),clearable:"",filterable:"",placeholder:"选择渠道",style:{width:"100%"},loading:I.value,disabled:I.value},{default:o(()=>[(f(!0),g(T,null,J(Ne.value,n=>(f(),N(p,{key:String(n.id),label:ue(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"客户"},{default:o(()=>[a(h,{modelValue:u.value.customer_group_id,"onUpdate:modelValue":e[2]||(e[2]=n=>u.value.customer_group_id=n),clearable:"",filterable:"",placeholder:"选择客户",style:{width:"100%"},loading:I.value,disabled:I.value},{default:o(()=>[(f(!0),g(T,null,J(Se.value,n=>(f(),N(p,{key:String(n.id),label:ue(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"市场"},{default:o(()=>[a(V,{modelValue:u.value.market,"onUpdate:modelValue":e[3]||(e[3]=n=>u.value.market=n),clearable:"",placeholder:"市场（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"团队"},{default:o(()=>[a(h,{modelValue:u.value.team_name,"onUpdate:modelValue":e[4]||(e[4]=n=>u.value.team_name=n),clearable:"",filterable:"",placeholder:"选择团队",style:{width:"100%"},loading:ie.value,disabled:ie.value||!$e.value},{default:o(()=>[(f(!0),g(T,null,J(X.value,n=>(f(),N(p,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:18})]),_:1}),a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"车主"},{default:o(()=>[a(V,{modelValue:u.value.owner_name,"onUpdate:modelValue":e[5]||(e[5]=n=>u.value.owner_name=n),clearable:"",placeholder:"车主（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"保险到期日"},{default:o(()=>[a(l,{modelValue:u.value.insurance_expire_date,"onUpdate:modelValue":e[6]||(e[6]=n=>u.value.insurance_expire_date=n),type:"date","value-format":"YYYY-MM-DD",placeholder:"选择日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"初登日期"},{default:o(()=>[a(l,{modelValue:u.value.first_register_date,"onUpdate:modelValue":e[7]||(e[7]=n=>u.value.first_register_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"是否回款"},{default:o(()=>[a(h,{modelValue:u.value.is_paid,"onUpdate:modelValue":e[8]||(e[8]=n=>u.value.is_paid=n),clearable:"",placeholder:"全部",style:{width:"100%"}},{default:o(()=>[a(p,{label:"是",value:!0}),a(p,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"是否返点"},{default:o(()=>[a(h,{modelValue:u.value.is_rebate,"onUpdate:modelValue":e[9]||(e[9]=n=>u.value.is_rebate=n),clearable:"",placeholder:"全部",style:{width:"100%"}},{default:o(()=>[a(p,{label:"是",value:!0}),a(p,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(i,{span:18,class:"finance-actions-col"},{default:o(()=>[ae("div",Fn,[a(w,{"native-type":"button",type:"primary",loading:E.value,onClick:M},{default:o(()=>[...e[24]||(e[24]=[d("搜索",-1)])]),_:1},8,["loading"]),a(w,{"native-type":"button",loading:E.value,onClick:Je},{default:o(()=>[...e[25]||(e[25]=[d("重置",-1)])]),_:1},8,["loading"]),a(w,{"native-type":"button",loading:E.value,onClick:D},{default:o(()=>[...e[26]||(e[26]=[d("刷新",-1)])]),_:1},8,["loading"]),ge.value?(f(),g(T,{key:0},[a(w,{"native-type":"button",disabled:E.value||te.value||(Number(we.value)||0)<=0,loading:te.value,onClick:le(It,["stop","prevent"])},{default:o(()=>[...e[27]||(e[27]=[d(" 下载 ",-1)])]),_:1},8,["disabled","loading"]),Q.value.length?(f(),g("span",Mn,"已选 "+m(Q.value.length),1)):F("",!0)],64)):F("",!0)])]),_:1})]),_:1})],64)):(f(),g(T,{key:1},[a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"日期"},{default:o(()=>[a(l,{modelValue:u.value.created_date,"onUpdate:modelValue":e[10]||(e[10]=n=>u.value.created_date=n),type:"daterange","value-format":"YYYY-MM-DD","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"渠道"},{default:o(()=>[a(h,{modelValue:u.value.channel_group_id,"onUpdate:modelValue":e[11]||(e[11]=n=>u.value.channel_group_id=n),clearable:"",filterable:"",placeholder:"选择渠道",style:{width:"100%"},loading:I.value,disabled:I.value},{default:o(()=>[(f(!0),g(T,null,J(Ne.value,n=>(f(),N(p,{key:String(n.id),label:ue(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"客户"},{default:o(()=>[a(h,{modelValue:u.value.customer_group_id,"onUpdate:modelValue":e[12]||(e[12]=n=>u.value.customer_group_id=n),clearable:"",filterable:"",placeholder:"选择客户",style:{width:"100%"},loading:I.value,disabled:I.value},{default:o(()=>[(f(!0),g(T,null,J(Se.value,n=>(f(),N(p,{key:String(n.id),label:ue(n),value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"业务员"},{default:o(()=>[a(h,{modelValue:u.value.salesperson_id,"onUpdate:modelValue":e[13]||(e[13]=n=>u.value.salesperson_id=n),clearable:"",filterable:"",placeholder:"选择业务员",style:{width:"100%"},loading:re.value,disabled:re.value},{default:o(()=>[(f(!0),g(T,null,J(gt.value,n=>(f(),N(p,{key:String(n.id),label:n.real_name||n.username,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"团队"},{default:o(()=>[a(h,{modelValue:u.value.team_name,"onUpdate:modelValue":e[14]||(e[14]=n=>u.value.team_name=n),clearable:"",filterable:"",placeholder:"选择团队",style:{width:"100%"},loading:ie.value,disabled:ie.value||!$e.value},{default:o(()=>[(f(!0),g(T,null,J(X.value,n=>(f(),N(p,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading","disabled"])]),_:1})]),_:1}),a(i,{span:18})]),_:1}),a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"车主"},{default:o(()=>[a(V,{modelValue:u.value.owner_name,"onUpdate:modelValue":e[15]||(e[15]=n=>u.value.owner_name=n),clearable:"",placeholder:"车主（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"身份证号"},{default:o(()=>[a(V,{modelValue:u.value.id_number,"onUpdate:modelValue":e[16]||(e[16]=n=>u.value.id_number=n),clearable:"",placeholder:"身份证号（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"车牌"},{default:o(()=>[a(V,{modelValue:u.value.plate_no,"onUpdate:modelValue":e[17]||(e[17]=n=>u.value.plate_no=n),clearable:"",placeholder:"车牌（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"发动机号"},{default:o(()=>[a(V,{modelValue:u.value.engine_no,"onUpdate:modelValue":e[18]||(e[18]=n=>u.value.engine_no=n),clearable:"",placeholder:"发动机号（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(C,{gutter:12},{default:o(()=>[a(i,{span:6},{default:o(()=>[a(r,{label:"车架号"},{default:o(()=>[a(V,{modelValue:u.value.vin,"onUpdate:modelValue":e[19]||(e[19]=n=>u.value.vin=n),clearable:"",placeholder:"车架号（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"车型"},{default:o(()=>[a(V,{modelValue:u.value.vehicle_model,"onUpdate:modelValue":e[20]||(e[20]=n=>u.value.vehicle_model=n),clearable:"",placeholder:"车型（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6},{default:o(()=>[a(r,{label:"备注"},{default:o(()=>[a(V,{modelValue:u.value.remark,"onUpdate:modelValue":e[21]||(e[21]=n=>u.value.remark=n),clearable:"",placeholder:"备注（模糊）",onKeyup:Y(M,["enter"])},null,8,["modelValue"])]),_:1})]),_:1}),a(i,{span:6,class:"toolbar-actions"},{default:o(()=>[a(w,{"native-type":"button",type:"primary",loading:E.value,onClick:M},{default:o(()=>[...e[28]||(e[28]=[d("搜索",-1)])]),_:1},8,["loading"]),a(w,{"native-type":"button",loading:E.value,onClick:Je},{default:o(()=>[...e[29]||(e[29]=[d("重置",-1)])]),_:1},8,["loading"]),a(w,{"native-type":"button",loading:E.value,onClick:D},{default:o(()=>[...e[30]||(e[30]=[d("刷新",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})],64))]),_:1},8,["model"])]),_:1}),ae("div",Bn,[pn((f(),N(ve,{ref_key:"tableRef",ref:De,data:dn.value,border:"",stripe:"",class:"main-table","row-class-name":ut,onSelectionChange:st},{default:o(()=>[c.value&&ge.value?(f(),N(s,{key:0,type:"selection",width:"44",fixed:"left",align:"center","header-align":"center",selectable:it})):F("",!0),a(s,{label:"日期","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"汇总":Ye(Dt(n))),1)]),_:1}),rt.value?(f(),N(s,{key:1,label:"完成状态","min-width":"92",align:"center","header-align":"center","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Ae(n)?"是":"否"),1)]),_:1})):F("",!0),a(s,{label:"渠道","min-width":"140","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Lt(n)),1)]),_:1}),a(s,{label:"客户","min-width":"140","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":zt(n)),1)]),_:1}),a(s,{label:"市场","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Yt(n)),1)]),_:1}),c.value?(f(),N(s,{key:2,label:"业务员","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":jt(n)),1)]),_:1})):F("",!0),a(s,{label:"车主","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Gt(n)),1)]),_:1}),a(s,{label:"车牌","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Kt(n)),1)]),_:1}),a(s,{label:"保险到期日","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":qt(n)),1)]),_:1}),a(s,{label:"车架号","min-width":"160","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Jt(n)),1)]),_:1}),a(s,{label:"发动机号","min-width":"150","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Zt(n)),1)]),_:1}),a(s,{label:"车型","min-width":"160","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Ht(n)),1)]),_:1}),a(s,{label:"初登日期","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Wt(n)),1)]),_:1}),a(s,{label:"身份证号","min-width":"170","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Xt(n)),1)]),_:1}),a(s,{label:"电话","min-width":"130","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":Qt(n)),1)]),_:1}),a(s,{label:"商业金额","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_e(n,"commercial_amount")),1)]),_:1}),a(s,{label:"交强金额","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_e(n,"compulsory_amount")),1)]),_:1}),a(s,{label:"车船税金额","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_e(n,"vehicle_tax_amount")),1)]),_:1}),a(s,{label:"非车金额","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_e(n,"noncar_amount")),1)]),_:1}),a(s,{label:"渠道商业点位","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"channel_commercial_point")),1)]),_:1}),a(s,{label:"渠道商业后补点位","min-width":"140","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"channel_commercial_supplement_point")),1)]),_:1}),a(s,{label:"渠道交强点位","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"channel_compulsory_point")),1)]),_:1}),a(s,{label:"渠道车船税点位","min-width":"130","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"channel_vehicle_tax_point")),1)]),_:1}),a(s,{label:"渠道非车点位","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"channel_noncar_point")),1)]),_:1}),c.value?(f(),N(s,{key:3,label:"渠道奖励","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(et(n,"channel_reward")),1)]),_:1})):F("",!0),a(s,{label:"客户商业点位","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"customer_commercial_point")),1)]),_:1}),a(s,{label:"客户商业后补点位","min-width":"140","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"customer_commercial_supplement_point")),1)]),_:1}),a(s,{label:"客户交强点位","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"customer_compulsory_point")),1)]),_:1}),a(s,{label:"客户车船税点位","min-width":"130","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"customer_vehicle_tax_point")),1)]),_:1}),a(s,{label:"客户非车点位","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":P(n,"customer_noncar_point")),1)]),_:1}),c.value?(f(),N(s,{key:4,label:"客户奖励","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(et(n,"customer_reward")),1)]),_:1})):F("",!0),a(s,{label:"应收","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(ln(n)),1)]),_:1}),a(s,{label:"应付","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(on(n)),1)]),_:1}),a(s,{label:"利润","min-width":"110","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(rn(n)),1)]),_:1}),a(s,{label:"所属经理","min-width":"130","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":en(n)),1)]),_:1}),a(s,{label:"所属团队","min-width":"120","show-overflow-tooltip":""},{default:o(({row:n})=>[d(m(_(n)?"":tn(n)),1)]),_:1}),c.value?(f(),N(s,{key:5,label:"是否回款",width:"108",fixed:"right",align:"center","header-align":"center","class-name":"col-switch"},{default:o(({row:n})=>[_(n)?(f(),g("span",En)):(f(),g("div",Un,[a(L,{size:"medium","inline-prompt":"","inactive-text":"否","active-text":"是","model-value":Re(n),loading:!!n?._saving_paid,disabled:!H.value,onChange:z=>Ft(n,z)},null,8,["model-value","loading","disabled","onChange"])]))]),_:1})):F("",!0),c.value?(f(),N(s,{key:6,label:"是否返点",width:"108",fixed:"right",align:"center","header-align":"center","class-name":"col-switch"},{default:o(({row:n})=>[_(n)?(f(),g("span",On)):(f(),g("div",In,[a(L,{size:"medium","inline-prompt":"","inactive-text":"否","active-text":"是","model-value":Fe(n),loading:!!n?._saving_rebate,disabled:!H.value,onChange:z=>Mt(n,z)},null,8,["model-value","loading","disabled","onChange"])]))]),_:1})):F("",!0),a(s,{label:"操作",width:c.value?110:130,fixed:"right",align:"center","header-align":"center","class-name":"col-actions"},{default:o(({row:n})=>[_(n)?(f(),g("span",Pn)):c.value?(f(),g("div",Tn,[a(w,{"native-type":"button",size:"small",link:"",onClick:le(z=>ce(n.id),["stop"])},{default:o(()=>[...e[31]||(e[31]=[d("详情",-1)])]),_:1},8,["onClick"]),a(pe,{trigger:"click",teleported:!0,placement:"bottom-end","popper-class":"order-actions-popper",onCommand:z=>Rt(z,n)},{dropdown:o(()=>[a(fe,null,{default:o(()=>[a(q,{command:"detail"},{default:o(()=>[...e[32]||(e[32]=[d("详情",-1)])]),_:1}),H.value?(f(),N(q,{key:0,command:"return",divided:""},{default:o(()=>[...e[33]||(e[33]=[d("退回未完成",-1)])]),_:1})):F("",!0)]),_:1})]),default:o(()=>[a(w,{"native-type":"button",size:"small",circle:"",onClick:e[22]||(e[22]=le(()=>{},["stop"]))},{default:o(()=>[a(me,null,{default:o(()=>[a(nt(at))]),_:1})]),_:1})]),_:1},8,["onCommand"])])):(f(),g("div",$n,[a(w,{"native-type":"button",size:"small",link:"",onClick:le(z=>ce(n.id),["stop"])},{default:o(()=>[...e[34]||(e[34]=[d("详情",-1)])]),_:1},8,["onClick"]),a(pe,{trigger:"click",teleported:!0,placement:"bottom-end","popper-class":"order-actions-popper",onCommand:z=>Vt(z,n)},{dropdown:o(()=>[a(fe,null,{default:o(()=>[a(q,{command:"detail"},{default:o(()=>[...e[35]||(e[35]=[d("详情",-1)])]),_:1}),Ze(n)?(f(),N(q,{key:0,command:"markFinished",divided:""},{default:o(()=>[...e[36]||(e[36]=[d("标记完成",-1)])]),_:1})):F("",!0),He(n)?(f(),N(q,{key:1,command:"reopen",divided:""},{default:o(()=>[...e[37]||(e[37]=[d("退回未完成",-1)])]),_:1})):F("",!0)]),_:2},1024)]),default:o(()=>[a(w,{"native-type":"button",size:"small",circle:"",onClick:e[23]||(e[23]=le(()=>{},["stop"]))},{default:o(()=>[a(me,null,{default:o(()=>[a(nt(at))]),_:1})]),_:1})]),_:2},1032,["onCommand"])]))]),_:1},8,["width"])]),_:1},8,["data"])),[[_n,E.value]])]),ae("div",Dn,[a(he,{background:"",layout:"total, prev, pager, next, sizes",total:we.value,"current-page":W.value,"page-size":ke.value,"page-sizes":[10,20,50,100],onCurrentChange:kt,onSizeChange:St},null,8,["total","current-page","page-size"])])])}}},Zn=Vn(Ln,[["__scopeId","data-v-82882a53"]]);export{Zn as O};
